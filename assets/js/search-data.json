{
  
    
        "post0": {
            "title": "Algorithms week 7",
            "content": "Algorithms Week 7 . Binary search tree . . . Turns out that’s not a great idea. Instead we turn to… . Idea 1: Rotations . . . Does this work? . Whenever something seems unbalanced, do rotations until it’s okay gain. -&gt; Even for me this is pretty vague. What do we mean by “seems unbalanced”? What’s “okay”? . Idea 2: have some proxy for balance . . . Red-Black Trees . . . This is pretty balanced. . The black nodes are balanced. | The red nodes are “spread out” so they don’t mess things up too much. | . We can maintain this property as we insert/delete nodes, by using rotations. . The Red-Black structure is a proxy for balance. It’s just a little weaker than perfect balance, but we can actually maintain it. . . . Okay, so it’s balanced, but can we maintain it? -&gt; Yes . . . . . . 일단 red로 insert하고, grandparent와 parent의 색을 바꿈 . . . root까지 recursive하게 색을 바꿔주면서 올라가면 됨 . . . . . 딱 하나의 case만 고치는 예제 코드 . Deleting from a Red-Black tree . . . . . . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/14/algorithms-week-7.html",
            "relUrl": "/markdown/2021/10/14/algorithms-week-7.html",
            "date": " • Oct 14, 2021"
        }
        
    
  
    
        ,"post1": {
            "title": "CFA Level 2 Alternative Investment",
            "content": "CFA Level 2 Alternative Investment . . LOS 39.a: Classify and describe forms of real estate investments. .   Debt Equity . Private | Mortgage | Direct investments such as sole ownership, partnerships, and other forms of commingled funds | . Public | Mortgage-backed securities | Shares of REITs and REOCs | . REOC (Real Estate Operating Company) . . Private vs. Public . Private . Large size undivided, less liquid | . | Active management | . Public . Small size divided ownership | diversification | . | Passive management | . Equity vs. Debt . Equity . High risk, high return | Financial leverage | Upside potential Capital gain | Rental income | . | . Debt . Senior than equity | Safe | Promised cashflow | No upside | . LOS 39.b: Describe the characteristics, the classification, and basic segments of real estate. . Real Estate Characteristics . Heterogeneity - No two property are exactly the same because of location, size, age, construction materials, and lease terms. | High unit value | Active management - Private real estate investment requires active property management. | High transaction costs - appraisers, lawyers, brokers, and construction personnel | Depreciation and desirability (매력도) | Cost and availability of debt capital | Lack of liquidity | Difficulty in determining price Appraisals are usually to assess real estate values. | The combination of limited market participants and lack of knowledge of the local markets makes it difficult for an outsider to value property. As a result, the market is less efficient. However, investors with superior information and skill may have an advantage in exploiting the market inefficiencies. | . | . Shares of a REIT are actively traded and more likely to reflect market value. In addition, investing in a REIT can provide exposure to a diversified real estate portfolio. Finally, investors don’t need property management expertise. . Property Classifications . . LOS 39.c: Explain the role in a portfolio, economic value determinants, investment characteristics, and principal risks of private real estate. . LOS 39.l: Explain the role in a portfolio, the major economic value determinants, investment characteristics, principal risks, and due diligence of private real estate debt investment. . Reasons to invest in real estate . Current income | Capital appreciation | Inflation hedge | Diversification - Real estate, especially private equity investment, is less than perfectly correlated with the returns of stocks and bonds. | Tax benefits - In the United States, the depreciable life of real estate is usually shorter than the actual life. As a result, depreciation expense is higher, and taxable income is lower resulting in lower income taxes. Also REITs do not pay taxes in some countries, which allow investors to escape double taxation. | . Principal risks . Business condition | New property lead time | Cost and availability of capital - Demand for real estate is reduced when debt capital is scarce and interest rates are high. Real estate price can be affected by capital market forces without changes in demand from tenants. | Unexpected inflation - Real estate values may not keep up with inflation when markets are weak and vacancy rates are high. | Demographic factors - The size and age distribution of the local market population, the distribution of socioeconomic groups, and new household formation rates. | Lack of liquidity | Availability of information | Management expertise - Operational decisions-such as negotiating lease, property maintenance, marketing, and renovating the property | Leverage - High LTV -&gt; higher risk -&gt; NOI에 큰 영향 | Other factors - natural disaster, and acts of terrorism | . The role of real estate in a portfolio . Real estate investment has both bond-like and stock-like characteristics. . Role of leverage in real estate investment . . LOS 39.d: Describe commercial property types, including their distinctive investment characteristics. . Commercial property types . Office - Demand is heavily dependent on job growth In a gross lease, the owner is responsible for the operating expenses, and in a net lease, the tenant if responsible. | In a net lease, the tenant bears the risk if the actual operating expenses are greater than expected. | Some lease combine features from both gross and net lease. | . | Industrial - Demand is heavily dependent on the overall economy. Demand is also affected by import/export activity of the economy. Net lease are common | . | Retail - Demand is heavily dependent on consumer spending. Consumer spending is affected by the overall economy, job growth, population growth, and savings rates. | An anchor tenant may receive favorable lease terms to attract them to the property. In turn, the anchor tenant will draw other tenants to the property. | Retail tenants are often required to pay additional rent once sales reach a certain level. This unique feature is known as a percentage lease or percentage rent. | . | Multi-family - Demand depends on population growth, especially in the age demographic that typically rents apartments. Demand is also affected by the cost of buying versus the cost of renting. | . | . LOS 39.e: Compare the income, cost, and sales comparison approaches to valuing real estate properties. . Real estate appraisals . . Valuation approaches . Cost approach . Because of the difficulty in measuring depreciation and obsolescence, the cost approach is most useful when the subject property is relatively new. The cost approach is often used for unusual properties or properties where comparable transactions are limited. . . . . Highest and best use . The concept of highest and best use is important in determining value. The highest and best use of a vacant site is not necessarily the use that results in the highest total value once a project is completed. Rather, the highest and best use of a vacant site is the use that produces the highest implied land value. . Note that the highest and best use is not based on the highest value when the projects are completed but, rather, the highest implied land value. . . LOS 39.f: Estimate and interpret the inputs (for example, net operating income, capitalization rate, and discount rate) to the direct capitalization and discounted cash flow valuation methods. . LOS 39.g: Calculate the value of a property using the direct capitalization and discounted cash flow valuation methods. . Income approach . With the direct capitalization method, value is based on capitalizing the first year NOI of the property using a capitalization rate. With the discounted cash flow method, value is based on the present value of the property’s future cash flows using an appropriate discount rate. Rentalincomeiffullyoccupied⁡+Otherincome⁡=Potentialgrossincome⁡−Vacancyandcollectionloss⁡=Effectivegrossincome⁡−Operatingexpense⁡=Netoperatingincome⁡ operatorname{Rental income if fully occupied} + operatorname{Other income} = operatorname{Potential gross income} - operatorname{Vacancy and collection loss} = operatorname{Effective gross income} - operatorname{Operating expense} = operatorname{Net operating income}Rentalincomeiffullyoccupied+Otherincome=Potentialgrossincome−Vacancyandcollectionloss=Effectivegrossincome−Operatingexpense=Netoperatingincome . The capitalization rate . caprate⁡=discountrate⁡−growthrate⁡caprate⁡=NOI⁡1value⁡V0=NOI⁡1caprate⁡caprate⁡=NOI⁡1comparablesalesprice⁡ operatorname{cap rate} = operatorname{discount rate} - operatorname{growth rate} operatorname{cap rate} = frac{ operatorname{NOI}_{1}}{ operatorname{value}} V_{0} = frac{ operatorname{NOI}_{1}}{ operatorname{cap rate}} operatorname{cap rate} = frac{ operatorname{NOI}_{1}}{ operatorname{comparable sales price}}caprate=discountrate−growthratecaprate=valueNOI1​​V0​=caprateNOI1​​caprate=comparablesalespriceNOI1​​ . It is important to observe several comparable transactions when deriving the cap rate. Implicit in the cap rate derived from comparable transactions are investors’ expectations of income growth and risk. In this case, the cap rate is similar to the reciprocal of the price-earnings multiple for equity securities. . All Risks Yield (ARY) - The ARY in the cap rate and will differ from the discount rate if an investor expects growth in rents and value. value⁡=V0=rent⁡1ARY⁡ operatorname{value} = V_{0} = frac{ operatorname{rent}_{1}}{ operatorname{ARY}}value=V0​=ARYrent1​​ If rents are expected to increase at a constant rate each year, the internal rate of return (IRR) can be approximately by summing the cap rate and growth rate. . . Stabilized NOI . If NOI is not representative of the NOI of similar properties because of a temporary issue, the subject property’s NOI should be stabilized. For example, suppose a property is temporarily experiencing high vacancy during a major renovation. In this case, the first-year NOI should be stabilized; NOI should be calculated as if the renovation is complete. Once the stabilized NOI is capitalized, the loss in value, as a result of the temporary decline in NOI, is subtracted in arriving at the value of the property. . . grossincomemultiplier⁡=salesprice⁡grossincome⁡value⁡=grossincome⁡∗grossincomemultiplier⁡ operatorname{gross income multiplier} = frac{ operatorname{sales price}}{ operatorname{gross income}} operatorname{value} = operatorname{gross income} * operatorname{gross income multiplier}grossincomemultiplier=grossincomesalesprice​value=grossincome∗grossincomemultiplier ball park figure (약식 계산 방법) . A shortfall of the gross income multiplier is that it ignores vacancy rates and operating expenses. Thus, if the subject property’s vacancy rate and operating expenses are higher than those of the comparable transactions, an investor will pay more for the same rent. . . Discounted cash flow method . . Terminal cap rate . . . . Valuation with different lease structures . . Lease structures can vary by country. For example, in the UK, it is common for tenants to pay all expenses. In this case, the cap rate is known as the ARY. Adjustments must be made when the contract rent (passing or term rent) and the current market rent (open market rent) differ. Once the lease expires, rent will likely be adjusted to the current market rent. In the UK, the property is said to have reversionary potential when the contract rent expires. . . . A variation of the term and reversion approach is the layer method. . . . Using the term and reversion approach and the layer method, different cap rates were applied to the term rent and the current market rent after review. Alternatively, a single discount rate, known as the equivalent yield, could have been used. The equivalent yield is an average, although not a simple average, of the two separate cap rates. . Using the discounted cash flow method requires the following estimates and assumptions. . Project income from existing leases | Lease renewal assumptions | Operating expense assumptions - Operating expenses can be classified as fixed, variable, or a hybrid of the two. | Vacancy assumption | Estimated resale price | Appropriate discount rate - The discount rate should be higher than the mortgage rate because more risk. | . . . LOS 39.h: Compare the direct capitalization and discounted cash flow valuation methods. . . Under the direct capitalization method, a cap rate or income multiplier is applied to first-year NOI. Implicit in the cap rate or multiplier are expected increases in growth. . Under the discounted cash flow (DCF) method, the future cash flows, including the capital expenditures and terminal value, are projected over the holding period and discounted to present at the discount rate. Future growth of NOI is explicit in the DCF method. . Because of the inputs required, the DCF method is more complex than the direct capitalization method, as it focuses on NOI over the entire holding period and not just NOI in the first year. Choosing the appropriate discount rate and terminal cap rate are crucial as small differences in the rates can significantly affect value. . Following are some common errors made using the DCF method: . The discount rate does not adequately capture risk. | Income growth exceeds expense growth. | The terminal cap rate and the going-in-cap rate are not consistent. | The terminal cap rate is applied to NOI that is atypical. | The cyclicality of real estate markets is ignored. | . LOS 39.i: Calculate the value of a property using the cost and sales comparison approaches. . Cost approach . Step 1: Estimate the market value of the land. . Step 2: Estimate the building’s replacement cost. Replacement cost is based on current construction costs and standards and should include any builder/developer’s profit. . Replacement cost refers to the cost of a building having the same utility but constructed with modern building materials. (지금 구할 수 있는 소나무 사용) Reproduction cost refers to the cost of reproducing an exact replica of the building using the same building materials, architectural design, and quality of construction. (400년 된 소나무 사용) Replacement cost is usually more relevant for appraisal purposes because reproduction cost may be uneconomical. | . Step 3: Deduct depreciation including physical deterioration, functional obsolescence, locational obsolescence, and economic obsolescence. Physical deterioration is related to the building’s age and occurs as a result of normal wear and tear over time. Physical deterioration can be curable or incurable. . An item is incurable if the problem is not economically feasible to remedy. For example, the cost of fixing a structural problem might exceed the benefit of the repair. Since a incurable defect would not be fixed, depreciation can be estimated based on the effective age of the property relative to its total economic life. For example, the physical depreciation of a property with an effective age of 30 years and a 50-year total economic life is 60% (30 year effective age / 50 year economic life). . Functional obsolescence is the loss in value resulting from defects in design that impairs a building’s utility. . Locational obsolescence occurs when the location is no longer optional. A prison is built down the street making the location of the apartment complex less desirable. . Economic obsolescence occurs when new construction is not feasible under current economic conditions. This can occur when rental rates are not sufficient to support the property. . . . Because of the difficulty in measuring depreciation and obsolescence, the cost approach is most useful when the subject property is relatively new. . The cost approach is sometimes considered the upper limit of value since an investor when never pay more than the cost to build a comparable building. . . Sales comparison approach . . . The sales comparison approach is most useful when there are a number of properties similar to the subject that have been recently sold, as is usually the case with single-family homes. Even in an active market, there may be limited transactions of specialized property types, such as regional malls and hospitals. The sales comparison approach assumes purchaser are acting rationally. However, there are times when purchaser become overly exuberant and market bubbles occur. . . Reconciliation of value . An important part of the appraisal process involves determining the final estimate of value by reconciling the value differences in the three approaches. . For example, an appraiser might apply a higher weight to the value obtained with the sales comparison approach when the market is active with plenty of comparable properties. Alternatively, if the subject property is old and estimating depreciation is difficult, an appraiser might apply a lower weight to the cost method. . LOS 39.j: Describe due diligence in private equity real estate investment. . Lease review and rental history | Confirm the operating expenses by examining bills | Review cash flow statement | Obtain an environmental report to identify the possibility of contamination | Perform a physical/engineering inspection | Inspect the title and other legal documents for defeiciencies | Have the property surveyed to confirm the boundaries and identify easements (사용권) | Verify compliance with zoning laws, building codes, and environmental regulations | Verify payment of taxes, insurance, special assessments, and other expenditures | . LOS 39.k: Discuss private equity real estate investment indexes, including their construction and potential bias. . Appraisal-based indices . A popular index in the United States in the NCREIF Property Index (NPI). Member of NCREIF, mainly investment managers and pension fund sponsors, submit appraisal data quarterly, and NCREIF calculates the return as follows: return⁡=NOI−capitalexpenditures⁡+(endmarketvalue⁡−begmarketvalue⁡)beginningmarketvalue⁡ operatorname{return} = frac{NOI - operatorname{capital expenditures} + ( operatorname{end market value} - operatorname{beg market value})}{ operatorname{beginning market value}}return=beginningmarketvalueNOI−capitalexpenditures+(endmarketvalue−begmarketvalue)​ Appraisal-based indices tend to lag actual transactions because actual transactions occur before appraisals are performed. Thus, a change in price may not be reflected in appraised values until the next quarter or longer if a property is not appraised every quarter. Also, appraisal lag tends to smooth the index; that is, reduce its volatility, much like a moving average reduces volatility. Finally, appraisal lag results in lower correlation with other asset classes. Appraisal lag can be adjusted by unsmoothing the index or by using a transaction-based index. . . Transaction-based indices . A repeat-sales index relies on repeat sales of the same property. . A hedonic index requires only one sale. A regression is developed to control for differences in property characteristics such as size, age, location, and so forth. . LOS 39.m: Calculate and interpret financial ratios used to analyzed and evaluate private real estate investments. . Debt Service Coverage Ratio (DSCR) and Loan-to-Value (LTV) . DSCR⁡=first-year NOI⁡debtservice⁡LTV⁡=loanamount⁡appraisalvalue⁡ operatorname{DSCR} = frac{ operatorname{first-year , NOI}}{ operatorname{debt service}} operatorname{LTV} = frac{ operatorname{loan amount}}{ operatorname{appraisal value}}DSCR=debtservicefirst-yearNOI​LTV=appraisalvalueloanamount​ . Equity dividend rate . equitydividendrate⁡=firstyearcashflow⁡equity⁡ operatorname{equity dividend rate} = frac{ operatorname{first year cash flow}}{ operatorname{equity}}equitydividendrate=equityfirstyearcashflow​ . Leveraged IRR and unleveraged IRR . In order to calculate the IRR with leverage, we need to consider the cash flows over the entire holding period including the change in value of the original investment. . . We can see the effects of leverage by calculating an unleveraged IRR. In this case, the initial cash outflow is higher because no debt is incurred. . . . LOS 40.a: Describe types of publicly traded real estate securities. . Equity REITs (Real Estate Investment Trusts) . REITs are tax-advantaged companies (trusts) that are for most part exempt from corporate income tax. Equity REITs are actively managed, own income-producing real estate. Still diversifying holdings by geography and other factors. . REOCs (Real Estate Operating Companies) . REOCs are not tax-advantaged; rather, they ordinarily corporations that own real estate. A business will form as a REOC if it is ineligible to organized as REIT. For example, the firm may intend to develop and sell real estate rather than generating cash flow rental payments, or the firm may be based in a country that does not allow tax-advantaged REITs. . Residential or commercial mortgage-backed securities (MBS) . Residential or commercial mortgage-backed securities are publicly traded asset-backed securitized debt obligations that receive cash flows from an underlying pool of mortgage loans. These loans may be for commercial properties (in the case of CMBS) or on residential properties (in the case of RMBS). Real estate debt securities represent a far larger aggregate market value than do publicly traded real estate equity securities. . Mortgage REITs . Mortgage REITs invest primarily in mortgage, mortgage securities, or loans that are secured by real estate. . LOS 40.b: Explain advantages and disadvantages of investing in real estate through publicly traded securities. . Advantages . Superior liquidity - Because REIT and REOC shares trade daily on a stock exchange. | Lower minimum investment - REIT or REOC shares trade for much smaller dollar amounts. | Limited liability - The financial liability of a REIT investor is limited to the amount invested. | Access to premium properties - Some prestigious properties, such as high-profile shopping malls or other prominent or landmark buildings, are difficult to invest in directly. | Active professional management - REITs and REOCs employ professional management to control expenses, maximize rents and occupancy rates, and sometimes to acquire additional properties. | Protections accorded to publicly traded securities - Investors benefit from these securities regulations and from having a board overseeing the management on behalf of investors. Additionally, having public investors monitor the actions of management and the board of directors leads to financial and operating efficiency. | Greater potential for diversification - Through REITs, however, an investor can diversify across property type and geographical location. | . REIT-specific advantages . Exemption from taxation - As long as certain requirements are met, REITs enjoy favorable taxation, because a major part of REIT distributions are treated as a return of capital and are thus not taxable. | Predictable earnings - REITs’ rental income is fixed by contracts, unlike the income of companies of other industries. | High yield - REITs are obligated to pay out mot of their taxable income as dividends. Because of this high income payout ratio, the yields of REITs are higher than the yields on most other publicly traded equities. | . Disadvantages . Taxes versus direct ownership - Depending on local laws, investors that make direct investments in properties may be able to deduct losses on real estate from taxable income or replace one property for a similar property (“like-kind exchange” in the US) without taxation on the gains. | Lack of control | Costs of a publicly traded corporate structure | Price is determined by the stock market - While the appraisal-based value of a REIT may be relative stable, the market-determined price of a REIT share is likely to be much more volatile. Appraisals tend to be infrequent and backward-looking, while the stock market is continuous and reflects forward-looking values. | Structural conflicts of interest - When the opportunity arises to sell properties or take on additional borrowing, a particular action may have different tax implications for REIT shareholders and for the general partners, which may tempt the general partners to act in their own interest, rather than in the interest of all stakeholders. | . REIT-specific disadvantages . Limited potential for income growth - REIT’s high rates of income payout limit REIT’s ability to generate future growth through reinvestment. | Forced equity issuance - When credit is difficult to obtain, a REIT may be forced to issue equity at a disadvantageous price. | Lack of flexibility - The rules that qualify REITs for favorable taxation also have a downside: REITs are prevented from making certain kinds of investments and from retaining most of their income. These limits may prevent REITs from being as profitable as they might otherwise be. REOCs, on the other hand, do not need to meet these requirements, and thus are free to retain income and devote those funds to property development when the REOC managers see attractive opportunities. REOCs are also not restricted in their use of leverage. | . LOS 40.c: Explain economic value determinants, investment characteristics, principal risks, and due diligence considerations for real estate investment trust (REIT) shares. . Economic value determinants of REITs . Relative importance of factors affecting REIT economic value . Shopping/Retail - Retail sales growth | Office - Job creation | Residential - Population growth | Healthcare - Population growth | Industrial - Retail sales growth | Hotel - Job creation | Storage - Population growth | . Investment characteristics of REITs . Exemption from corporate-level income taxes - In order to gain this status, REITs are required to distribute almost all of the REIT’s otherwise-taxable income, and a sufficient portion of assets and income must relate to rental income-producing real estate. | High dividend yield - To maintain their tax-exempt status, REIT’s dividend yields are generally higher than yields on bonds or other equities. | Low income volatility - REIT’s revenue streams tend to be relatively stable. | Secondary equity offerings - Since REITs distribute most earnings, they likely to finance additional real estate acquisitions by selling additional shares. | . Principal risks of REITs . The most risky REITs are those that invest in property sectors where significant mismatches between supply and demand are likely (particularly health care, hotel, and office REITs), as well as those sectors where the occupancy rates are most likely to fluctuate within a short period of time (especially hotels). Other items to consider in assessing the riskiness of a REIT relate to the properties’ financing, the leases that are in place, and the properties’ locations and quantity. . Due diligence considerations of REITs . Remaining lease terms - Short remaining lease terms provide an opportunity to raise rents in an expansionary economy, while long remaining lease terms are advantageous in a declining economy or softening rental market. Initial lease terms vary with the type of property-industrial and office buildings and shopping centers generally have long lease terms, while hotels and multi-family residential real estate have short lease terms. | Inflation protection - The level of contractual hedging against rising general price levels should be evaluated. | In-place rents versus market rents - An analyst should compare the rents that a REIT’s tenants are currently paying (in-place rents) with current rents in the market. If in-place rents are high, the potential exists for cash flows to fall going forward. | Costs to re-lease space - When a lease expires, expenses typically incurred include lost rent, any new lease incentives offered, the costs of tenant-demanded improvements, and broker commissions. | Tenants’ financial health | Tenant concentration in the portfolio - Risk increases with tenant concentration. | New competition | Balance sheet analysis - the amount of leverage, the cost of debt, and the debt’s maturity | Quality of management | . LOS 40.d: Describe types of REITs . Retail . Investment characteristics . Stable revenue stream over the short term | . Principal risks . Depends on consumer spending | . Due diligence considerations . Per-square-foot sales and rental rates | Anchor tenant - long-term fixed lease | Smaller tenant - percentage lease | . Office . Investment characteristics . Long (5-25 years) lease terms | Stable year-to-year income | . Principal risks . Changes in office vacancy and rental rates | . Due diligence considerations . New space under construction | Quality of office space (location, condition of building, and so on) | . Residential . Investment characteristics . One-year leases | Stable demand | . Principal risks . Competition | Inducements (전입) | Regional economy | Inflation in operating costs | . Due diligence considerations . Demographics and income trends | Age and competitive appeal | Cost of home ownership | Rent controls by local government | . Industrial . Investment characteristics . Less cyclical than some other REIT types | 5-25 year net leases | Change in income and values are slow | . Principal risks . Shifts in the composition of local and national industrial bases and trade | . Due diligence Considerations . Trends in tenants’ requirements | Obsolescence of existing space | Need for new types of space | Proximity to transportation (airport, seaport, road) | Trends in local supply and demand | . Hotel . Investment characteristics . Variable income | Sector is cyclical because it is not protected by long-term leases | . Principal risks . Exposed to business-cycle | Changes in business and leisure travle | Exposure to travel distruptions | . Due diligence considerations . Occupancy, room rates, and operating profit margins vs. industry average | Revenue per available room (RevPAR) | Trends in forward bookings | Maintenance expenditures | New construction in local markets | Financial leverage | Margin level | F&amp;B sales | . Storage . self-storage, 개인 물건 보관 창고 . Investment characteristics . Space is rented under gross leases and on a monthly basis | . Principal risks . Ease of entry can lead to overbuilding | . Due diligence considerations . Construction of new competitive facilities | Trends in housing sales | Demographic trends | New business start-up activity | Seasonal trends in demand for storage facilities that can be significant in some markets | . LOS 40.e: Justify the use of net asset value per share (NAVPS) in REIT valuation and estimate NAVPS based on forecasted cash net operating income. . NAVPS (net asset value per share) is the (per-share) amount by which assets exceed liabilities, using current market values rather than accounting book values. NAVPS is generally considered the most appropriate measure of the fundamental value of REITs (and REOCs). If the market price of a REIT varies from NAVPS, this is seen as a sign of over- or undervaluation. . . . step 1: propertyvalue⁡=1st year NOI⁡caprate⁡step 2: TotalNetAssetValue⁡=propertyvalue⁡+othertangibleassets⁡−Liabilities⁡step 3: NAVPS⁡=TotalNAV⁡numberofoutstandingshares⁡ text{step 1: } operatorname{property value} = frac{ operatorname{1st , year , NOI}}{ operatorname{cap rate}} text{step 2: } operatorname{Total Net Asset Value} = operatorname{property value} + operatorname{other tangible assets} - operatorname{Liabilities} text{step 3: } operatorname{NAVPS} = frac{ operatorname{Total NAV}}{ operatorname{number of outstanding shares}}step 1: propertyvalue=caprate1styearNOI​step 2: TotalNetAssetValue=propertyvalue+othertangibleassets−Liabilitiesstep 3: NAVPS=numberofoutstandingsharesTotalNAV​ . LOS 40.f: Describe the use of funds from operations (FFO) and adjusted funds from operations (AFFO) in REIT valuation. . Fund from operations . Accountingnetearnings⁡+Depreciationandamortizationexpense⁡−Gainsfromsalesofproperty⁡+Lossesfromsalesofproperty⁡=Fundsfromoperations⁡ operatorname{Accounting net earnings} + operatorname{Depreciation and amortization expense} - operatorname{Gains from sales of property} + operatorname{Losses from sales of property} = operatorname{Funds from operations}Accountingnetearnings+Depreciationandamortizationexpense−Gainsfromsalesofproperty+Lossesfromsalesofproperty=Fundsfromoperations . Depreciation is added back under the premise that accounting depreciation often exceeds economic depreciation for real estate. Gains from sales of property are excluded because these are not considered to be part of continuing income. . Adjusted funds from operations . AFFO is also known as cash available for distribution (CAD) or funds available for distribution (FAD). FFO (funds from operations)⁡−Non-cash (straight-line) rent adjustment⁡−Recurring maintenance-type capital expenditures and leasing commissions⁡=AFFO (adjusted funds from operations)⁡ operatorname{FFO , (funds , from , operations)} - operatorname{Non-cash , (straight-line) , rent , adjustment} - operatorname{Recurring , maintenance-type , capital , expenditures , and , leasing , commissions} = operatorname{AFFO , (adjusted , funds , from , operations)}FFO(fundsfromoperations)−Non-cash(straight-line)rentadjustment−Recurringmaintenance-typecapitalexpendituresandleasingcommissions=AFFO(adjustedfundsfromoperations) Straight-line rent refers not to the cash rent paid during the lease but rather to the average contractual rent over a lease period-the two figures differ by non-cash rent, which reflects contractually-increasing rental rates. Capital expenditures related to maintenance, as well expenses related to leasing the space in properties, are subtracted from FFO because they represent costs that must be expended in order to maintain the value of the properties. . AFFO is considered a better measure of economic income than FFO because AFFO considered the capital expenditures that are required to sustain the property’s economic income. However, FFO is more frequently cited in practice, because AFFO relies more on estimates and is considered more subjective. . LOS 40.g: Compare the net asset value, relative value (price-to-FFO and price-to-AFFO), and discounted cash flow approaches to REIT valuation. . Net asset value per share . 일종의 intrinsic value in private market &lt;-&gt; public market value, 통상 public market value가 premium을 가짐 (liquidity) . Net asset value is an indication of a REIT’s assets to a buyer in the private market. There have historically been significant differences between NAV estimates and the prices at which REITs actually trade. . If, in general, the market is trading at a premium to NAVPS, a value investor would select the investments with the lowest premium (everything else held constant). . Relative value (price-to-FFO and price-to-AFFO) . There are three key factors that impact that price-to-FFO and price-to-AFFO of REITs and REOCs: . Expectations for growth of FFO and AFFO. | The level of risks inherent in the underlying real estate. | Risk related to the firm’s leverage and access to capital. | Discounted cash flow approach . Dividend discount and discounted cash flow models of valuation are appropriate for use with REITs and REOCs, because these two investment structures typically pay dividends and thereby return a high proportion of their income to investors. For dividend discount models, an analysts will develop near-term, medium-term, and long-term growth forecasts and then use these values at the basis for two- or three-stage dividend discount models. To build a discounted cash flow model, analysts will generally create intermediate-term cash flow projections plus a terminal value that is developed using historical cash flow multiples. . . LOS 40.h: Calculate the value of a REIT share suing net asset value, price-to-FFO and price-to-AFFO, and discounted cash flow approaches. . . . . . LOS 41.a: Explain sources of value creation in private equity. . The sources of this increased value are thought to come from the following: . The ability to re-engineering the portfolio company and operate it more efficiently. | The ability to obtain debt financing on more advantageous terms. | Superior alignment of interests between management and private equity ownership. | Re-engineering the portfolio company . Experienced industry CEOs, CFOs, and other former senior executives. These executives can share their expertise and contracts with portfolio company management. . Obtaining favorable debt financing . A second source of added value is from more favorable terms on debt financing. In PE firms, debt is more heavily utilized and is quoted as a multiple of EBITDA (earnings before interest, taxes, depreciation, and amortization) as opposed to a multiple of equity, as for public firm. . The central proposition of the Modigliani-Miller theorems is that the use of debt versus equity is inconsequential for firm value. However, once the assumption of no taxes is removed from their model, the tax savings from the use of debt increases firm value. The use of greater amount of financial leverage may increase firm value in the case of private equity firms. Because these firms have a reputation for efficient management and timely payment of debt interest, this helps to allay concerns over their highly leveraged positions and helps maintain their access to the debt markets. . According to this view, the requirement to make interest payments forces the portfolio companies to use free cash flow more efficiently because interest payments must be made on the debt. . Much of the debt financing for private equity firms comes from the syndicated loan market, but the debt is often repackaged and sold as collateralized loan obligations (CLOs). Private equity firms may also issue high-yield bonds which are repackaged as collateralized debt obligations (CDOs). . A third source of value added for PE firms is the alignment of interests between private equity owners and the managers of the portfolio companies they own. . LOS 41.b: Explain how private equity firms align their interests with those of the managers of portfolio companies. . In many private equity transactions, ownership and control are concentrated in the same hands. In buyout transactions, management often has a substantial stake in the company’s equity. In many venture capital investments, the private equity firm offers advice and management expertise. . In private equity firms, managers are able to focus more on long-term performance because, unlike public companies, private companies do not face the scrutiny of analysis, shareholders, and the broader market. This also allows the private equity firms to hire managers that are capable of substantial restructuring efforts. . Control mechanisms . Private equity firms use a variety of mechanisms to align the interests of the managers of portfolio companies with the private equity firm’s interests. . Compensation - Compensation that is closely linked to the company’s performance. | Tag-along, drag-along clauses | Board representation - The private equity firm is ensured control through board representation. | Noncompete clauses - Company founders must agree to clauses that prevent them from competing against the firm within a prespecified period of time. | Priority in claims - Private equity firms receive their distributions before other owners, often in the form of preferred dividends. They also have priority on the company’s assets if the portfolio company is liquidated. | Required approvals - Changes of strategic importance (e.g., acquisitions, divestitures, and changes in the business plan) must be approved by the private equity firm. | Earn-outs - There are used predominantly in venture capital investments. Earn-outs tie the acquisition price paid by the private equity firm to the portfolio company’s future performance over a specified time period. | . LOS 41.c: Distinguish between the characteristics of buyout and venture capital investments. . 경영권 획득 여부 차이 . Key differences between venture capital and buyout investments . Characteristics Venture Capital Investments Buyout Investments . Cash Flows | Low predictability with potentially unrealistic projections | Stable and predictable cash flows | . Product Markets | New product market with uncertain future | Strong market position with a possible niche position | . Products | Product is based on new technology with uncertain prospects | Established products | . Asset Base | Weak | Substantial base that can serve as collateral | . Management Team | New team although individual members typically have a strong entrepreneurial record | Strong and experienced | . Financial Leverage | Low debt use with a majority of equity financing | High amount of debt with a large percentage of senior debt and substantial amounts of junior and mezzanine debt | . Risk Assessment | Risk is difficult to estimate due to new technologies, markets, and company history | Risk can be estimated due to industry and company maturity | . Exit | Exit via IPO or company sale is difficult to forecast | Exit is predictable | . Operations | High cash burn rate required due to company and product immaturity | Potential exists for reduction in inefficiencies | . Working Capital Required | Increasing requirements due to growth | Low requirements | . Due Diligence Performed by Private Equity Firms | Private equity firms investigate technological and commercial prospects; investigation of financials is limited due to short history | Private equity firms perform extensive due diligence | . Goal Setting | Goals are milestone set in business plan and growth strategy | Goal reference cash flows, strategic plan, and business plan | . Private Equity Investment Returns | High returns come from a few highly successful investments with write-offs from less successful investments | Low variability in the success of investments with failures being rare | . Capital Market Presence | Generally not active in capital markets | Active in capital markets | . Sales Transactions | Most companies are sold as a result of the relationship between venture capital firm and entrepreneurs | Companies are typically sold in an auction-type process | . Ability to Grow Through Subsequent Funding | Companies are less scalable as subsequent funding is typically smaller | Strong performances can increase subsequent funding amounts | . Source of General Partner’s Variable Revenue | Carried interest is most common, transaction and monitoring fees are less common | Carried interest, transaction fees, and monitoring fees | . General valuation issues for private equity . Public companies are bough and sold on regulated exchange daily. Private companies, however, are bought by buyers with specific interests at specific points in time, with each potential buyer possibly having a different valuation for the company. Furthermore, valuing a private company is more difficult than valuing public companies because PE firms often transform and reengineering the portfolio company such that cash flow estimates are difficult to obtain. . Private equity valuation methodologies . Discounted cash flow (DCF) analysis is most appropriate for companies with a significant operating history. | A relative value or market approach applies a price multiple, such as the price-earnings ratio. This approach requires predictable cash flows and a significant history. | Real option analysis is applicable for immature companies with flexibility in their future strategies. | Replacement cost - It is generally not applicable to mature companies. | Venture capital method and the leveraged buyout method | . . Other considerations . Other considerations for valuing private equity portfolio companies are control premiums, country risk, and marketability and illiquidity discounts. . Price multiples . To value private equity portfolio companies, many investors use market data from similar publicly traded companies, most commonly the price multiples from comparable public companies. However, it is often difficult to find public companies at the same stage of development, same line of business, same capital structure, and same risk. A decision must also be made as to whether trailing or future earnings are used. For these reasons, a relative value or market approach should be used carefully. . Discounted cash flow analysis . Market data is also used with discounted cash flow (DCF) analysis, with beta and the cost of capital estimated from public companies while adjusting for differences in operating and financial leverage between the private and public comparables. In DCF analysis, an assumption must be made regarding the company’s future value. Typically a terminal value is calculated using a price multiple of the company’s EBITDA. . Buyout valuation issues . . . Types of buyouts . In a buyout transaction, the buyer acquires a controlling equity position in a target company. Buyouts include takeovers, management buyouts (MBOs), and leveraged buyouts(LBOs). This review focuses on LBOs, in which a high amount of debt is used to finance a substantial portion of the acquisition. The financing of a LBO typically involves senior debt, junk bonds, equity, and mezzanine finance. Mezzanine finance is a hybrid debt and equity and can be structured to suit each particular transaction. . Leveraged buyout (LBO) . The view of the LBO transaction, referred to as the LBO model, is not a form of valuation but rather a method of factoring in the company’s capital structure and other parameters to determine the return the private equity firm should expect from the transaction. The objective is not to value the company but to determine the maximum price in negotiation that the private equity firm should pay for its stake. . LBO model . . three main inputs: . The target company’s forecasted cash flows | The expected returns to the providers of the financing | The total amount of financing | LOS 41.d: Describe valuation issues in buyout and venture capital transactions. . Exit value . investmentcost⁡+earningsgrowth⁡+increaseinpricemultiple⁡+reductionindebt⁡=exitvalue⁡ operatorname{investment cost} + operatorname{earnings growth} + operatorname{increase in price multiple} + operatorname{reduction in debt} = operatorname{exit value}investmentcost+earningsgrowth+increaseinpricemultiple+reductionindebt=exitvalue . . . The components of the return are: . The return on the preference shares for the private equity firm. | The increased multiple upon exit. | The reduction in the debt claim. | . In most LBOs, most of the debt is senior debt that will amortize over time. In the preceding example, the debtholders’ claim on assets was reduced from $600 to $250. The use of debt in this example is advantageous and magnifies the returns to the equityholders. . . Valuation issues in venture capital investments . . Pre- and Post money valuation . The post-money valuation of the investee company is: PRE⁡+INV⁡=POST⁡The ownership proportion of the venture capital investor=INV⁡/POST⁡ operatorname{PRE} + operatorname{INV} = operatorname{POST} text{The ownership proportion of the venture capital investor} = operatorname{INV} / operatorname{POST}PRE+INV=POSTThe ownership proportion of the venture capital investor=INV/POST . Appropriate methods for venture capital valuation . The pre-money valuation and investment will be negotiated between the investee company and the VC investor. Additionally, the VC investor should keep in mind that his ownership could be diluted in the future due to future financing, conversion of convertible debt into equity, and the issuance of stock options to management. . It is difficult to forecast the cash flows for a VC portfolio company. Discounted cash flow analysis (the income approach) is not usually used as the primary valuation method for VC companies. It is also difficult to use a relative value or market approach. This is because a VC company is often unique, and there many be no comparable companies to estimate a benchmark price multiple from. A replacement cost approach may also be difficult to apply. Alternative methodologies include real option analysis and the venture capital method. . To estimate the pre-money valuation, the VC investor typically examines the company’s intellectual property and capital, the potential for the company’s products, and its intangible assets. . Valuation issues: Buyout vs. Venture capital . Valuation Issue Buyout Venture Capital . Applicability of DCF Method | Frequently used to estimate value of equity | Less frequently used as cash flows are uncertain | . Applicability of Relative Value Approach | Used to check the value from DCF analysis | Difficult to use because there may be no truly comparable companies | . Use of Debt | High | Low as equity is dominant form of financing | . Key Drivers of Equity Return | Earnings growth, increase in multiple upon exit, and reduction in the debt | Pre-money valuation, investment, and subsequent dilution | . Valuation methodologies for buyouts need to factor in the level and pattern of leverage over the investment term. . Earn-out - target company의 상승을 따라가는 것 . LOS 41.e: Explain alternative exit routes in private equity and their impact on value. . Types of exit routes . The means and timing of the exit strategy influence the exit value. . an initial public offering (IPO) | secondary market sale | management buyout (MBO) | liquidation | Initial public offering (IPO) . An IPO usually results in the highest exit value due to increased liquidity, greater access to capital, and the potential to hire better quality managers. However, an IPO is less flexible, more costly, and a more cumbersome process than the other alternatives. . IPOs are most appropriate for companies with strong growth prospects and a significant operating history and size. The timing of an IPO is key. . VC . Secondary market sale . In a secondary market sale, the company is sold to another investor or to another company interested in the purchase for strategic reasons. Secondary market sales from one investor to another are quite frequent, especially in the case of buyouts. VC portfolio companies are sometimes exited via a buyout to another firm, but VC companies are usually too immature to support a large amount of debt. Secondary market sales result in the second highest company valuation after IPOs. . Trade sale, M&amp;A . Buyout . Management buyout (MBO) . In an MBO, the company is sold to management, who utilize a large amount of leverage. The resulting high leverage may limit management’s flexibility. . Liquidation . When the company is deemed no longer visible and usually results in a low value. There is potential for negative publicity as a result of displaced employees and from the obvious implications of the company’s failure to reach its objectives. . Exit timing . For example, if a portfolio company cannot be sold due to weak capital markets, the private equity firm may want to consider buying another portfolio company at depressed prices, merging the two companies, and waiting until capital market conditions improve to sell both portfolio companies as one. . When an exit is anticipated in the next year or two, the exit valuation multiple can be forecasted without too much error. Beyond this time horizon, however, exit multiples become much more uncertain and stress testing should be performed on wide range of possible values. . LOS 41.f: Explain private equity fund structures, terms, valuation, and due diligence in the context of an analysis of private equity fund returns. . . Limited partnership . The limited partners (LPs) provide funding and do not have an active role in the management of the investments. Their liability is limited to what they have invested. The general partner (GP) in a limited partnership is liable for all the firm’s debts and, thus, has unlimited liability. The GP is the manager of the fund. . Another form of private equity fund structure is the company limited by shares. It offers better legal protection to the partners, depending on the jurisdiction. Most fund structures are closed end, meaning that investors can only redeem the investment at specified time periods. . The private equity firm usually spends a year or two raising funds. Funds are then drawn down (capital call) for investment, after which returns are realized. Most private equity funds last 10 to 12 years but can have their life extended another 2 to 3 years. . Private equity fund terms . Private equity investments are often only available to qualified investors, the definition of which depends on the jurisdiction. In the United States, the individual must have at least $1 million in assets. . If the fund is oversubscribed, the GP has greater negotiating power. . The terms of the fund should be focused towards aligning the interests of the GP and LPs and specifying the compensation of the GP. . Economic terms of a private equity fund . Committed capital is the amount of funds promised by investors to private equity funds. Paid-in capital is the amount of funds actually received from investors (also referred to as invested capital). . Management fees . These are fees paid to the GP on annual basis as a percent of committed capital. Management fees could instead be based on NAV or paid-in capital. . Transaction fees . There are paid by third parties to the GP in their advisory capacity (e.g., for investment banking services, such as arranging a merger). . Carried interest / performance fees . This is the GP’s share of the fund profits. . Ratcher . This specifies the allocation of equity between stockholders and management of the portfolio company and allows management to increase their allocation, depending on company performance. . Hurdle rates . This is the IRR that the fund must meet before the GP can receive carried interest. . Target fund size . The stated total maximum size of the PE fund, specified as an absolute figure. It is a negative signal if actual funds ultimately raised are significantly lower than targeted. . Vintage . This is the year the fund was started and facilitates performance comparisons with other funds. . Terms of the fund . As discussed previously, this is the life of the firm and is usually ten years. . . . Corporate governance terms of a private equity fund . Key man clause . If a key named executive leaves the fund or does not spend a sufficient amount of time at the fund, the GP may be prohibited from making additional investments until another key executive is selected. . Performance disclosure and confidentiality . This specified the fund performance information that can be disclosed. Note that the performance information for underlying portfolio companies is typically not disclosed. . Clawback . In a deal-by-deal method, carried interest can be distributed after each individual deal. The disadvantage of this method from the LP’s perspective is that one deal could earn $10 million and another could lose $10 million, but the GP will received carried interest on the first deal, even though the LPs have not earned an overall positive return. . In the total return method, carried interest is calculated on the entire portfolio. There are two variants of the total return method: 1) carried interest can be paid only after the entire committed capital is returned to LPs; or 2) carried interest can be paid when the value of the portfolio exceeds invested capital by some minimum amount. . Tag-along, drag-along clauses . No-fault divorce . This clause allows a GP to be fired if a supermajority (usually 75% or more) of the LPs agree to do so. . Removal for cause . This provision allows for the firing of the GP or the termination of a fund given sufficient cause (e.g., a material breach of fund prospectus). . Investment restrictions . These specify leverage limits, a minimum amount of diversification, etc. . Co-investment . This provision allows the LPs to invest in other funds of the GP at low or no management fees. The provision also prevents the GP from using capital from different funds to invest in the same portfolio company. . . . Net Asset Value (NAV) . Ways to determine NAV . At cost, adjusting for subsequent financing and devaluation. | At the minimum of cost or market value. | By revaluing a portfolio company anytime there is new financing. | At cost, with no adjustment until exit. | By using a discount factor for restricted securities (e.g, those that can only be sold to qualified investors). | Less frequently, by applying illiquidity discounts to values based on those of comparable publicly traded companies. | Issues in calculating NAV . First, if the NAV is only adjusted when there are subsequent rounds of financing, then the NAV will be more stable when financing are infrequent. | Second, there is no definitive method of calculating NAV for a private equity fund because the market value of portfolio companies is usually not certain until exit. | Third, undrawn LP capital commitments are not included in the NAV calculation but are essentially liabilities for the LP. | Fourth, the investor should be aware that funds with different strategies and maturities may use different valuation methodologies. In the early stages, method based on comparables may be used. | Finally, it is usually the GP who values the fund. LPs are increasingly using third parties to value private equity funds. | . . Due diligence of private equity fund investments . First, private equity funds have returns that tend to persist. | Second, the return discrepancy between outperformers and underperformers is very large and can be as much as 20%. | Third, private equity investments are usually illiquid, long-term investments. | . LOS 41.g: Explain risks and costs of investing in private equity. . . General risk factors . Liquidity risk | Unquoted investments risk | Competitive environment risk - The competition for finding reasonably-priced private equity investments may be high. | Agency risk - The managers of private equity portfolio companies may not act in the best interests of the private equity firm and investors. | Capital risk - Increases in business and financial risks may result in a withdrawal of capital. Portfolio companies may find the subsequent rounds of financing are difficult to obtain. | Regulatory risk | Tax risk | Valuation risk - The valuation of private equity investments reflects subjective, not independent, judgment. | Diversification risk - Private equity investments may be poorly diversified. | Market risk - Private equity is subject to long-term changes in interest rates, exchange rates, and other market risks. Short-term changes are usually not significant risk factors. | . Costs of private equity investing . Transaction costs - These costs include those from due diligence, bank financing, legal fees from acquisition, and sales transactions in portfolio companies. | Investment vehicle fund setup costs - The legal and other costs of setting up the fund are usually amortized over the life of the fund. | Administrative costs - These are charged on a yearly basis and include custodian, transfer agent, and accounting costs. | Audit costs | Management and performance costs - 2% for the management fee and a 20% fee for performance. | Dilution costs - Additional rounds of financing and stock options granted to portfolio company management will result in dilution. This is also true for options issued to the private equity firm. | Placement fees - Placement agents who raise funds for private equity firms may charge up-front fees as much as 2% or annual trailer fees as a percent of funds raised through limited partners. | . LOS 41.h: Interpret and compare financial performance of private equity funds from the perspective of an investor. . Internal rate of return (IRR) . The return metric recommended for private equity by the Global Investment Performance Standards (GIPS) is the IRR. The IRR is a cash-weighted (money-weighted) return measure. Although the private equity fund portfolio companies are actually illiquid, IRR assumes intermediate cash flows are reinvested at the IRR. . Gross IRR . The IRR can be calculated gross or net of fees. Gross IRR is the relevant measure for the cash flows between the fund and portfolio companies. . Net IRR . Net IRR can differ substantially from Gross IRR because it is net of management fees, carried interest, and other compensation to the GP. Net IRR is the relevant measure for the cash flows between the fund and LPs and is therefore the relevant return metric for the LPs. . Multiples . Multiples are a popular tool of LPs due to their simplicity, ease of use, and ability to differentiate between realized and unrealized returns. Multiples, however, ignore the time value of money. . Quantitative measures . PIC (paid-in capital) . DPI (distributed to paid-in capital) . RVPI (residual value to paid-in capital) . TVPI (total value to paid-in capital) . Qualitative measures . The realized investments, with an evaluation of successes and failrues. | The unrealized investments, with an evaluation of exit horizons and potential problems. | Cash flow projections at the fund and portfolio company level. | Fund valuation, NAV, and financial statements. | . As an example, consider a fund that was started before the financial market collapse of 2007. If the RVPI is large relative to the DPI, this indicates that the firm has not successfully harvested many of its investments and that the fund may have an extended J-curve (it is taking longer than realized to earn a positive return on its investments). The investor should carefully examine the GP’s valuations of the remaining portfolio companies, potential write-offs, and whether the routes for future exit have dried up. . Benchmarks . The benchmarking of private equity investments can be challenging. Private equity funds vary substantially from one to another. . Because there are cyclical trends in IRR returns, the Net IRR should be benchmarked against a peer group of comparable private equity funds of the same vintage and strategy. . Note also that the private equity IRR is cash flow weighted whereas most other asset class index returns are time weighted. . . . LOS 41.i: Calculate management fees, carried interest, net asset value, distributed to paid in (DPI), residual value to paid in (RVPI), and total value to paid in (TVPI) of a private equity fund. . . NAVbeforedistribution⁡t=NAVafterdistribution⁡t−1+capitalcalleddown⁡t−managementfees⁡t±Operationresult⁡tNAVbeforedistribution⁡−GPcarry⁡−LPdistribution⁡=NAVafterdistribution⁡ operatorname{NAV before distribution}_{t} = operatorname{NAV after distribution}_{t-1} + operatorname{capital called down}_{t} - operatorname{management fees}_{t} pm operatorname{Operation result}_{t} operatorname{NAV before distribution} - operatorname{GP carry} - operatorname{LP distribution} = operatorname{NAV after distribution}NAVbeforedistributiont​=NAVafterdistributiont−1​+capitalcalleddownt​−managementfeest​±Operationresultt​NAVbeforedistribution−GPcarry−LPdistribution=NAVafterdistribution . LOS 41.j: Calculate pre-money valuation, post-money valuation, ownership fraction, and price per share applying the venture capital method 1) with single and multiple financing rounds and 2) in terms of IRR. . Venture capital (VC) method . . . . LOS 41.k: Demonstrate alternative methods to account for risk in venture capital. . The discount rate used and the estimate of terminal value will strongly influence the current valuation. . Projections by entrepreneurs are typically overly optimistic and based on an assumption that the company will not fail. Instead of arguing over the validity of the projections with the entrepreneurs, most investors simply apply a high discount rate that reflects both the probability of failure and lack of diversification available in these investments. . Adjusting the discount rate . To adjust the discount rate to reflect the risk that the company may fail in any given year. probability of failure=qr∗=1+r1−q−1 text{probability of failure} = q r^{*} = frac{1 + r}{1 - q} - 1probability of failure=qr∗=1−q1+r​−1 Alternatively, the investor could have deflated each future cash flow for the cumulative probability that the company will fail. The adjusted discount rate approach is more straightforward. . . Adjusting the terminal value using scenario analysis . A second approach to generating a realistic valuation is to adjust the terminal value for the probability of failure or poor results. We should therefore use scenario analysis to calculate an expected terminal value, reflecting the probability of different terminal value under different assumptions. . Difficulties . 진정으로 유사한 comparable 찾기 어려움 | volatile multiple &lt;- scenario analysis 적용 | . In summary, VC valuation is highly dependent on the assumption used and how risk is accounted for. Additionally, scenario and sensitivity analysis should be used to determine how changes in the input variables will affect the valuation of the company. . The purpose is to place some bounds on the value of the company before negotiations begin between the startup (investee) company and the private equity firm. The final price paid for the investee company will also be affected by the bargaining power of the respective parties. . LOS 42.a: Compare characteristics of commodity sectores. . Energy - crude oil, natural gas, and refined petroleum products | Industrial metals - aluminum, nickel, zinc, lead, tin, iron, and copper | Grains - wheat, corn, soybeans, and rice | Livestock - hogs, sheep, cattle, and poultry | Precious metals - gold, silver, and platinum | Softs (cash crops) - coffee, sugar, cocoa, and cotton | . Crude oil . Viscosity / Sulfur | Storage - 장기보관 | Drilling / Extraction technology | Refining technology | Economic cycle | Alternative source of energy | Environmental concern - ESG | Political risk | Refined product . Only stored for short period | Geographic concentration | Seasonal effect - vacation, travel, heating oil | Natural gas . Transportation cost | Very little processing | Associated gas / Unassociated gas | Similar to crude oil supply / demand | More influence from seasonality - heating, cooling | Industrial metal . GDP growth, business cycle | Low storage cost | Political factors - Union strike, environment | Large scale | Precious metal . Jewelry - value storage, hedge for inflation | Industrial - business cycle | Live stock . Grain price - Grain price up -&gt; 도살 증가 -&gt; price down -&gt; 후에 price up | Weather | Disaster | Income growth in developing countries | Soft . Weather - mild climate | Disease | Income in developing countries | Consumer taste | LOS 42.b: Compare the life cycle of commodity sectors from production through trading or consumption. . Crude oil . Drill -&gt; Extract -&gt; Transport -&gt; Store -&gt; Refine -&gt; Transport . Natural gas . Minimal processing | Cooled to liquid | Deliver year round-seasonal demand | Industrial metal . Smelted | Store indefinitely | Monthly futures available | Economy of scale - Billions of dollars, significant time | 가격이 하락해도 계속 생산 -&gt; chicken game | Live stock . 동물별로 cycle이 다름 | 냉동보관 | 계절적 요인 | Grain . Seasonal | 수요예측 후 재배 시작 | 남반구 / 북반구 rotation으로 서로 보완 | Soft - Coffee . 거의 매월 수확 - 전세계 | 4년 후 수확 - 투자와 회수 time gap 존재 | 생산자 futures 매도로 hedge | LOS 42.c: Contrast the valuation of commodities with the valuation of equities and bonds. . Unlike stocks and bonds, commodities are physical assets, have no cash flows, and may incur storage and transportation costs. . Stocks and bonds (financial assets) can be valued by calculating the present value of their expected future cash flows. Commodities produce no earnings or cash flow; however, the current (spot) price of a commodity can be viewed as the discounted value of the expected selling price at some future date. Storage costs for commodities can lead to forward prices that are higher the further the forward settlement date is in the future. . LOS 42.d: Describe types of participants in commodity futures markets. . Traders and investors in the commodities market can be classified as informed investors-those who provide liquidity to the markets-and arbitrageurs. Hedger are considered informed investors because they either produce or use the commodity. Hedgers reduce their risk by buying (going long) or selling (going short) futures contracts. A corn farmer can reduce the uncertainty about the price she will receive for her corn by selling corn futures. A cattle producer, however, would hedge his price risk by buying corn futures to reduce his uncertainty about the cost of feed for the cattle. . Speculators take on commodity risk in futures markets and may act as informed investors, seeking to exploit an information or information processing advantage to profit from trading with hedgers. Speculators can also earn profits by providing liquidity to markets: buying futures when short hedgers (commodity producers) are selling and selling futures when long hedgers (commodity users) are buying. - market making, liquidity 제공 . Arbitrageurs in the commodity markets are often those in the business of buying, selling, and storing the physical commodities when the difference between spot and futures prices is too large or too small based on the actual cost of storing the commodity. When the difference is too large, an arbitrageur can buy and store the commodity and sell it at its (too high) futures price. When the difference is too small, an arbitrageur can effectively “not store” the commodity by selling from his own inventory and going long futures, replacing the inventory at the future date. . large difference -&gt; long spot, short futures . small difference -&gt; short spot, long futures . Commodity exchanges operate in many of the world’s financial centers to reflect the worldwide operation and consumption of commodities as well as the globalization of financial markets in general. . Commodity market analysts, considered non-market participants, use market information to perform analytical work for various entities including governments, universities, economic forecasters, and commercial data analysis firms. . Commodity regulators are responsible for the regulation of commodities markets around the world. . LOS 42.e: Analyze the relationship between spot prices and future prices in markets in contango and markets in backwardation. . . The difference between the spot (cash) market price and the futures price for a date in the future in referred to as the basis of the particular contract. The difference between the futures price of a nearer maturity and the futures price of a more-distant maturity is known as the calendar spread. . When futures price are higher at dates further in the future, the futures market (or futures curve) is said to be in contango. In a contango market, the calendar spread and basis are negative. Conversely, if futures prices are lower at dates further in the future, the market is said to be in backwardation, and the basis and calendar spread are positive. . When a future market is in backwardation, long futures positions have a positive return component. Since futures prices converge to spot prices over the term of a future contract, there is a positive returns component from the passage of time. . When a future market is in contango, there is a negative returns component for long futures positions. Convergence of futures prices to spot prices results in a decrease in the value of a long futures position. . LOS 42.f: Compare theories of commodity futures returns. . Insurance theory . 생산자 - 미래가격 확정희망 | 그래서 Futures &lt; spot | Normal backwardation | 실증연구결과 - extra return X, 현실에서 contango 만연 | Hedging pressure hypothesis . Producer and consumer hedging pressure 존재 | Producer pressure up -&gt; backwardation / Consumer pressure up -&gt; contango | 실제, producer pressure &gt; consumer pressure | Producer &amp; Consumer는 speculation도 한다 -&gt; hedging pressure과 backwardation/contango 상관관계 검증이 어려움 | Theory of storage . Backwardation / contango rely on relationship between cost and benefit of storage | Cost &gt; benefit -&gt; Futures &gt; Spot -&gt; Contango / Cost &lt; benefit -&gt; Futures &lt; spot -&gt; Backwardation | Benefit = convenience yield | Storage cost up -&gt; futures price up / convenience yield up -&gt; futures price down | LOS 42.g: Describe, calculate, and interpret the components of total return for a fully collateralized commodity futures contract. . . An investor who desires long exposure to a commodity price will typically achieve this exposure through a derivative investment in forwards or futures. . Collateral return, price return, and roll return . If US Treasury bills are deposited as collateral, the collateral return or collateral yield is simply the holding period yield on the T-bill. . The price return or spot yield on an investment in commodity futures is the change in spot prices. pricereturn⁡=(currentprice⁡−previousprice⁡)/previousprice⁡ operatorname{price return} = ( operatorname{current price} - operatorname{previous price}) / operatorname{previous price}pricereturn=(currentprice−previousprice)/previousprice This process is referred to as rolling over the position and leads to gains or losses which are termed the roll return or roll yield. The roll return can be positive if the futures price curve is in backwardation or negative if the futures price curve is in contango. rollreturn⁡=priceofexpiringfuturescontract⁡−priceofnewfuturescontract⁡priceofexpiringfutuescontract⁡ operatorname{roll return} = frac{ operatorname{price of expiring futures contract} - operatorname{price of new futures contract}}{ operatorname{price of expiring futues contract}}rollreturn=priceofexpiringfutuescontractpriceofexpiringfuturescontract−priceofnewfuturescontract​ Roll return has a relatively small impact on overall returns on commodity futures over the short term but can have a meaningful impact over longer periods. . LOS 42.h: Contrast roll return in markets in contango and markets in backwardation. . LOS 42.i: Describe how commodity swaps are used to obtain or modify exposure to commodities. . . In total return swap the swap buyer (the long) will receive periodic payments based on the change in the futures price of a commodity plus the return on the collateral, in return for a series of fixed payments. . The swap buyer instead may make a single payment at the initiation of the swap and then receive periodic payments based on the total returns, excess returns, or price volatility of a commodity, essentially “buying” exposure to the underlying risk factor. . In an excess return swap, a party may make a single payment at the initiation of the swap and then receive periodic payments of any percentage by which the commodity price exceeds some fixed or benchmark value, times the notional value of the swap. In months in which the commodity price does not exceed the fixed value, no payments are made. . In a basis swap, the variable payments are based on the difference between the prices of two commodities. Often two commodities are one that has liquid traded futures available for hedging and the other (the one the swap buyer actually uses in production) with no liquid futures contracts available. By combining a hedge using the liquid futures with a basis swap, the swap buyer can hedge the price risk he faces from the input that does not have a liquid futures market. . In a commodity volatility swap, the underlying factor is the volatility of the commodity’s price. If the volatility of the commodity’s price is higher than the expected level of volatility specified in the swap, the volatility buyer receives a payment. When actual volatility is lower than the specified level, the volatility seller receives a payment. . LOS 42.j: Describe how the construction of commodity indexes affects index returns. . . To be most useful, an index should be investable. . The available commodity indexes differ in the following dimensions: . Which commodities are included | The weighting of the commodities in the index | The method of rolling contracts over as they near expiration | The method of rebalancing portfolio weights | . While no index methodology will consistently outperform another index methodology, differences in methodology do result in returns differences, at least over shorter periods. Over long periods, differences between the mix and weights of constituent commodities in individual indexes will result in differences between returns, as some commodities outperform others. . Indexes may be equal weighted or weighted on some factor, such as the value of global production of an individual commodity or commodity sector. A production value weighted index will have more exposure to energy than to livestock or softs, for example. . With regard to roll methodology, a passive strategy may be a simply roll the expiring futures contracts into the near-month contract each month. A more active strategy would be to maximize roll return by selecting the further-out contracts with the greatest backwardation or smaller contango. . The frequency of rebalancing will also affect commodity index returns. Rebalancing portfolio weights will decrease return when prices are trending but increase returns when price changes are choppy and mean-reverting. . While differences in index construction methodology will lead to difference among index returns over relative shorter periods, no one methodology is necessarily superior over longer periods. Correlations between returns on different indexes have been relatively high, while correlations between commodity indexes and returns on stocks and bonds have been low. .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/12/CFA-Level-2-Alternative-Investment.html",
            "relUrl": "/markdown/2021/10/12/CFA-Level-2-Alternative-Investment.html",
            "date": " • Oct 12, 2021"
        }
        
    
  
    
        ,"post2": {
            "title": "Probability and Statistics Week 6",
            "content": "import pandas as pd import numpy as np from matplotlib import pyplot as plt . preg = pd.read_csv(&quot;./LectureCode/2002FemPreg.tsv&quot;, sep=&#39; t&#39;) live = preg[preg[&#39;outcome&#39;] == 1] . plt.hist(live[&#39;birthwgt_lb&#39;], rwidth=0.8, label=&#39;birthwgt_lb&#39;, bins=range(int(live[&#39;birthwgt_lb&#39;].min()), int(live[&#39;birthwgt_lb&#39;].max() + 2))) plt.xlabel(&#39;Birth weight (pounds)&#39;) plt.ylabel(&#39;frequency&#39;) plt.show() plt.close() . hist = {key: val for key, val in enumerate(np.bincount(live[&#39;birthwgt_lb&#39;].dropna()))} . hist . {0: 8, 1: 40, 2: 53, 3: 98, 4: 229, 5: 697, 6: 2223, 7: 3049, 8: 1889, 9: 623, 10: 132, 11: 26, 12: 10, 13: 3, 14: 3, 15: 1} . n = sum(hist.values()) pmf = hist.copy() for x, freq in hist.items(): pmf[x] = freq / n . pmf . {0: 0.0008806693086745927, 1: 0.004403346543372964, 2: 0.005834434169969176, 3: 0.01078819903126376, 4: 0.025209158960810215, 5: 0.07672831351827389, 6: 0.24471598414795245, 7: 0.3356450902686041, 8: 0.2079480405107882, 9: 0.06858212241303391, 10: 0.01453104359313078, 11: 0.0028621752531924264, 12: 0.001100836635843241, 13: 0.00033025099075297226, 14: 0.00033025099075297226, 15: 0.00011008366358432408} . plt.bar(pmf.keys(), pmf.values()) plt.xlabel(&#39;value&#39;) plt.ylabel(&#39;pmf&#39;) plt.show() plt.close() . print(sum(pmf.values())) . 1.0 . values = [1, 2, 2, 3, 5] pmf = {key : val/len(values) for key, val in enumerate(np.bincount(values)) if val != 0} . pmf . {1: 0.2, 2: 0.4, 3: 0.2, 5: 0.2} . pmf = {key: val / len(live[&#39;prglngth&#39;].dropna()) for key, val in enumerate(np.bincount(live[&#39;prglngth&#39;].dropna()))} . plt.bar(pmf.keys(), pmf.values()) plt.xlabel(&#39;value&#39;) plt.ylabel(&#39;pmf&#39;) plt.show() plt.close() . plt.step(list(pmf.keys()), list(pmf.values())) plt.xlabel(&#39;value&#39;) plt.ylabel(&#39;pmf&#39;) plt.show() plt.close() . firsts = live[live[&#39;birthord&#39;] == 1] others = live[live[&#39;birthord&#39;] &gt; 1] first_pmf = {key: val / len(firsts[&#39;prglngth&#39;].dropna()) for key, val in enumerate(np.bincount(firsts[&#39;prglngth&#39;].dropna()))} others_pmf = {key: val / len(others[&#39;prglngth&#39;].dropna()) for key, val in enumerate(np.bincount(others[&#39;prglngth&#39;].dropna()))} . plt.bar(first_pmf.keys(), first_pmf.values(), width=0.5, align=&#39;edge&#39;, label=&#39;firsts&#39;) plt.bar(others_pmf.keys(), others_pmf.values(), width=0.5, align=&#39;center&#39;, label=&#39;others&#39;) plt.xlabel(&#39;value&#39;) plt.ylabel(&#39;pmf&#39;) plt.legend() plt.xlim(26, 45) plt.show() plt.close() . plt.step(list(first_pmf.keys()), list(first_pmf.values()), label=&#39;firsts&#39;) plt.step(list(others_pmf.keys()), list(others_pmf.values()), label=&#39;others&#39;) plt.xlabel(&#39;value&#39;) plt.ylabel(&#39;pmf&#39;) plt.xlim(26, 45) plt.legend() plt.show() plt.close() . weeks = range(36, 46) diffs = [] for week in weeks: p1 = first_pmf[week] p2 = others_pmf[week] diff = 100 * (p1 - p2) diffs.append(diff) plt.bar(weeks, diffs) plt.xlabel(&#39;prg length&#39;) plt.ylabel(&#39;diff&#39;) plt.show() plt.close() . live = preg[preg[&#39;outcome&#39;] == 1] firsts = live[live[&#39;birthord&#39;] == 1] others = live[live[&#39;birthord&#39;] &gt; 1] . first_wgt_dropna = firsts[&#39;totalwgt_lb&#39;].dropna() other_wgt_dropna = others[&#39;totalwgt_lb&#39;].dropna() . first_hist, first_bins = np.histogram(first_wgt_dropna, bins=np.arange(0, 16, 0.05)) other_hist, other_bins = np.histogram(other_wgt_dropna, bins=np.arange(0, 16, 0.05)) first_pmf = {key: val / len(first_wgt_dropna) for key, val in zip(first_bins, first_hist)} other_pmf = {key: val / len(other_wgt_dropna) for key, val in zip(other_bins, other_hist)} . plt.step(first_bins[:-1], first_hist, label=&#39;firsts&#39;) plt.step(other_bins[:-1], other_hist, label=&#39;firsts&#39;) plt.xlabel(&#39;value&#39;) plt.ylabel(&#39;hist&#39;) plt.legend() plt.show() plt.close() . plt.step(list(first_pmf.keys()), list(first_pmf.values()), label=&#39;firsts&#39;) plt.step(list(other_pmf.keys()), list(other_pmf.values()), label=&#39;firsts&#39;) plt.xlabel(&#39;value&#39;) plt.ylabel(&#39;hist&#39;) plt.legend() plt.show() plt.close() . def PercentileRank(scores, your_score): count = 0 for score in scores: if score &lt;= your_score: count += 1 percentile_rank = 100 * count / len(scores) return percentile_rank . t = [55, 66, 77, 88, 99] PercentileRank(t, 88) . 80.0 . def Percentile(scores, percentile_rank): for score in sorted(scores): if PercentileRank(scores, score) &gt;= percentile_rank: return score Percentile(t, 45) . 77 . def Percentile2(scores, percentile_rank): scores.sort() index = percentile_rank * (len(scores) - 1) // 100 return scores[index] Percentile2(t, 45) . 66 . def evalCdf(sample, x): count = 0.0 for value in sorted(sample): if value &lt;= x: count += 1 prob = count / len(sample) return prob def getValCdf(sample, cdf_value): for score in sorted(sample): if evalCdf(sample, score) &gt;= cdf_value: return score def evalCdfCdf(cdf, target_val): for val, score in sorted(cdf.items()): if val &gt;= target_val: return score def getValCdfCdf(cdf, cdf_value): for val, score in sorted(cdf.items()): if score &gt;= cdf_value: return val . t = [1, 2, 3, 4, 5] print(evalCdf(t, 3)) . 0.6 . def pmf2cdf(pmf_dict): cdf_dict = {} now = 0.0 for k, v in sorted(pmf_dict.items()): now += v cdf_dict[k] = now return cdf_dict . first_hist, first_bins = np.histogram(first_wgt_dropna, bins=np.arange(0, 16, 0.05)) other_hist, other_bins = np.histogram(other_wgt_dropna, bins=np.arange(0, 16, 0.05)) live_wgt_dropna = live[&#39;totalwgt_lb&#39;].dropna() live_hist, live_bins = np.histogram(live_wgt_dropna, bins=np.arange(0, 16, 0.05)) first_pmf = {key: val / len(first_wgt_dropna) for key, val in zip(first_bins, first_hist)} other_pmf = {key: val / len(other_wgt_dropna) for key, val in zip(other_bins, other_hist)} live_pmf = {key: val / len(live_wgt_dropna) for key, val in zip(live_bins, live_hist)} first_cdf = pmf2cdf(first_pmf) other_cdf = pmf2cdf(other_pmf) live_cdf = pmf2cdf(live_pmf) . plt.step(list(first_cdf.keys()), list(first_cdf.values()), label=&#39;first&#39;) plt.step(list(other_cdf.keys()), list(other_cdf.values()), label=&#39;others&#39;) plt.step(list(live_cdf.keys()), list(live_cdf.values()), label=&#39;live&#39;) plt.xlabel(&#39;brithwgt&#39;) plt.ylabel(&#39;CDF&#39;) plt.legend() plt.show() plt.close() . sample = np.random.choice(live_wgt_dropna, 20, replace=True) sample_hist, sample_bins = np.histogram(sample, bins=np.arange(0, 16, 0.05)) sample_pmf = {key: val for key, val in zip(sample_bins, sample_hist)} sample_cdf = pmf2cdf(sample_pmf) plt.step(list(sample_cdf.keys()), list(sample_cdf.values())) plt.show() plt.close() .",
            "url": "https://sy9777m.github.io/Kevin_Min/jupyter/2021/10/08/probability-and-statistics-week6.html",
            "relUrl": "/jupyter/2021/10/08/probability-and-statistics-week6.html",
            "date": " • Oct 8, 2021"
        }
        
    
  
    
        ,"post3": {
            "title": "Probability and Statistics week 6",
            "content": "Probability and Statistics Week 6 . Continuous Random Variables . . Probability Density Function . . . Density vs Mass . . 연속분포의 평균과 분산 . . . Variance . . Uniform distribution . . . Exponential distribution . . . . The memoryless property of the exponential distribution . . . . Parameter $ lambda$의 의미 . . Poisson process . . . . . . 이항분포와 Poisson distribution . . Binomial distribution . . . 지수분포로부터 Poisson distribution 유도 . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/08/probability-and-statistics-week-6.html",
            "relUrl": "/markdown/2021/10/08/probability-and-statistics-week-6.html",
            "date": " • Oct 8, 2021"
        }
        
    
  
    
        ,"post4": {
            "title": "Probability and inferential statistics week 6",
            "content": "Probability and inferential statistics Week 6 . Notes . . . . . . . . . . . . . probability_and_inferential_statistics_week_6.pdf . . . . . . . . . . Homework . . . . . . . . . . . . . . . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/08/probability-and-inferential-statistics-week-6.html",
            "relUrl": "/markdown/2021/10/08/probability-and-inferential-statistics-week-6.html",
            "date": " • Oct 8, 2021"
        }
        
    
  
    
        ,"post5": {
            "title": "Algorithms week 6",
            "content": "Algorithms Week 6 . Hashing (Randomized algorithms) . direct-address tables, hash tables, hash functions . Data structures . . . . Hashing basics . Hash tables are another sort of data structure that allows fast INSERT/DELETE/SEARCH. . Hash families are the magic behind hash tables. . Universal hash families are even more magic. . Hash tables . $O(1)$ expected time INSERT/DELETE/SEARCH | Worst worst-case performance, but often great in practice. | . . Applications of dictionary . . Direct addressing . . assumptions . no duplications (중복이 없음) | . . . . . . . Terminology . . But we don’t know which ones will show up in advance. . . . . . . Hash tables with open addressing . . . Worst-case analysis . . Solution: Randoness . . . . . A simple deterministic hash function . . mod: 나머지 연산 . n은 소수 . . . . A universal hash family . . Summary . . Tree algorithms . Tree basics, Binary search tree, red-black tree . Some data structure for storing objects . . . . . . . Motivation for binary search tree . . Recall the data structure . . . connected: 어떤 node에서 출발해도 그 어떤 node에 도달 할 수 있다. . acyclic: 자기 자신으로 돌아오는 cycle이 없다. . . forest: tree의 집합 . . Binary tree terminology . child를 최대 2개까지 가질 수 있음 . . . Binary search tree . . node 선택 -&gt; node의 key 값에 따라 좌우 분류 -&gt; 분류된 집합에서 node 선택 -&gt; 좌우에 붙이고 반복 (recursion) . . 이 binary search tree는 unique하지는 않다. . . . Search in a binary search tree . . Insert in a binary search tree . . x.key == key의 경우엔 binary search tree내의 값들이 다 unique하다고 가정했기 때문에 그냥 넘어가는데, 구현의 문제로 남겨짐. . Delete in a binary search tree . . 이 case에서는 그냥 2를 없애고 2의 자리에 1을 붙여주면 되지만… . case 1 . if 3 is a leaf -&gt; just delete it . case 2 . if 3 has just one child . . case 3 . if 3 has two children, replace 3 with it’s immediate successor, aka next smallest thing after 3 . 3의 right child 중에서 가장 left에 있는 descendant를 불러와서 3의 자리에 옮김 . . Does this maintain the BST property? yes | How do we find the immediate successor? SEARCH for 3 in the subtree under 3.right | How do we remove it when we find it? if 3.1 has 0 or 1 children, do one of the previous cases. | What if [3.1] has two children? It doesn’t. 3.right의 subtree 중에 가장 좌측에 있는 node이기 때문에 자신보다 작은 left child가 존재할 수 없음. 즉, 2개의 children을 가질 가능성이 없음 | . . . . . How long do these operations take? . . . . . Homework . P2 (5점): K번째로 많은 원소 찾기 . 개요 및 요구사항 . 주어진 길이 n의 정수 배열에서, K번째로 많이 등장한 원소를 반환하는 알고리즘을 작성하세요. | . 입출력예 . (입력1) 10 5 1 1 2 2 3 3 4 4 4 5 . (출력1) 5 . 4 - 3개 1 - 2개 2 - 2개 3 - 2개 5 - 1개 5번째로 많은 수 == 5 . (입력2) 10 2 1 1 2 2 3 3 4 4 4 5 . (출력2) 1 . 4 - 3개 1 - 2개 2 - 2개 3 - 2개 5 - 1개 2번째로 많은 수 == 1 or 2 or 3 . 첫째줄에, 배열의 길이 len이 입력됩니다. | 둘째줄에, K가 입력됩니다. | 셋째줄에, 배열의 원소들이 입력됩니다. | 제공한 sample1.txt 파일과, main.cpp 파일을 참고하세요. | . 상세조건 . 0 &lt; len &lt;= 10,000 | 0 &lt; K &lt;= the number of unique elements in arr | 0 &lt; each element &lt;= 10,000 | 정답이 다수인 경우, 그 중 하나만 출력해도 정답으로 인정 (위 입력2의 경우 1,2,3 모두 정답으로 인정함) | 자동화된 채점 시스템을 활용할 계획이므로 제공한 템플릿을 활용하되, 기본 제공한 함수 프로토타입 등은 변경하지 말 것. | 구현은 모두 solution.cpp 파일에 하고, 제출도 solution.cpp 파일만 제출. | (main.cpp/ solution.h 파일은 테스트 용으로만 활용) | 시간제한: 3sec @ 3.0Ghz single core | 공간제한: 없음 | 체점환경은 c++17 문법을 사용함. | . 제출 . 소스코드 (solution.cpp) 와 보고서 (학번.txt)를 압축 (학번.zip)하여 제출 | main.cpp, soultion.h, sample1.txt 등 기타 파일들은 포함하지 말 것. | . 배점 . 4.5점 Correctness &amp; Efficiency 총 9개의 테스트 케이스에서 항상 정답을 찾아내는지 여부와 시간 제한을 만족하는지 여부를 검증. | 각 테스트케이스를 여러번 실행하여 항상 일관된 정답을 출력하는지 여부를 검증하고, 실행 시간은 평균값을 취하여 검증함. | 주의 C/C++ 에서 기본제공하는 sorting/selection 라이브러리 사용시 40% 감점 (e.g., nth_element(), sort() 등) | . | 0.5점 보고서 위 문제 해결을 위한 본인의 알고리즘 설계 방법 제시 (소스코드 설명하지 않아도 됨). | 본인이 설계한 알고리즘의 correctness &amp; efficiency 의견 제시. | . | . Solution . #include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &quot;p2_solution.h&quot; void merge(std::vector&lt;int&gt; &amp;arr, int l, int m, int r) { int i, j, k; int n1 = m - l + 1; int n2 = r - m; std::vector&lt;int&gt; L(n1, 0), R(n2, 0); i = 0; for (i; i &lt; n1; ++i) L[i] = arr[l + i]; j = 0; for (j; j &lt; n2; ++j) R[j] = arr[m + 1 + j]; i = 0; j = 0; k = 1; while (i &lt; n1 &amp;&amp; j &lt; n2) { if (L[i] &lt;= R[j]) { arr[k] = L[i]; ++i; } else { arr[k] = R[j]; ++j; } ++k; } while (i &lt; n1) { arr[k] = L[i]; ++i; ++k; } while (j &lt; n2) { arr[k] = R[i]; ++i; ++k; } } void mergeSort(std::vector&lt;int&gt; &amp;arr, int l, int r) { if (l &lt; r) { int m = (l + r) / 2; mergeSort(arr, l, m); mergeSort(arr, m + 1, r); merge(arr, l, m, r); } } int Solution::kMost(std::vector&lt;int&gt; &amp;arr, int len, int k) { int i; std::vector&lt;int&gt; count_arr(len, 0); i = 0; for (i; i &lt; len; ++i) { int n = arr[i]; count_arr[n] += 1; } std::vector&lt;int&gt; rank_arr(k, 0); std::vector&lt;int&gt; index_arr(k, 0); i = 1; for (i; i &lt; len; ++i) { int res = count_arr[i]; if (res &gt; 0) { int j = 0; for (j; j &lt; k; ++j) { if (rank_arr[j] &lt;= res) { int n = k - 1; for (n; n &gt; j; --n) { rank_arr[n] = rank_arr[n - 1]; index_arr[n] = index_arr[n - 1]; } rank_arr[j] = res; index_arr[j] = i; break; } } } } return index_arr[k - 1]; } .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/08/algorithms-week-6.html",
            "relUrl": "/markdown/2021/10/08/algorithms-week-6.html",
            "date": " • Oct 8, 2021"
        }
        
    
  
    
        ,"post6": {
            "title": "Digital System Circuits week 6",
            "content": "Digital System Circuits Week 6 . . . . . Completeness of NAND . . Number of possible boolean functions . . Decoders . . . Multiplexor (Mux) . . . . Decoder: Code -&gt; Signal / Encoder: Signal -&gt; Code . Mux . . Demux . . Mux / Demux는 회선의 방향을 결정할 뿐, 0과 1의 결정에는 관여하지 않는다. 어디로 출력이 나갈지, 어디로 입력을 받을지 결정하는 것. . Muxes commonly together - N-bit Mux . . . . Critical delay and critical path . . Active low inputs . . Schematic capture and simulation . . Introduction to optimization of digital logic design . How can we build better circuits? . Delay - the time from input changing to new correct stable output | Size - the number of transistors | . . . transistor 갯수는 입력 당 2개 생각하면 됨 . Tradeoff . Improves some, but worsens other, criteria of interest . . Optimization은 해야 하는 것, Tradeoff는 선택의 문제 . Optimization and Trade off . Optimizations . All criteria of interest are improved (or at least kept the same) | . Tradeoff . Some criteria of interest are improved, while others are worsened. | . We obviously prefer optimizations, but often must accept tradeoffs. . You can’t build a car that is the most comfortable and has the best fuel efficiency, and is the fastest - you have to give up something to gain other things. | . Combinational logic optimization and tradeoffs . . . 보통 sum-of-products로 주어지는 회로는 two-level size라서 delay는 일정해서 transistor를 줄이는 방향으로 optimization을 한다. . Algebraic two-level size optimization . . Karnaugh maps for two-level size optimization . Karnaugh maps (K-maps) . . K-map에서 인접한 11은 줄일 수 있다는 의미 . Digital design process . . What is an HDL? . . It looks like a programming language but not a programming language. . It is always critical to recall you are describing hardware. | This code’s primary purpose is to generate hardware. | The hardware this code describes (a counter) can be simulated on a computer. In this secondary use of the language it does act more like a programming language. | . Simulating / Validating HDL . . What is synthesis? . Takes a description of what a circuit does | Creates the hardware to do it | . . Synthesizing the hardware described . All hardware created during synthesis Even if a is true, still computing d&amp;c | . | learn to understand how descriptions are translated to hardware | . . Why use an HDL? . Enables larger designs via rich syntax, modularity . more abstract than schematics, allows larger designs register transfer level description | wide datapaths (16, 32, or 64 bits wide) can be abstracted to a single vecotr | synthesis tool does the bulk of the tedious repetitive work vs schematic capture | . | . Portable design . Behavioral or dataflow Verilog can be synthesized to a new process library with little effort | . . . Homework . Week 5 . . . . . . . . Week 6 . . . . . . . . . . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/07/digital-system-circuits-week-6.html",
            "relUrl": "/markdown/2021/10/07/digital-system-circuits-week-6.html",
            "date": " • Oct 7, 2021"
        }
        
    
  
    
        ,"post7": {
            "title": "Tiny Python Project chapter 9 ~ 10",
            "content": "Tiny Python Project Chapter 9 ~ 10 . Chapter 9. 저주의 전화: 단어목록에서 무작위 험담 만들기 . . . . #!/usr/bin/env python3 &quot;&quot;&quot; Author : runner &lt;runner@9c4e508fd6f6&gt; Date : 2021-10-06 Purpose: Rock the Casbah &quot;&quot;&quot; import argparse # -- def get_args(): &quot;&quot;&quot;Get command-line arguments&quot;&quot;&quot; parser = argparse.ArgumentParser( description=&#39;Heap abuse&#39;, formatter_class=argparse.ArgumentDefaultsHelpFormatter) parser.add_argument(&#39;-a&#39;, &#39;--adjectives&#39;, help=&#39;Number of adjectives&#39;, metavar=&#39;adjectives&#39;, type=int, default=2) parser.add_argument(&#39;-n&#39;, &#39;--number&#39;, help=&#39;Number of insults&#39;, metavar=&#39;insults&#39;, type=int, default=3) parser.add_argument(&#39;-s&#39;, &#39;--seed&#39;, help=&#39;Random seed&#39;, metavar=&#39;seed&#39;, type=int, default=None) return parser.parse_args() # -- def main(): &quot;&quot;&quot;Make a jazz noise here&quot;&quot;&quot; args = get_args() # -- if __name__ == &#39;__main__&#39;: main() . . . . . #!/usr/bin/env python3 &quot;&quot;&quot; Author : runner &lt;runner@9c4e508fd6f6&gt; Date : 2021-10-06 Purpose: Rock the Casbah &quot;&quot;&quot; import argparse import random # -- def get_args(): &quot;&quot;&quot;Get command-line arguments&quot;&quot;&quot; parser = argparse.ArgumentParser( description=&#39;Heap abuse&#39;, formatter_class=argparse.ArgumentDefaultsHelpFormatter) parser.add_argument(&#39;-a&#39;, &#39;--adjectives&#39;, help=&#39;Number of adjectives&#39;, metavar=&#39;adjectives&#39;, type=int, default=2) parser.add_argument(&#39;-n&#39;, &#39;--number&#39;, help=&#39;Number of insults&#39;, metavar=&#39;insults&#39;, type=int, default=3) parser.add_argument(&#39;-s&#39;, &#39;--seed&#39;, help=&#39;Random seed&#39;, metavar=&#39;seed&#39;, type=int, default=None) args = parser.parse_args() if args.adjectives &lt; 1: parser.error(f&#39;--adjectives &quot;{args.adjectives}&quot; must be &gt; 0&#39;) if args.insults &lt; 1: parser.error(f&#39;--number &quot;{args.insults}&quot; must be &gt; 0&#39;) return args # -- def main(): &quot;&quot;&quot;Make a jazz noise here&quot;&quot;&quot; args = get_args() # -- if __name__ == &#39;__main__&#39;: main() . . #!/usr/bin/env python3 &quot;&quot;&quot; Author : runner &lt;runner@9c4e508fd6f6&gt; Date : 2021-10-06 Purpose: Rock the Casbah &quot;&quot;&quot; import argparse import random # -- def get_args(): &quot;&quot;&quot;Get command-line arguments&quot;&quot;&quot; parser = argparse.ArgumentParser( description=&#39;Heap abuse&#39;, formatter_class=argparse.ArgumentDefaultsHelpFormatter) parser.add_argument(&#39;-a&#39;, &#39;--adjectives&#39;, help=&#39;Number of adjectives&#39;, metavar=&#39;adjectives&#39;, type=int, default=2) parser.add_argument(&#39;-n&#39;, &#39;--number&#39;, help=&#39;Number of insults&#39;, metavar=&#39;insults&#39;, type=int, default=3) parser.add_argument(&#39;-s&#39;, &#39;--seed&#39;, help=&#39;Random seed&#39;, metavar=&#39;seed&#39;, type=int, default=None) args = parser.parse_args() if args.adjectives &lt; 1: parser.error(f&#39;--adjectives &quot;{args.adjectives}&quot; must be &gt; 0&#39;) elif args.number &lt; 1: parser.error(f&#39;--number &quot;{args.number}&quot; must be &gt; 0&#39;) return args # -- def main(): &quot;&quot;&quot;Make a jazz noise here&quot;&quot;&quot; args = get_args() random.seed(args.seed) adjectives = &#39;bankrupt base caterwauling corrupt cullionly detestable dishonest false filthsome filthy foolish foul gross heedless indistinguishable infected insatiate irksome lascivious lecherous loathsome lubbery old peevish rascaly rotten ruinous scurilous scurvy slanderous sodden-witted thin-faced toad-spotted unmannered vile wall-eyed&#39;.split() nouns = &#39;Judas Satan ape ass barbermonger beggar block boy braggart butt carbuncle coward coxcomb cur dandy degenerate fiend fishmonger fool gull harpy jack jolthead knave liar lunatic maw milksop minion ratcatcher recreant rogue scold slave swine traitor varlet villain worm&#39;.split() num_adjs = args.adjectives repeat_num = args.number for i in range(repeat_num): selected_adjs = random.sample(adjectives, num_adjs) selected_noun = random.choice(nouns) print(&#39;You &#39; + &#39;, &#39;.join(selected_adjs) + &#39; {}!&#39;.format(selected_noun)) # -- if __name__ == &#39;__main__&#39;: main() . . . . . . . . . . . . Chapter 10. 전화: 무작위로 문자열 변경하기 . . . . . . . . . . #!/usr/bin/env python3 &quot;&quot;&quot; Author : runner &lt;runner@d7a07f2f85b2&gt; Date : 2021-10-06 Purpose: Rock the Casbah &quot;&quot;&quot; import string import argparse import random import os # -- def get_args(): &quot;&quot;&quot;Get command-line arguments&quot;&quot;&quot; parser = argparse.ArgumentParser( description=&#39;Telephone&#39;, formatter_class=argparse.ArgumentDefaultsHelpFormatter) parser.add_argument(&#39;text&#39;, metavar=&#39;str&#39;, type=str, help=&#39;Input text or file&#39;) parser.add_argument(&#39;-s&#39;, &#39;--seed&#39;, help=&#39;Random seed&#39;, metavar=&#39;seed&#39;, type=int, default=None) parser.add_argument(&#39;-m&#39;, &#39;--mutations&#39;, help=&#39;Percent mutations&#39;, metavar=&#39;mutations&#39;, type=float, default=0.1) args = parser.parse_args() if not (0 &lt;= args.mutations &lt;= 1 ): parser.error(f&#39;--mutations &quot;{args.mutations}&quot; must be between 0 and 1&#39;) if os.path.isfile(args.text): args.text = open(args.text).read().rstrip() return args # -- def main(): &quot;&quot;&quot;Make a jazz noise here&quot;&quot;&quot; args = get_args() random.seed(args.seed) t = args.text alpha = &#39;&#39;.join(sorted(string.ascii_letters + string.punctuation)) t_len = len(t) num_mutations = round(t_len * args.mutations) new_text = t for i in random.sample(range(t_len), num_mutations): new_text = new_text[:i] + random.choice(alpha.replace(new_text[i], &#39;&#39;)) + new_text[i + 1:] print(f&#39;You said: &quot;{t}&quot; nI heard : &quot;{new_text}&quot;&#39;) # -- if __name__ == &#39;__main__&#39;: main() . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/06/tiny-python-project-chapter-9~10.html",
            "relUrl": "/markdown/2021/10/06/tiny-python-project-chapter-9~10.html",
            "date": " • Oct 6, 2021"
        }
        
    
  
    
        ,"post8": {
            "title": "System Programming week 6",
            "content": "System Programming Week 6 . Backward comparability . 새로운 기술을 개발할 때 이전 기술과도 잘 동작하도록 설계하는 특성 . CISC architecture . Complex . ISA . Instruction set of Architecture . Information flowing through CPU and memory . Address, Data, Instruction . Condition code - Status를 표시해주는 코드 . Mechanisms in procedures . Passing control . to beginning of procedure code | back to return point | . Passing data . Procedure arguments | return value | . Memory management . Allocate during procedure execution | deallocate upon return | . Mechanisms all implemented with machine instructions . x86-64 implementation of a procedure uses only those mechanisms required. . . x86-64 Stack . Region of memory managed with stack discipline . Grows toward lower addresses . Register %rsp contains lowest stack address . address of top element | . . stack pointer는 stack의 끝을 나타내는 pointer . stack은 위에서부터 아래로 쌓이고, heap은 아래에서부터 위로 쌓는다 . . . . . Procedure control flow . Use stack to support procedure call and return . Procedure call: call label . Push return address on stack | Jump to label | . Return address: . Address of the next instruction right after call | . Procedure return: ret . pop address from stack | jump to address | . . . . . . Procedure data flow . . . Stack-based languages . . . Call chain example . . Stack Frame . Content . Return information | Local storage (if needed) | Temporary space (if needed) | . . Management . Space allocated when enter procedure set-up code | includes push by call instruction | . | Deallocated when return Finish code | Includes pop by ret instruction | . | . . 일단 main에서 시작, yoo 호출 . . . . . . . . . . . x86-64 / Linux Stack Frame . . Current Stack Frame (Top to Bottom) . Argument build - Parameters for function about to call | Local variables if can’t keep in registers | Saved register context | Old frame pointer (optional) | . Caller Stack Frame . Return address pushed by call instruction | . | Arguments for this call | . . . . . . . Register Saving Conventions . . CPU내의 register들은 일종의 공유하는 책상 느낌. 내가 쓰다가 남이 쓰면 데이터가 날아갈 수 있는데, 이 데이터를 다른데 보관해둬야 함. 그런데 매번 책상의 모든 데이터를 다 옮기는 것은 불편하니까, 레지스터의 일부는 저장용도로 남겨두는 것. . . 경우에 따라 달라서 뭐가 더 좋은지에 대한 구분이 힘듦 . . . . . Recursive function . . . . . . . Observations about recursion . . x86-64 Procedure summary . . Array Allocation . . . . . movl (base, index, scale), Dest . . Multidimensional (Nested) Arrays . . . Nested Array Row Access . . . Nested Array Element Access . . . Multi-level array example . . . . N * M Matrix Code . . Structure Representation . . . Structures &amp; Alignment . . Alignment principles . . . Satisfying alignment with structures . . Meeting overall alignment requirement . . Array of structures . . Accessing array elements . . Saving space . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/06/system-programming-week-6.html",
            "relUrl": "/markdown/2021/10/06/system-programming-week-6.html",
            "date": " • Oct 6, 2021"
        }
        
    
  
    
        ,"post9": {
            "title": "Kaggle Intro to Deep Learning",
            "content": "kaggle Intro to Deep Learning . A Single Neuron . Using Keras and Tensorflow you’ll learn how to: . create a fully-connected neural network architecture | apply neural nets to two classic ML problems: regression and classification | train neural nets with stochastic gradient descent, and | improve performance with dropout, batch normalization, and other techniques | . What is Deep Learning? . Deep learning is an approach to machine learning characterized by deep stacks of computations. This depth of computation is what has enabled deep learning models to disentangle the kinds of complex and hierarchical patterns found in the most challenging real-world datasets. . Through their power and scalability neural networks have become the defining model of deep learning. Neural networks are composed of neurons, where each neuron individually performs only a simple computation. The power of a neural network comes instead from the complexity of the connections these neurons can form. . The linear unit . As a diagram, a neuron (or unit) with one input looks like: . . The input is x. Its connection to the neuron has a weight which is w. Whenever a value flows through a connection, you multiply the value by the connection’s weight. For the input x, what reaches the neuron is w * x. A neural network “learns” by modifying its weights. . The b is a special kind of weight we call the bias. The bias doesn’t have any input data associated with it; instead, we put a 1 in the diagram so that the value that reaches the neuron is just b (since 1 * b = b). The bias enables the neuron to modify the output independently of its inputs. . The y is the value the neuron ultimately outputs. To get the output, the neuron sums up all the values it receives through its connections. This neuron’s activation is y = w * x + b, or as a formula $y=wx+b$. . Though individual neurons will usually only function as part of a larger network, it’s often useful to start with a single neuron model as a baseline. Single neuron models are linear models. . . Multiple inputs . We can just add more input connections to the neuron, one for each additional feature. To find the output, we would multiply each input to its connection weight and then add them all together. . . The formula for this neuron would be $y=w_{0}x_{0}+w_{1}x_{1}+w_{2}x_{2}+b$. A linear unit with two inputs will fit a plane, and a unit with more inputs than that will fit a hyperplane. . Linear units in Keras . The easiest way to create a model in Keras is through keras.Sequential, which creates a neural network as a stack of layers. We can create models like those above using a dense layer (which we’ll learn more about in the next lesson). . We could define a linear model accepting three input features (&#39;sugars&#39;, &#39;fiber&#39;, and &#39;protein&#39;) and producing a single output (&#39;calories&#39;) like so: . . With the first argument, units, we define how many outputs we want. In this case we are just predicting &#39;calories&#39;, so we’ll use units=1. . With the second argument, input_shape, we tell Keras the dimensions of the inputs. Setting input_shape=[3] ensures the model will accept three features as input (&#39;sugars&#39;, &#39;fiber&#39;, and &#39;protein&#39;). . Why is input_shape a Python list? The data we’ll use in this course will be tabular data, like in a Pandas dataframe. We’ll have one input for each feature in the dataset. The features are arranged by column, so we’ll always have input_shape=[num_columns]. The reason Keras uses a list here is to permit use of more complex datasets. Image data, for instance, might need three dimensions: [height, width, channels]. . Deep Neural Networks . In this lesson we’re going to see how we can build neural networks capable of learning the complex kinds of relationships deep neural nets are famous for. . The key idea here is modularity, building up a complex network from simpler functional units. We’ve seen how a linear unit computes a linear function – now we’ll see how to combine and modify these single units to model more complex relationships. . Layers . Neural networks typically organize their neurons into layers. When we collect together linear units having a common set of inputs we get a dense layer. . . You could think of each layer in a neural network as performing some kind of relatively simple transformation. Through a deep stack of layers, a neural network can transform its inputs in more and more complex ways. In a well-trained neural network, each layer is a transformation getting us a little bit closer to a solution. . Many Kinds of Layers A “layer” in Keras is a very general kind of thing. A layer can be, essentially, any kind of data transformation. Many layers, like the convolutional and recurrent layers, transform data through use of neurons and differ primarily in the pattern of connections they form. Others though are used for feature engineering or just simple arithmetic. There’s a whole world of layers to discover – check them out! . The activation function . It turns out, however, that two dense layers with nothing in between are no better than a single dense layer by itself. Dense layers by themselves can never move us out of the world of lines and planes. What we need is something nonlinear. What we need are activation functions. . Without activation functions, neural networks can only learn linear relationships. In order to fit curves, we’ll need to use activation functions. . An activation function is simply some function we apply to each of a layer’s outputs (its activations). The most common is the rectifier function max(0,x)max(0,x). . . The rectifier function has a graph that’s a line with the negative part “rectified” to zero. Applying the function to the outputs of a neuron will put a bend in the data, moving us away from simple lines. . When we attach the rectifier to a linear unit, we get a rectified linear unit or ReLU. (For this reason, it’s common to call the rectifier function the “ReLU function”.) Applying a ReLU activation to a linear unit means the output becomes max(0, w * x + b), which we might draw in a diagram like: . . Stacking dense layers . Now that we have some nonlinearity, let’s see how we can stack layers to get complex data transformations. . . The layers before the output layer are sometimes called hidden since we never see their outputs directly. . Now, notice that the final (output) layer is a linear unit (meaning, no activation function). That makes this network appropriate to a regression task, where we are trying to predict some arbitrary numeric value. Other tasks (like classification) might require an activation function on the output. . Building sequential models . . Be sure to pass all the layers together in a list, like [layer, layer, layer, ...], instead of as separate arguments. To add an activation function to a layer, just give its name in the activation argument. . Stochastic Gradient Descent . As with all machine learning tasks, we begin with a set of training data. Each example in the training data consists of some features (the inputs) together with an expected target (the output). Training the network means adjusting its weights in such a way that it can transform the features into the target. In the 80 Cereals dataset, for instance, we want a network that can take each cereal’s &#39;sugar&#39;, &#39;fiber&#39;, and &#39;protein&#39; content and produce a prediction for that cereal’s &#39;calories&#39;. If we can successfully train a network to do that, its weights must represent in some way the relationship between those features and that target as expressed in the training data. . In addition to the training data, we need two more things: . A “loss function” that measures how good the network’s predictions are. | An “optimizer” that can tell the network how to change its weights. | . The loss function . We’ve seen how to design an architecture for a network, but we haven’t seen how to tell a network what problem to solve. This is the job of the loss function. . The loss function measures the disparity between the the target’s true value and the value the model predicts. . Different problems call for different loss functions. We have been looking at regression problems, where the task is to predict some numerical value – calories in 80 Cereals, rating in Red Wine Quality. Other regression tasks might be predicting the price of a house or the fuel efficiency of a car. . A common loss function for regression problems is the mean absolute error or MAE. For each prediction y_pred, MAE measures the disparity from the true target y_true by an absolute difference abs(y_true - y_pred). . The total MAE loss on a dataset is the mean of all these absolute differences. . . Besides MAE, other loss functions you might see for regression problems are the mean-squared error (MSE) or the Huber loss (both available in Keras). . During training, the model will use the loss function as a guide for finding the correct values of its weights (lower loss is better). In other words, the loss function tells the network its objective. . The optimizer - Stochastic gradient descent . We’ve described the problem we want the network to solve, but now we need to say how to solve it. This is the job of the optimizer. The optimizer is an algorithm that adjusts the weights to minimize the loss. . Virtually all of the optimization algorithms used in deep learning belong to a family called stochastic gradient descent. They are iterative algorithms that train a network in steps. One step of training goes like this: . Sample some training data and run it through the network to make predictions. | Measure the loss between the predictions and the true values. | Finally, adjust the weights in a direction that makes the loss smaller. | Then just do this over and over until the loss is as small as you like (or until it won’t decrease any further.) . . Each iteration’s sample of training data is called a minibatch (or often just “batch”), while a complete round of the training data is called an epoch. The number of epochs you train for is how many times the network will see each training example. . Learning rate and batch size . Notice that the line only makes a small shift in the direction of each batch (instead of moving all the way). The size of these shifts is determined by the learning rate. A smaller learning rate means the network needs to see more minibatches before its weights converge to their best values. . The learning rate and the size of the minibatches are the two parameters that have the largest effect on how the SGD training proceeds. Their interaction is often subtle and the right choice for these parameters isn’t always obvious. . Fortunately, for most work it won’t be necessary to do an extensive hyperparameter search to get satisfactory results. Adam is an SGD algorithm that has an adaptive learning rate that makes it suitable for most problems without any parameter tuning (it is “self tuning”, in a sense). Adam is a great general-purpose optimizer. . Adding the loss and optimizer . After defining a model, you can add a loss function and optimizer with the model’s compile method: . model.compile( optimizer=&quot;adam&quot;, loss=&quot;mae&quot;, ) . Notice that we are able to specify the loss and optimizer with just a string. You can also access these directly through the Keras API – if you wanted to tune parameters, for instance – but for us, the defaults will work fine. . What’s In a Name? The gradient is a vector that tells us in what direction the weights need to go. More precisely, it tells us how to change the weights to make the loss change fastest. We call our process gradient descent because it uses the gradient to descend the loss curve towards a minimum. Stochastic means “determined by chance.” Our training is stochastic because the minibatches are random samples from the dataset. And that’s why it’s called SGD! . One thing you might note for now though is that we’ve rescaled each feature to lie in the interval [0,1][0,1]. As we’ll discuss more in Lesson 5, neural networks tend to perform best when their inputs are on a common scale. . . . Exercise . . . Overfitting and Underfitting . In this lesson, we’re going to learn how to interpret these learning curves and how we can use them to guide model development. In particular, we’ll examine at the learning curves for evidence of underfitting and overfitting and look at a couple of strategies for correcting it. . Interpreting the learning curves . You might think about the information in the training data as being of two kinds: signal and noise. The signal is the part that generalizes, the part that can help our model make predictions from new data. The noise is that part that is only true of the training data; the noise is all of the random fluctuation that comes from data in the real-world or all of the incidental, non-informative patterns that can’t actually help the model make predictions. The noise is the part might look useful but really isn’t. . We train a model by choosing weights or parameters that minimize the loss on a training set. You might know, however, that to accurately assess a model’s performance, we need to evaluate it on a new set of data, the validation data. . When we train a model we’ve been plotting the loss on the training set epoch by epoch. To this we’ll add a plot the validation data too. These plots we call the learning curves. To train deep learning models effectively, we need to be able to interpret them. . . Now, the training loss will go down either when the model learns signal or when it learns noise. But the validation loss will go down only when the model learns signal. (Whatever noise the model learned from the training set won’t generalize to new data.) So, when a model learns signal both curves go down, but when it learns noise a gap is created in the curves. The size of the gap tells you how much noise the model has learned. . Ideally, we would create models that learn all of the signal and none of the noise. This will practically never happen. Instead we make a trade. We can get the model to learn more signal at the cost of learning more noise. So long as the trade is in our favor, the validation loss will continue to decrease. After a certain point, however, the trade can turn against us, the cost exceeds the benefit, and the validation loss begins to rise. . . This trade-off indicates that there can be two problems that occur when training a model: not enough signal or too much noise. Underfitting the training set is when the loss is not as low as it could be because the model hasn’t learned enough signal. Overfitting the training set is when the loss is not as low as it could be because the model learned too much noise. The trick to training deep learning models is finding the best balance between the two. . Capacity . A model’s capacity refers to the size and complexity of the patterns it is able to learn. For neural networks, this will largely be determined by how many neurons it has and how they are connected together. If it appears that your network is underfitting the data, you should try increasing its capacity. . You can increase the capacity of a network either by making it wider (more units to existing layers) or by making it deeper (adding more layers). Wider networks have an easier time learning more linear relationships, while deeper networks prefer more nonlinear ones. . Early stopping . We mentioned that when a model is too eagerly learning noise, the validation loss may start to increase during training. To prevent this, we can simply stop the training whenever it seems the validation loss isn’t decreasing anymore. Interrupting the training this way is called early stopping. . . Once we detect that the validation loss is starting to rise again, we can reset the weights back to where the minimum occured. This ensures that the model won’t continue to learn noise and overfit the data. . Training with early stopping also means we’re in less danger of stopping the training too early, before the network has finished learning signal. So besides preventing overfitting from training too long, early stopping can also prevent underfitting from not training long enough. Just set your training epochs to some large number (more than you’ll need), and early stopping will take care of the rest. . Adding early stopping . In Keras, we include early stopping in our training through a callback. A callback is just a function you want run every so often while the network trains. The early stopping callback will run after every epoch. (Keras has a variety of useful callbacks pre-defined, but you can define your own, too.) . . . Dropout and Batch Normalization . There’s more to the world of deep learning than just dense layers. There are dozens of kinds of layers you might add to a model. (Try browsing through the Keras docs for a sample!) Some are like dense layers and define connections between neurons, and others can do preprocessing or transformations of other sorts. . In this lesson, we’ll learn about a two kinds of special layers, not containing any neurons themselves, but that add some functionality that can sometimes benefit a model in various ways. Both are commonly used in modern architectures. . Dropout . The first of these is the “dropout layer”, which can help correct overfitting. . In the last lesson we talked about how overfitting is caused by the network learning spurious patterns in the training data. To recognize these spurious patterns a network will often rely on very a specific combinations of weight, a kind of “conspiracy” of weights. Being so specific, they tend to be fragile: remove one and the conspiracy falls apart. . This is the idea behind dropout. To break up these conspiracies, we randomly drop out some fraction of a layer’s input units every step of training, making it much harder for the network to learn those spurious patterns in the training data. Instead, it has to search for broad, general patterns, whose weight patterns tend to be more robust. . . You could also think about dropout as creating a kind of ensemble of networks. The predictions will no longer be made by one big network, but instead by a committee of smaller networks. Individuals in the committee tend to make different kinds of mistakes, but be right at the same time, making the committee as a whole better than any individual. (If you’re familiar with random forests as an ensemble of decision trees, it’s the same idea.) . keras.Sequential([ # ... layers.Dropout(rate=0.3), # apply 30% dropout to the next layer layers.Dense(16), # ... ]) . Batch normalization . The next special layer we’ll look at performs “batch normalization” (or “batchnorm”), which can help correct training that is slow or unstable. . With neural networks, it’s generally a good idea to put all of your data on a common scale, perhaps with something like scikit-learn’s StandardScaler or MinMaxScaler. The reason is that SGD will shift the network weights in proportion to how large an activation the data produces. Features that tend to produce activations of very different sizes can make for unstable training behavior. . Now, if it’s good to normalize the data before it goes into the network, maybe also normalizing inside the network would be better! In fact, we have a special kind of layer that can do this, the batch normalization layer. A batch normalization layer looks at each batch as it comes in, first normalizing the batch with its own mean and standard deviation, and then also putting the data on a new scale with two trainable rescaling parameters. Batchnorm, in effect, performs a kind of coordinated rescaling of its inputs. . Most often, batchnorm is added as an aid to the optimization process (though it can sometimes also help prediction performance). Models with batchnorm tend to need fewer epochs to complete training. Moreover, batchnorm can also fix various problems that can cause the training to get “stuck”. Consider adding batch normalization to your models, especially if you’re having trouble during training. . layers.Dense(16), layers.BatchNormalization(), layers.Activation(&#39;relu&#39;), . And if you add it as the first layer of your network it can act as a kind of adaptive preprocessor, standing in for something like Sci-Kit Learn’s StandardScaler. . Binary Classification . Now we’re going to apply neural networks to another common machine learning problem: classification. . Binary classification . Classification into one of two classes is a common machine learning problem. These are all binary classification problems. . Before using this data we’ll assign a class label: one class will be 0 and the other will be 1. Assigning numeric labels puts the data in a form a neural network can use. . Accuracy and cross-entropy . Accuracy is one of the many metrics in use for measuring success on a classification problem. Accuracy is the ratio of correct predictions to total predictions: accuracy = number_correct / total. . The problem with accuracy (and most other classification metrics) is that it can’t be used as a loss function. SGD needs a loss function that changes smoothly, but accuracy, being a ratio of counts, changes in “jumps”. So, we have to choose a substitute to act as the loss function. This substitute is the cross-entropy function. . Now, recall that the loss function defines the objective of the network during training. With regression, our goal was to minimize the distance between the expected outcome and the predicted outcome. We chose MAE to measure this distance. . For classification, what we want instead is a distance between probabilities, and this is what cross-entropy provides. Cross-entropy is a sort of measure for the distance from one probability distribution to another. . . The technical reasons we use cross-entropy are a bit subtle, but the main thing to take away from this section is just this: use cross-entropy for a classification loss; other metrics you might care about (like accuracy) will tend to improve along with it. . Making probabilities with the Sigmoid function . The cross-entropy and accuracy functions both require probabilities as inputs, meaning, numbers from 0 to 1. To covert the real-valued outputs produced by a dense layer into probabilities, we attach a new kind of activation function, the sigmoid activation. . . To get the final class prediction, we define a threshold probability. Typically this will be 0.5, so that rounding will give us the correct class: below 0.5 means the class with label 0 and 0.5 or above means the class with label 1. A 0.5 threshold is what Keras uses by default with its accuracy metric. . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/06/kaggle-Intro-to-Deep-Learning.html",
            "relUrl": "/markdown/2021/10/06/kaggle-Intro-to-Deep-Learning.html",
            "date": " • Oct 6, 2021"
        }
        
    
  
    
        ,"post10": {
            "title": "Kaggle Data Visualization",
            "content": "kaggle Data Visualization . Hello, Seaborn . . . . Line Charts . . sns.lineplot tells the notebook that we want to create a line chart. . . The first line of code sets the size of the figure to 14 inches (in width) by 6 inches (in height). To set the size of any figure, you need only copy the same line of code as it appears. Then, if you’d like to use a custom size, change the provided values of 14 and 6 to the desired width and height. . Plot a subset of the data . . Bar Charts and Heatmaps . . . annot=True - This ensures that the values for each cell appear on the chart. . Scatter Plots . . To double-check the strength of this relationship, you might like to add a regression line, or the line that best fits the data. We do this by changing the command to sns.regplot. . . Color-coded scatter plots . . . We’ll refer to this plot type as a categorical scatter plot, and we build it with the sns.swarmplot command. . . Distribution . Histogram . . We customize the behavior of the command with two additional pieces of information: . a= chooses the column we’d like to plot (in this case, we chose &#39;Petal Length (cm)&#39;). | kde=False is something we’ll always provide when creating a histogram, as leaving it out will create a slightly different plot. | . Density plot . . 2D KDE plots . . Color-coded plots . . In this case, the legend does not automatically appear on the plot. To force it to show (for any plot type), we can always use plt.legend(). . . Choosing Plot Types and Custom Styles . . Since it’s not always easy to decide how to best tell the story behind your data, we’ve broken the chart types into three broad categories to help with this. . Trends . - A trend is defined as a pattern of change. . sns.lineplot - Line charts are best to show trends over a period of time, and multiple lines can be used to show trends in more than one group. | . | Relationship . - There are many different chart types that you can use to understand relationships between variables in your data. . sns.barplot - Bar charts are useful for comparing quantities corresponding to different groups. | sns.heatmap - Heatmaps can be used to find color-coded patterns in tables of numbers. | sns.scatterplot - Scatter plots show the relationship between two continuous variables; if color-coded, we can also show the relationship with a third categorical variable. | sns.regplot - Including a regression line in the scatter plot makes it easier to see any linear relationship between two variables. | sns.lmplot - This command is useful for drawing multiple regression lines, if the scatter plot contains multiple, color-coded groups. | sns.swarmplot - Categorical scatter plots show the relationship between a continuous variable and a categorical variable. | . | Distribution . - We visualize distributions to show the possible values that we can expect to see in a variable, along with how likely they are. . sns.distplot - Histograms show the distribution of a single numerical variable. | sns.kdeplot - KDE plots (or 2D KDE plots) show an estimated, smooth distribution of a single numerical variable (or two numerical variables). | sns.jointplot - This command is useful for simultaneously displaying a 2D KDE plot with the corresponding KDE plots for each individual variable. | . | . . . Seaborn has five different themes: (1)&quot;darkgrid&quot;, (2)&quot;whitegrid&quot;, (3)&quot;dark&quot;, (4)&quot;white&quot;, and (5)&quot;ticks&quot;, and you need only use a command similar to the one in the code cell above (with the chosen theme filled in) to change it. . Final Project . Kaggle Datasets . You can access Kaggle Datasets by visiting the link below: . https://www.kaggle.com/datasets . The link will bring you to a webpage with a long list of datasets that you can use in your own projects. .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/06/kaggle-Data-Visualization.html",
            "relUrl": "/markdown/2021/10/06/kaggle-Data-Visualization.html",
            "date": " • Oct 6, 2021"
        }
        
    
  
    
        ,"post11": {
            "title": "Quantitative Trading Nanodegree Lesson 1 ~ 15",
            "content": "Quantitative Trading Nanodegree Lesson 1 ~ 15 . Lesson 1 ~ 3: Welcome to the Nanodegree Program . Lesson 4: Stock Prices . Lesson 5: Market Mechanics . Lesson 6: Data Processing . Lesson 7: Stock Returns .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/06/Quantitative-Trading-Nanodegree-Chapter-1~15.html",
            "relUrl": "/markdown/2021/10/06/Quantitative-Trading-Nanodegree-Chapter-1~15.html",
            "date": " • Oct 6, 2021"
        }
        
    
  
    
        ,"post12": {
            "title": "CFA Level 2 Portfolio Management",
            "content": "CFA Level 2 Portfolio Management . LOS 43.a: Explain the creation / redemption process of ETFs and the function of authorized participants. . Unlike open-end mutual funds, ETFs are traded on secondary markets. . The ETF issuer designates authorized participants (APs). APs are permitted to create additional shares, or redeem existing shares, for a service fee payable to the ETF manager. . The in-kind creation / redemption process serves three purposes: . Lower cost | Tax efficiency | Keeping market prices in line with NAV | This implies that ETFs should trade within a price band of the NAV, known as the arbitrage gap. . Investor -&gt; ETF (상장) -&gt; 추종하려는 Index (결국 ETF 가격은 Index 가격에 따라 움직임) . Authorized Participants (AP)라는 역할 존재 . 상장이니까 가격 변동성 존재 (NAV에서 가격이 멀어질 수 있음) -&gt; AP가 조절 by 증자, 감자 . 장점 . Lower Cost - 증자, 감자는 AP가 해주니 ETF Manager는 신경쓰지 않음 | Tax Efficiency: ETF의 증자 / 감자는 비과세 | NAV와 가격 같게 유지 -&gt; 그렇지 않으면 arbitrage gap 발생 가능 | . LOS 43.b: Describe hoe ETFs are traded in secondary markets. . In the United States, the National Security Clearing Corporation (NSCC) guarantees the performance of parties to a trade on an exchange. The Depository Trust Company (DTC), a subsidiary of NSCC, transfers the securities from the account of the seller’s broker to the account for buyer’s broker at the end of the two-day settlement period. Market makers, due to their special significance, and due to the time required by the creation / redemption process, are afforded up to six days to settle their trades. . ETF는 주식처럼 상장되어 거래, NSCC가 성과 보증하고 DTC가 거래 소관 (2영업일 내에 거래 처리) . AP는 증자 / 감자 거래 처리를 6영업일 안에 처리 . LOS 43.c: Describe sources of tracking error for ETFs. . Tracking difference is the divergence between an ETF’s return (based on its NAV) and the return on the tracked index. Tracking error is the annualized standard deviation of the daily tracking difference. Tracking error does not indicate whether the ETF under- or outperformed the index. . ETFs generally underperform the benchmark by their expense ratio. . Sources of tracking error include the following: . Fees and expense | Sampling and optimization | Depository receipts (DRs) - due to time zone differences in capturing price data | Index changes | Regulatory and tax requirements | Fund accounting practices | Asset manager operations | Tracking difference: BM과 ETF return의 차이 . Tracking error는 ETF가 Index보다 성과가 좋다 나쁘다 개념이 아님 - 잘 복제했느냐 개념 . ETF가 BM보다 성과가 보통 낮은 이유 -&gt; Fees, Sampling, DR, Index 변화, 규제 변화, Fund accounting, asset manager operation . LOS 43.d: Describe factors affecting ETF bit-ask spreads. . The primary factors affecting ETF spread are the liquidity and the market structure of the underlying securities. . Spreads on fixed-income ETFs tends to be larger than hose for large-cap equity ETFs. | The spreads are narrower during the overlapping time period when both markets are open. | Specialized ETFs, such as those that track commodities, volatility futures, or small-cap stocks, tend to have wider spreads. | Thinly-traded ETFs, regardless of the liquidity of the underlying, also command a higher spread. | . Maximum spread = creation (redemption) fees plus other trading costs + spread of the underlying securities + risk premium for carrying the trade until close of trading + AP’s normal profit margin - discount based on probability of offsetting the trade in secondary market . Bid-Ask spread가 영향을 미치는 주요 요인 - 해당 시장의 유동성, underlying security . 채권 ETF spread가 더 큼, specialized ETF spread가 더 큼 . Maximum spread = Creation fee + spread (기초자산) + risk premium + AP’s margin - discount (유통시장에서 거래되어 offsetting 될 수 있는 비용) . LOS 43.e: Describe sources of ETF premiums and discounts to NAV. . The NAV of an ETF is generally its fair value. . ETF premium (discount) % = (ETF price - NAV per share) / NAV per share . Timing differences - ETFs on foreign securities may experience gaps between the time the ETF is traded and the time when the underlying trades in a foreign market. | Stale pricing - Infrequently traded ETFs may reflect noncurrent prices and, therefore, their value may differ from NAV. | . ETF prices may be more informative than NAV or iNAV when 1) the market for the underlying is closed, 2) underlying securities are highly volatile or illiquid, or 3) there is a time lag between the pricing of the ETF and the pricing of underlying. . ETF는 일반적으로 fair value에 거래됨 - 거래소가 NAV를 공시 . ETF premium = (ETF price - NAV price) / NAV price . premium이나 discount 발생 이유 - timing difference, stale pricing . 하지만 NAV보다 ETF price가 더 의미있을 때도 있음 - 장전, 기초자산이 너무 변동성이 심할 때 등 . LOS 43.f: Describe costs of owning an ETF. . ETF costs include management fees and trading costs. . Trading costs include brokerage or commission fees and bid-ask spreads. . For shorter holding periods, trading cost dominates the cost of ETF ownership. Conversely, long-term investors are likely to seek out ETFs with low management fees. . Management fee + trading costs -&gt; 경쟁이 치열하고 + passive라서 fee수준은 낮은 편 . trading costs는 거래할 때만 발생 -&gt; 보유기간이 길 수록 거래비요으이 비중은 감소 -&gt; 장기투자자는 운용보수가 낮은 ETF 선호 . LOS 43.g: Describe types of ETF risk. . Counterparty risk . Exchange-traded notes (ETNs), for example, have high counterparty risk. In the case of an ETN, an issuer (typically a bank) issues unsecured debt obligations that promise to pay the return on an index less management fees (just like a regular ETF). . The concern here is that the bank may default, resulting in losses for the ETN investor. . Settlement risk . ETFs using OTC derivative contracts as part of their strategy expose investors to the settlement risk of such contracts. . Security lending . Like mutual funds, ETFs may lend their securities to short sellers for a fee. . Fund closures . Expectation-related risk . The outcomes may differ from investors’ expectations . The compounding effects of leveraged ETFs make them unsuitable for buy-and-hold investors with investment horizons exceeding one month. . Counterparty risk, settlement risk, security lending, fund closures, expectation-related risk (기대와 다른 효과) . LOS 43.h: Identify and describe portfolio uses of ETFs. . Due to their low costs, tax efficiency, and wide variety, ETFs are suitable for numerous portfolio strategies. . Efficient portfolio management . Portfolio liquidity management | Portfolio rebalancing | Portfolio completion | Transition management | Asset class exposure management . Allow a manager to implement a variety of strategies suitable for their clients. . Core exposure to an asset class or sub-asset class | Tactical strategies | Active investing . Newer varieties of ETFs with an active component have gained traction, especially for fixed income. . Factor (smart beta) ETFs | Risk management | Alternatively weighted ETFs | Discretionary active ETFs | Dynamic asset allocation and multi-asset strategies | Efficient Portfolio management 활용 - liquidity, rebalancing, completion, transition . assets class exposure management 활용 - core exposure, tactical strategy . active investing - factor ETF, risk management, alternatively weighted ETF, Discretionary active ETF, Dynamic asset allocation -&gt; ETF는 유동성이 있으니 자유자재로 active하게 활용해서 $ alpha$추구 . LOS 44.a: Describe arbitrage pricing theory (APT), including its underlying assumption and its relation to multifactor models. . Arbitrage pricing theory (APT) was developed as an alternative to the capital asset pricing model. However, unlike CAPM, APT does not identify the specific risk factors (or even the number of factors). . Assumptions of arbitrage pricing theory (APT) . Unsystematic risk can be diversified away in a portfolio | Returns are generated using a factor model | No arbitrage opportunities exist | The APT eqaution . E(RP)=RF+βP,1(λ1)+βP,2(λ2)+...+βP,k(λk) E(R_{P}) = R_{F} + beta_{P, 1}( lambda_{1}) + beta_{P, 2}( lambda_{2}) + ... + beta_{P, k}( lambda_{k})E(RP​)=RF​+βP,1​(λ1​)+βP,2​(λ2​)+...+βP,k​(λk​) . $ lambda_{j}$ equals the risk premium for a portfolio (called a pure factor portfolio) with factor sensitivity equal to 1 to factor j and factor sensitivities of zero for the remaining factors. . Unlike the CAPM, the APT does not require that one of the risk factors is the market portfolio. This is a major advantage of the arbitrage pricing model. . Arbitrage pricing model -&gt; CAPM 왜 한 개인지 의문이 발생 -&gt; 수익률에 영향을 주는 게 더 많지 않을까라는 의문에서 개발 (베타 말고 다른 요인 찾기) . 가정 . 비체계적 위험은 분산 가능 | Return은 Factor model로 측정 가능 | Arbitrage 기회 없음 | 이름이 왜? - 위 2번 가정을 모두가 쓰면, 모두가 같은 $E(r)$을 계산 -&gt; mispricing이 생겨도 금방 수정됨 -&gt; arbitrage 기회 없음 . Factor Portfolio = 다른 Factor는 다 0으로 가정, Factor 1개만 1로 측정 -&gt; 그래서 그 factor가 얼마나 영향을 주는지를 측정하기 ㅜ이함 . 장점 - Factor를 다중 분석할 수 있음 . 단점 - 어느 Factor를 써야하지? 통계적으로 맞다 하여도 쌩뚱맞은 변수를 쓰면 무슨 소용이지? . LOS 43.b: Define arbitrage opportunity and determine whether an arbitrage opportunity exists. . The APT assumes there are no market imperfections preventing investors from exploiting arbitrage opportunities. . Over-valued는 short, 그 돈으로 under-valued 매수 -&gt; 그 차이가 이익 . LOS 43.c: Calculate the expected return on an asset given an asset’s factor sensitivities and the factor risk premiums. . LOS 43.d: Describe and compare macroeconomic factor models, fundamental factor models, and statistical factor models. . A multifactor model assumes asset returns are driven by more than one factor. There are three general classifications of multifactor models: 1) macroeconomic factor models, 2) fundamental factor models, and 3) statistical factor models. . Macroeconomic factor models assume that asset returns are explained by surprises (or shocks) in macroeconomic risk factors. Factors surprises are defined as the difference between the realized value of the factor and its consensus predicted value. | Fundamental factor models assume asset returns are explained by multiple firm-specific factors. | Statistical factor models use statistical methods to explain asset returns. Two primary types of statistical factor models are used: factor analysis and principal component models. The major weakness is that the statistical factors do not lend themselves well to economic interpretation. Therefore, statistical factors are mystery factors. | Macroeconomic factor models . Ri=ERi+bi1FGDP+bi2FQS+ϵiRi=return for Asset iERi=expected return for Asset i (in the absence of any surprises)FFDP=surprise in the GDP rateFQS=surprise in the credit quality spread (BB-rated bond yield - Treasury bond yield)bi1=GDP surprise sensitivity of Asset ibi2=credit quality spread surprise sensitivity of Asset iϵi=firm-specific surprise (unrelated to the two macro factors) R_{i} = E_{R_{i}} + b_{i1}F_{GDP} + b_{i2}F_{QS} + epsilon_{i} R_{i} = text{return for Asset i} E_{R_{i}} = text{expected return for Asset i (in the absence of any surprises)} F_{FDP} = text{surprise in the GDP rate} F_{QS} = text{surprise in the credit quality spread (BB-rated bond yield - Treasury bond yield)} b_{i1} = text{GDP surprise sensitivity of Asset i} b_{i2} = text{credit quality spread surprise sensitivity of Asset i} epsilon_{i} = text{firm-specific surprise (unrelated to the two macro factors)}Ri​=ERi​​+bi1​FGDP​+bi2​FQS​+ϵi​Ri​=return for Asset iERi​​=expected return for Asset i (in the absence of any surprises)FFDP​=surprise in the GDP rateFQS​=surprise in the credit quality spread (BB-rated bond yield - Treasury bond yield)bi1​=GDP surprise sensitivity of Asset ibi2​=credit quality spread surprise sensitivity of Asset iϵi​=firm-specific surprise (unrelated to the two macro factors) . Each “F” is a factor surprise, the difference between the predicted value of the factor and the realized value. | The firm-specific surprise captures the part of the return that can’t be explained by the model. | . Be careful to interpret the signs properly. . Priced risk factors . A risk does not affect many assets can usually be diversified away in a portfolio and will not be priced by the market. . The factors in our example model, GDP and credit quality spread shocks, are systematic risk factors, meaning that they will affect even well-diversified portfolios. . Factor sensitivities . In a macroeconomic multifactor model, asset returns are a function of unexpected surprises to systematic factors, and different assets have different factor sensitivities. . The factor sensitivities of the model can be estimated by regressing historical asset returns on the corresponding historical macroeconomic factors. . Fundamental factor models . Ri=ai+bi1FP/E+bi2FSIZE+ϵiRi=return for stock iFP/E=return associated with the P/E factorFSIZE=return associated with the SIZE (market capitalization) factorai=interceptbi1=standardized sensitivity of stock i to the P/E factorbi2=standardized sensitivity of stock i to the SIZE factorϵi=portion of asset i return not explained by the factor model R_{i} = a_{i} + b_{i1}F_{P/E} + b_{i2}F_{SIZE} + epsilon_{i} R_{i} = text{return for stock i} F_{P/E} = text{return associated with the P/E factor} F_{SIZE} = text{return associated with the SIZE (market capitalization) factor} a_{i} = text{intercept} b_{i1} = text{standardized sensitivity of stock i to the P/E factor} b_{i2} = text{standardized sensitivity of stock i to the SIZE factor} epsilon_{i} = text{portion of asset i return not explained by the factor model}Ri​=ai​+bi1​FP/E​+bi2​FSIZE​+ϵi​Ri​=return for stock iFP/E​=return associated with the P/E factorFSIZE​=return associated with the SIZE (market capitalization) factorai​=interceptbi1​=standardized sensitivity of stock i to the P/E factorbi2​=standardized sensitivity of stock i to the SIZE factorϵi​=portion of asset i return not explained by the factor model . Standardized sensitivities ($b_{i1}$ and $b_{i2}$). Sensitivities in most fundamental factor models are not regression slopes. Instead, the fundamental factor sensitivities are standardized attributes. bi1=(P/E)i−P/EˉσP/E b_{i1} = frac{(P/E)_{i} - bar{P/E}}{ sigma_{P/E}}bi1​=σP/E​(P/E)i​−P/Eˉ​​ Factor returns ($F_{P/E}$ and $F_{SIZE}$). The fundamental factors are rates of return associated with each factor. The dependent variable is the set of returns for all stocks and the independent variables are the standardized sensitivities. . The macroeconomic factor model vs. the fundamental factor model . Sensitivities - The standardized sensitivities in the fundamental factor model are calculated directly from the attribute data-they are not estimated. The macroeconomic model, in which the sensitivities are regression slope estimates. | Interpretation of factors - The macroeconomic factors are surprises in the macroeconomic variables. In contrast, the fundamental factors are rates of return associated with each factor and are estimated using multiple regression. | Intercept term - The intercept in the macroeconomic factor model equals the stock’s expected return. In contrast, the intercept of a fundamental factor model with standardized sensitivities has no economic interpretation. | . . . . . LOS 44.e: Explain sources of active risk and interpret tracking risk and the information ratio. . Active return equals the differences in returns between a managed portfolio and its benchmark: Activereturn⁡=RP−RB operatorname{Active return} = R_{P} - R_{B}Activereturn=RP​−RB​ Active risk (also known as tracking error or tracking risk) is defined as the standard deviation of the active return: Activerisk⁡=trackingerror⁡=σRP−RB operatorname{Active risk} = operatorname{tracking error} = sigma_{R_{P} - R_{B}}Activerisk=trackingerror=σRP​−RB​​ . The Information Ratio . Active return alone is insufficient for measuring an investment manager’s performance over a series of measurement periods. . To demonstrate a manager’s consistency in generating active return, we use the information ratio, which standardizes average active return by dividing it by its standard deviation. IR⁡=RPˉ−RBˉσRP−RB operatorname{IR} = frac{ bar{R_{P}} - bar{R_{B}}}{ sigma_{R_{P} - R_{B}}}IR=σRP​−RB​​RP​ˉ​−RB​ˉ​​ The higher the IR, the more active return the manager earned per unit of active risk. . . LOS 44.f: Describe uses of multifactor models and interpret the output of analyses based on multifactor models. . activereturn⁡=RP−RBfactorreturn⁡=∑i=1k(βpi−βbi)∗λisecurityselectionreturn⁡=activereturn⁡−factorreturn⁡βpi=factor sensitivity for the ith factor in the active portfolioβbi=factor sensitivity for the ith factor in the benchmark portfolioλi=factor risk premium for factor i operatorname{active return} = R_{P} - R_{B} operatorname{factor return} = sum_{i = 1}^{k}{( beta_{pi} - beta_{bi}) * lambda_{i}} operatorname{security selection return} = operatorname{active return} - operatorname{factor return} beta_{pi} = text{factor sensitivity for the ith factor in the active portfolio} beta_{bi} = text{factor sensitivity for the ith factor in the benchmark portfolio} lambda_{i} = text{factor risk premium for factor i}activereturn=RP​−RB​factorreturn=i=1∑k​(βpi​−βbi​)∗λi​securityselectionreturn=activereturn−factorreturnβpi​=factor sensitivity for the ith factor in the active portfolioβbi​=factor sensitivity for the ith factor in the benchmark portfolioλi​=factor risk premium for factor i . Risk attribution . activerisk⁡=trackingerror⁡=σ(RP−RB) operatorname{active risk} = operatorname{tracking error} = sigma_{(R_{P} - R_{B})}activerisk=trackingerror=σ(RP​−RB​)​ . The active risk of a portfolio can be separated into two components: . Active factor risk | Active specific risk | activerisksquared⁡=activefactorrisk⁡2+activespecificrisk⁡2activefactorrisk⁡2=activerisksquared⁡−activespecificrisk⁡2 operatorname{active risk squared} = operatorname{active factor risk}^{2} + operatorname{active specific risk}^{2} operatorname{active factor risk}^{2} = operatorname{active risk squared} - operatorname{active specific risk}^{2}activerisksquared=activefactorrisk2+activespecificrisk2activefactorrisk2=activerisksquared−activespecificrisk2 . . Uses of multifactor models . Passive management . Managers seeking to track a benchmark can construct a tracking portfolio. Tracking portfolios have a deliberately designed set of factor exposures. . Active management . Active managers use factor models to make specific bets on desired factors while hedging (or remaining neutral) on other factors. A factor portfolio is a portfolio that has been constructed to have sensitivity of one to just one risk factor and sensitivities of zero to the remaining factors. Factor portfolios are particularly useful for speculation or hedging purposes. . Rules-based or algorithmic active management (alternative indices) . These strategies use rules to mechanically tilt factor exposures when constructing portfolios. . Carhart Model . E(R)=RF+β1RMRF⁡+β2SMB⁡+β3HML⁡+β4WML⁡RMRF⁡=return on value-weighted equity index - the risk-free rateSMB⁡=average return on small cap stocks - average return on large cap stocksHML⁡=average return on high book-to-market stocks - average return on low book-to-market stocksWML⁡=average returns on past winners - average returns on past losers E(R) = R_{F} + beta_{1} operatorname{RMRF} + beta_{2} operatorname{SMB} + beta_{3} operatorname{HML} + beta_{4} operatorname{WML} operatorname{RMRF} = text{return on value-weighted equity index - the risk-free rate} operatorname{SMB} = text{average return on small cap stocks - average return on large cap stocks} operatorname{HML} = text{average return on high book-to-market stocks - average return on low book-to-market stocks} operatorname{WML} = text{average returns on past winners - average returns on past losers}E(R)=RF​+β1​RMRF+β2​SMB+β3​HML+β4​WMLRMRF=return on value-weighted equity index - the risk-free rateSMB=average return on small cap stocks - average return on large cap stocksHML=average return on high book-to-market stocks - average return on low book-to-market stocksWML=average returns on past winners - average returns on past losers . . LOS 44.g: Describe the potential benefits for investors in considering multiple risk dimensions when modeling asset returns. . Under the CAPM framework, investors choose a combination of the market portfolio and the risk-free asset depending on their risk tolerance. By including more risk factors, multifactor models enable investors to zero in on risks that the investor has a comparative advantage in bearing and avoid the risks that the investor is incapable of absorbing. . . LOS 45.a: Explain the use of value at risk (VaR) in measuring portfolio risk. . Value at risk (VaR) measures downside risk of a portfolio. It has three components: the loss size, the probability (of a loss greater than or equal to the specified loss size), and a time frame. . VaR can also be expressed in percentage terms so that for a portfolio, we could state that the 5% monthly VaR is 3%, meaning that 5% of the time the monthly portfolio value will fall by as least 3%. . . . . LOS 45.b: Compare the parametric (variance-covariance), historical simulation, and Monte Carlo simulation methods for estimating VaR. . LOS 45.c: Estimate and interpret VaR under the parametric, historical simulation, and Monte Carlo simulation methods. . Parametric method . One method of estimating VaR is the parametric or vairance-covariance method. Assuming normally allows us to estimate the risk of the portfolio based only on the means, variances, and covariances (or correlations) of the various risk factors. (skewness and kurtosis) . Assuming normality, we can use the portfolio variance formula to estimate the mean and variance of portfolio returns. σPortfolio2=WA2σA2+WB2σB2+2WAWBCovAB sigma_{Portfolio}^{2} = W_{A}^{2} sigma_{A}^{2} + W_{B}^{2} sigma_{B}^{2} + 2W_{A}W_{B}Cov_{AB}σPortfolio2​=WA2​σA2​+WB2​σB2​+2WA​WB​CovAB​ lookback period - The important point is that the parametric estimates we use should be those we expect over the period for which we are estimating the VaR. . The parametric method is relatively simple to apply under the assumption of normally distributed returns. The length of the lookback period will affect the parameter estimates. In cases where normality cannot be reasonably assumed, such as when the portfolio contains options, the parametric method has limited usefulness. . . Historical simulation method . The historical simulation method of estimating VaR is based on the actual periodic changes in risk factors over a lookback period. . Under the historical simulation method, no adjustment are made for the difference between the results for the lookback period and the results over a longer prior period. . One positive aspect of the historical simulation method is that we do not need the assumption of normality, or any other distributional assumption, to estimate VaR. . VaR estimates will depend on the lookback period and, as with any forecasts, will vary with the characteristics of the sample data used. . . Monte Carlo simulation . A third method of VaR estimation is Monte Carlo simulation. Monte Carlo simulation is based on an assumed probability distribution for each risk factor. . This procedure is repeated thousands of times. As with the other methods, the data used and the assumptions about the distributions of the risk factors will have significant effects on the estimated VaR. . . LOS 45.d: Describe advantages and limitations of VaR. . Advantages of VaR . The concept of VaR is simple and easy to explain. | VaR allows the risk of different portfolios, asset classes, or trading operations to be compared to gain a sense of relative riskiness. | VaR can be used for performance evaluation. | When allocating capital to various trading units, a firm’s risk managers can also look at the allocation of VaR, and optimize the allocation of capital given the firm’s determination of the maximum VaR. | Global banking regulators accept VaR as a measure of financial risk. | Reliability of VaR as a measure of risk can be verified by backtesting. | . Limitations of VaR . VaR estimation requires many choices (loss percentage, lookback period, distribution assumptions, and parameter estimates) and can be very significantly affected by these choices. | The assumption of normality leads to underestimates of downside (tail) risk because actual returns distributions frequently have “fatter tails” than a normal distribution. Although the assumption of normality is not a requirement of VaR, it is almost always used, especially with the parametric method. | Liquidity often falls significantly when asset prices fall. | It is well known that correlations increases, or spike, during periods of financial stress. VaR measures based on normal levels of correlation. | While VaR is a single number that can be used to quantify risk, as with any summary measure, many aspects of risk are not quantified or included. | VaR focuses only on downside risk and extreme negative outcomes. Including consideration of right-hand tail values will give a better understanding of the risk-return trade-off. | . . . LOS 45.e: Describe extensions of VaR. . Conditional VaR . Another measure based on Var is the conditional VaR (CVaR). The CVaR is the expected loss, given that the loss is equal to or greater than the VaR. For this reason, the CVaR is also referred to as the expected tail loss or expected shortfall. . When the VaR is estimated using the historical simulation method or Monte Carlo simulation, we have all the losses greater than the VaR loss, so it is straightforward to take the average of these to get the CVaR. With the parametric method, we don’t know the magnitude of losses greater than the VaR, so calculating the expected loss in the left-hand tail is mathematically complex. . VaR을 넘어선 손실에 대한 측정 - VaR을 넘어갔다고 가정 | Historical &amp; Monte Carlo - 계산이 어려움 | Parametric - 계산 쉬움 | . Incremental VaR (IVaR) . Security가 추가(감소) 될 때 증분 VaR | . Marginal VaR (MVaR) . We can interpret it as the change in VaR for a 1% increase in the security’s weight. Thus, both the MBaR and IVaR can be used to estimate the change in VaR that will result from a change in the weight of a single security. . Portfolio 안에 weight 들이 미치는 VaR 측정 for 위험관리 | 직관적 이해 - Before &amp; After = IVaR, 시점전날 전력투구 과목 고르기 = MVaR | . Ex ante tracking error (relative VaR) . Ex ante tracking error measures the VaR of the difference between the return on a portfolio and the return on its manager’s benchmark portfolio. . Benchmark와 Portfolio의 차이 VaR . LOS 45.f: Describe sensitivity risk measures and scenario risk measures and compare these measures to VaR. . Sensitivity analysis . Risk assessment using sensitivity analysis focuses on the effect on portfolio value given a small change in one risk factor. Portfolio risk can be better understood and more effectively managed. Unlike VaR, it does not invlove any prediction of the probability of losses of any specific amount. . 민감도 분석, 각 Factor의 영향력 분석 | specific 확률을 제공하진 않음 | . Scenario analysis . Scenario analysis provides an estimate of the effect on portfolio value of a set of changes of significant magnitude in multiple risk factors. . 각 factor들의 가정들 set -&gt; 결과값 -&gt; 분석 | Historical scenario - 역사적 기반 | Hypothetical scenario - 가상값 | Stress testing - 극단값 | . Historical scenario . A historical scenario approach uses a set of changes in risk factors that have actually occurred in the past. . Hypothetical scenario . With a hypothetical scenario approach, any set of changes in risk factors can be used, not just one that has happened in the past. . Stress test . Stress tests examine the effect on value (or solvency) of a scenario of extreme risk-factor changes. . LOS 45.g: Demonstrate how equity, fixed-income, and options exposure measures may be used in measuring and managing market risk and volatility risk. . The risk factors used to measure the risks of equities, fixed-income securities, and options are all different. For equities, the most often used risk factor is beta. E(Ri)=Rf+Betai[E(RMKT)−Rf] E(R_{i}) = R_{f} + Beta_{i}[E(R_MKT) - R_{f}]E(Ri​)=Rf​+Betai​[E(RM​KT)−Rf​] For fixed-income securities and portfolios, duration provides an estimate of how market values are affected by changes in interest rates (yield to maturity). For larger changes in interest rates, including the effects of convexity on fixed-income security values improves estimates of the sentisivity of the values of fixed-icnome securities to changes in interest rates. Changeinprice⁡=−Duration(ΔY)+12Convexity(ΔY)2 operatorname{Change in price} = -Duration( Delta{Y}) + frac{1}{2}Convexity( Delta{Y})^2Changeinprice=−Duration(ΔY)+21​Convexity(ΔY)2 Several risk factors affect the values of options positions. Delta is an estimate of the sensitivity of options values to changes in the value of the underlying asset. . Delta, Gamma, Vega | . Equity - Beta CAPM | . | Fixed Income Duration, Convexity | . | Option Delta, Gamma, Vega | . | LOS 45.h: Describe the use of sensitivity risk measures and scenario risk measures. . Sensitivity risk measures can inform a portfolio manager about a portfolio’s exposure to various risk factors to facilitate risk management. Of course, eliminating all risk is not the goal. . Factor sensitivities can be used to estimate the effects of small changes in risk factors for these securities. . Pricing models can be quite accurate when all of the relevant characteristics of a security are specified. . Scenario analysis is often performed as if the scenario changes were instantaneous. . In reverse stress testing, the first step is to identify a portfolio’s largest risk exposures. The question then becomes how likely such scenarios are. Using scenario analysis in this way can be beneficial in helping risk managers identify the vulnerabilities of a portfolio and perhaps mitigate the risk exposures identified. . Sensitivity risk measures - manager에게 risk들을 선택할 수 있게 활용 (베팅, 헷징) . Scenario analysis - 상황변화에 대해 즉각적인 대응을 가능하게 함 . Reverse stress testing - testing을 통해 원인 찾기 -&gt; 실제 일어날 수 있을지 여부 검토 . LOS 45.i: Describe advantages and limitations of sensitivity risk measures and scenario risk measures. . VaR, sensitivity analysis, and scenario analysis complement each other, and a risk manager should not rely on only one of these measures. . The problem with using duration as the risk measure is that the yield volatility of one portfolio may be quite different from the yield volatility of the other. . VaR = %, loss 제공 . Sensitivity analysis = 각 factor 별 영향 제공, %는 제공 안함 . Scenario analysis = 각 factor set 별 영향 제공, %는 제공 안함 . 서로 모두 보완역할 . LOS 45.j: Describe risk measures used by banks, asset managers, pension funds, and insurers. . For each type of organization, differences among firms will result in differences in the risk measures used. . Banks typically use sensitivity measures (duration of held-to-maturity securities and foreign exchange risk exposure), scenario analysis and stress testing (for their full balance sheets), leverage risk measures, and VaR (especially for trading securities). Banks also estimate risk from asset-liability mismatches, estimate VaR for economic capital, and disaggregate risk by both geographic location and business unit type. . Traditional (long-only) asset managers typically focus on relative risk measures unless their goal is an absolute return target. A risk measure more specific to asset management is active share: the difference between the weight of a security in the portfolio and its weight in the benchmark. . Ex-post tracking error (backward looking) and ex ante tracking error (forward looking) measures provide different information. Ex-post tracking error is used for performance attribution and to assess manager skill over prior periods. Traditional asset managers mostly use ex ante tracking error for risk estimation. Managers with an absolute return target may use VaR instead. . For hedge funds, the risk measures used depend, to some extent, on the strategy employed. . Hedge funds with significantly non-normal returns distributions use a risk measure referred to as maximum drawdown: the largest decrease in value over prior periods of a specific length. . Defined benefit pension funds calculate the difference between the present value of their assets (often market values) and the present value of their estimated future liabilitieis (payments to retirees and heirs). A risk measure used by pension funds is surplus-at-risk, a VaR for plan assets minum liabilities. . Insurance companies are often subject to significant regulation of their products and their investment portfolios (reserves). Property and casualty insurers sell auto, home, boat, liability, and health insurance. Insurance risks are reduced by pruchasing reinsurance (from another insurance company) and by geographical diversification. . P&amp;C insurers use sensitivities of their exposures to market risk factors in their investment portfolios for risk management. . The insurance risk of life insurers is more highly correlated with the market risk exposures of their investment portfolios than it is for P&amp;C insurers. The present value of these liabilities are quite sensitive to the discount factors used. . Bank - 보수적, 다 사용한다고 보면 됨 . Traditional (long-only) manager - 보통 relatvie risk measure (benchmark랑 비교) . ex-post tracking error - 성과평가 용으로 활용 | ex-ante trackign error - risk 미리 측정으로 활용 | absolute return은 VaR 활용 | . Hedge fund - 전략마다 다 위험지표 다름 . 정규분포가 아닌 경우 -&gt; Maximum drawdown 사용 | . DB pension fund . P(A) - P(L) = surplus -&gt; 위험관리 대상 | . Insurance . 손보사 risk가 market과 상대적으로 연관이 적음 | 관리대상 - 보험료 + 운용수익으로 총 비용 cover가 가능한지 여부 | . | 생보사 life time annuity 판매 -&gt; 부채로 계상 | 시장 할인율이 어떠냐에 다라 부채의 변동성이 심해지는 risk가 market과 상대적으로 연관이 높음 | . | . LOS 45.k: Explain contraints used in managing market risks, including risk budgeting, position limits, scenario limits, and stop-loss limits. . Risk limits that are often imposed include following. . Risk budgeting refers to a risk management process that first determines the acceptable total risk for an organization, and then allocates that risk to different activities, strategies, or asset classes as appropriate. . Position limits are one way to limit risk because they ensure some minimum level of diversification by limiting risk exposures. For example, position limit may be imposed on allocations to individual securities within an asset class, asset classes such as equities or high-yield bonds, investments in a single country, securities in a single currency or the differences between long and short positions for a hedge fund manager. . Scenario limits are limits on expected loss for a given scenario. . Stop-loss limits require that a risk exposure be reduced if losses exceed a specified amount over a certain period of time. . Risk budgeting - firm의 risk를 정하고 -&gt; allocation to 각 부서 | Position limit - 특정행위 금지 (투기채, 특정주식, 특정국가 등) | Scenario limit - 주어진 시나리오에서의 제한행위 | Stop-loss limit - 손실이 특정 범위를 넘어서면 risk exposure 감소시킴 | LOS 45.l: Explain how risk measures may be used in capital allocation decisions. . Capital aalocation decisions refer to how the capital of a firm is used to fund its various business units or activities, analogous to asset aalocation for a portfolio manager. Risk management, however, requires that the risk exposure for each use of firm capital be considered. . One way to introduce risk exposures to various activities into the capital allocation decision is to limit the overall risk of all the activities. . risk 무시하고 return 극대화를 위한 allocation? -&gt; risk exposure를 고려해야 함 ex) VaR 배분 . LOS 46.a: Explain the notion that to affect market values, economic factors must affect one or more of the following: 1) default-free interest rates across maturities, 2) the timing and / or magnitude of expected cash flows, and 3) risk premiums. . The value of any asset can be computed as the present value of its expected future cash flows discounted at an appropriate risk-adjusted discount rate. . Components of the discount rate are: . Real risk-free discount rate (R) | Expected inflation($ pi$) | Risk premium reflecting the uncertainty about the cash flow (RP) | The value of an asset will change if either the cash flow forecasts change or any of the components of the discount rate changes. . Value = Cash flow / (1 + Discount Rate) . Value는 CF가 변해도, 할인율이 변해도 변할 수 있음 | . Discount rate = real rate + inflation + risk premium . 할인율 역시 자산이 변해도, Investor의 기대가 변해도 변할 수 있음 | . LOS 46.b: Explain the role of expectations and changes in expectations in market valuation. . The value of an asset depends on 1) its expected future cash flows and 2) the discounted rate used to value those cash flows. As market participants receive new information, the timing and amounts of expected future cash flows are revised and valuations change as a result. The impact of new information will depend on its effect on current expectations. . 기존의 expectation -&gt; CF 추정 / 할인율 추정 -&gt; 결과 . 그런데 새로운 정보가 유입되어서 CF와 할인율이 변한다면 -&gt; 기존의 결과가 변함 . LOS 46.c: Explain the relationship between the long-term growth rate of the economy, the volatility of the growth rate, and the average level of real short-term interest rates. . The real risk-free rate of interest derives from the inter-temporal rate of substitution, which represents an investr’s trade-off between real consumption now and real consumption in the future. inter-temporal rate of substitution⁡=mt=marginalutilityofconsuming1unitinthefuture⁡marginalutilityofcurrentcomsumptionof1unit⁡=utu0 operatorname{inter-temporal , rate , of , substitution} = m_{t} = frac{ operatorname{marginal utility of consuming 1 unit in the future}}{ operatorname{marginal utility of current comsumption of 1 unit}} = frac{u_{t}}{u_{0}}inter-temporalrateofsubstitution=mt​=marginalutilityofcurrentcomsumptionof1unitmarginalutilityofconsuming1unitinthefuture​=u0​ut​​ Investors always prefer current comsumption over future consumption ($u_{0}&gt;u_{t}$) and $m_{t} &lt; 1$ as a result. P0=E(mt)R=1−P0P0=1E(mt)−1 P_{0} = E(m_{t}) R = frac{1 - P_{0}}{P_{0}} = frac{1}{E(m_{t})} - 1P0​=E(mt​)R=P0​1−P0​​=E(mt​)1​−1 . The higher the utility investors attach for current consumption relative to future consumption, the higher the real rate. | Investor’s marginal utility of consumption declines as wealth increases. | If investors expect higher incomes in the future, their expected marginal utility of future consumption is decreased relatvie to current consumption. | Investors increase their savings rate when expected returns ar high or when uncertainty about their future income increases. | . Real risk-free rate -&gt; inter-temporal rate of subsitution (현재의 소비 vs 미래의 소비) . Mt = 미래효용 / 현재효용 . 투자자는 항상 현재를 더 선호 -&gt; Mt &lt; 1 . . 기억해야 할 것 . 현재가 더 중요한 투자자 -&gt; 더 높은 real rate을 가짐 | 부가 증가하면 소비효용은 감소한다 -&gt; 소비효용이 증가하면 부가 감소하는 것을 의미 (경기 수축) | 미래 수입의 증가를 기대 -&gt; 미래 현재효용이 감소 | 미래 불확실성이 증대, 기대 return이 증가 -&gt; 투자자의 saving 증가 | . Risky cash flows and risk premiums . The risk aversion of investors can be explained by the covariance of an investor’s inter-temporal marginal rate of subsitution and expected on savings. Investors experience a large loss of utility for a loss in wealth as compared to a gain in utility for an equivalent gain in wealth. This property is called as risk-aversion. . An investor’s absoulte risk-aversion declines with their wealth; wealther investors are less risk-averse and more willing to take risk relative to their poorer counterparts. However, the marginal utility of holding risky assets declines as an investor holds more risky assets in her portfolio. P0=E(P1)1+R+cov(P1,m1)R=the real risk-free rate P_{0} = frac{E(P_{1})}{1 + R} + cov(P_{1}, m_{1}) R = text{the real risk-free rate}P0​=1+RE(P1​)​+cov(P1​,m1​)R=the real risk-free rate The covariance between the expected future price of the bond and the investor’s inter-temporal rate of substitution can be viewed as a risk premium. For risk-averse investors, the covariance is negative; when the expected future price of the asset is high, the marginal utility of future consumption relative oto current consumption is low. Everything else constant, the lower current price($P_{0}$) increases expected return. . risk aversion . 같은 gain loss에서 loss에 더 고통스러워하는 자 | 부자일수록 absolute risk aversion은 감소 | 부자일수록 less risk averse, willingness to take risk 가능성 증가 | risky asset이 많을수록, risk asset의 한계효용은 감소 | . . GDP growth rates . If GDP growth is forecasted to be high, the utility of consumption in the future (when incomes will be high) will be low and the inter-temporal rate of substitution will fall; investors will save less, increase real interest rates. Therefore, real interest rates will be positively correlated with real GDP growth rates. . GDP growth rate이 높은 것으로 기대 . 미래소비 효용 감소, less save | 자금이 귀해지고 real interest rate 증가 | 결국 real interest rate과 GDP 변동성은 상관계수가 positive 관계 | . LOS 46.d: Explain how the phase of the business cycle affects policy and short-term interest rates, the slope of the term structure of interest rates, and the relative performance of bonds of differing maturities. . Nomial risk-free interest rates include a premium for expected inflation ($ pi$). However, actual inflation is uncertain. . For short-term risk-free securities, the uncertainty about inflation is negligible. r(short-term⁡)=R+πr(long-term⁡)=R+π+θ r( operatorname{short-term}) = R + pi r( operatorname{long-term}) = R + pi + thetar(short-term)=R+πr(long-term)=R+π+θ For longer term bonds, we add the risk premium for uncertainty about inflation, $ theta$. . Actual inflation을 고려하자 (nominal) . Short-term = R + inflation | Long-term = R + inflation + actual | Taylor rule . Central banks are usually charged with setting policy rates so as to 1) maintain price stability and 2) achieve the maximum sustainable level of employment. r=Rn+π+0.5(π−π∗)+0.5(y−y∗)π∗=central bank’s target inflation ratey=log of current level of outputy∗=log of central bank’s target (sustainable) output r = R_{n} + pi + 0.5( pi - pi^{*}) + 0.5(y - y^{*}) pi^{*} = text{central bank&amp;#x27;s target inflation rate} y = text{log of current level of output} y^{*} = text{log of central bank&amp;#x27;s target (sustainable) output}r=Rn​+π+0.5(π−π∗)+0.5(y−y∗)π∗=central bank’s target inflation ratey=log of current level of outputy∗=log of central bank’s target (sustainable) output . price stability를 유지하며, 고용수준 최대 달성목표 | 중앙은행의 정책 이자율 | . Business cycle and slope of the yield curve . When the economy is in recession, policy rates tend to be low. Leads to higher longer-term rates. This results in a positively sloped yield curve. Conversely, expectations of a decline in GDP growth results in a negatively sloped (inverted) yield curve. For this reason, an inverted yield curve is often considered a predictor of future recessions. . A term spread is the difference between the yield on a longer-term bond yield and the yield on a short-term bond. Evidence suggests that normal term spread is positive so the yield curve is upward sloping. . recession -&gt; policy rate은 low | 경기침체 벗어나기 위해 GDP 기대 올리고 + inflation 적절히 관리 | YC가 우상향 (positively sloped YC) | GDP 감소 trend -&gt; negatively sloped YC | Inverted YC가 종종 경기침체의 signal로 관찰됨 | Term spread = LT bond - ST bond | Nominal term이 + -&gt; upward YC | +라는 것은 -도 존재한다는 것을 의미 | . LOS 46.e: Describe the factors that affect yield spreads between non-inflation-adjusted and inflation-indexed bonds. . The difference between the yield of a non-inflation-indexed risk-free bond and the yield of an inflation-indexed risk-free bond of the same maturity is the break-even inflation rate (BEI). BEI=yield on non-inflation-indexed bond⁡−yield on inflation-indexed bond⁡=π+θ BEI = operatorname{yield , on , non-inflation-indexed , bond} - operatorname{yield , on , inflation-indexed , bond} = pi + thetaBEI=yieldonnon-inflation-indexedbond−yieldoninflation-indexedbond=π+θ BEI is composed of two elements: expected inflation ($ pi$) and a risk premium for uncertainty about actual inflation ($ theta$). . LOs 46.f: Explain how the pahse of the business cycle affects credit spreads and the performance of credit-sensitive fixed-income instruments. . The required rate of return for bonds with credit risk includes an additional risk premium. This credit risk premium (credit spread) is the difference in yield between a credit risky bond and a default-free bond of the same maturity. requiredrateofreturnforcreditriskybonds⁡=R+π+θ+γγ=additional risk premium for credit risk=credit spread operatorname{required rate of return for credit risky bonds} = R + pi + theta + gamma gamma = text{additional risk premium for credit risk} = text{credit spread}requiredrateofreturnforcreditriskybonds=R+π+θ+γγ=additional risk premium for credit risk=credit spread Creadit spreads tend to rise during times of economic downturns and fall during expansions. . When credit spreads narrows, credit risky bonds will outperform default-free bonds. Overall, lower rated bonds tend to benefit more then higher rated bonds from a narrowing of credit spreads (their yields fall more). Conversely, when credit spreads widen, higher rated bonds will outperform lower rated bonds on a relative basis (because their yields will rise less). . Credit RP = 같은 만기 credit risky bond - default free bond . required rate = r + inflation + risk premium + yield curve credit spread . economic downterm -&gt; spread 증가 . economic expansion -&gt; spread 감소 . 경제 위축 -&gt; default 증가 -&gt; credit loss 증가 . bond 성과 -&gt; spread가 좁아질 때 -&gt; lower rate &gt; higher rate . spread가 넓어질 때 -&gt; lower rate &lt; higher rate . LOS 46.g: Explain how the characteristics of the markets for a company’s products affect the company’s credit quality. . Spreads differ among sectors and over time. Differences in credit spreads are primarily due to differences in indsutry products and services and the financial leverage of the firms in the industry. Spreads for issuers in the consumer cyclical sector invrease significantly during economic downturns compared to spreads for isseurs in the consumer non-cyclical sector. . 산업별로, 시간별로 spread 차이가 발생 - product, service, leverage 차이 . LOS 46.h: Explain how the phase of the business cycle affects short-term and long-term earnings growth expectations. . Cyclical industries tend to be relatively more sensitive to the phase of the business cycle. Companies in these industries have revenues and earnings that rise and fall with the rate of economic growth. Defensive or non-cyclical industries tend to be relatively immune to fluctuations in economic activity; their earnings tend to be relatively stable throughout the business cycle. . cyclical industry -&gt; business cycle에 더 민감, economic growth rate이 중요 | defensive -&gt; 상대적으로 덜 영향 | LOS 46.i: Explain the relationship between the consumption-hedging properties of equity and the equity risk premium. . The discount rate used to value equity secutiries includes an additional risk premium, the equity risk premium because equity is more risky than debt. Discountrateforequity⁡=R+π+θ+γ+κκ=additional risk premium relative to risky debt for an investment in equitiesλ=equity risk premium=γ+κ operatorname{Discount rate for equity} = R + pi + theta + gamma + kappa kappa = text{additional risk premium relative to risky debt for an investment in equities} lambda = text{equity risk premium} = gamma + kappaDiscountrateforequity=R+π+θ+γ+κκ=additional risk premium relative to risky debt for an investment in equitiesλ=equity risk premium=γ+κ Assets that provide a higher payoff during economic downturns are more highly valued because of the consumption hedging property of the asset. Equity prices are generally cyclical, with higher values during economic expansions when the marginal utility of consumption is lower. Equity investments, therefore, are not the most effective hedge against bad consumption outcomes. . Discount rate = R + inflation + risk premium + y + k . Consumption hedging property of asset . 경기침체 시 더 payoff 하는 자산이 good | 이런 자산은 risk premium이 감소 | 경기확장 시 equity는 가격증가 - cyclical -&gt; 주식투자는 경기침체 시 좋은 hedge 수단이 아님 | . LOS 46.j: Describe cyclical effects on valuation multiples. . Price multiples such as P/E and P/B are often used in determining the relative values of companies, of sectors, or of the overall market from a historical perspective. However, it is inappropriate to judge the multiple in a historical context only. . Price multiples are positively correlated with expected earnings growth rates and negatively correlated to required returns. . Shiller’s CAPE (real cyclically adjusted P/E) ratio reduces the volatility of unadjusted P/E ratios by using real prices in the numerator and a 10-year moving average of real earnings in the denominator. . Price multiple (P/E, P/B) . 회사별 sector별 역사적 관점으로 판단 x | earning growth %와 price multiple은 상관계수가 + | required return과 price multiple은 상관계수가 | . LOS 46.k: Describe the implications of the business cycle for a given style strategy (value, growth, small capitalization, large capitalization). . Growth stocks are characterized by high P/Es and by low dividend yields and tend to be in immature markets with high growth prospects. Value stocks tend to have low P/Es, have high dividend yields, and are generally found in established and mature markets. A value strategy performs well during and immediately following recessionary conditions, while growth strategy performs well during economic expansions. . Growth = High P/E, Low dividend, 경기확장 시 good | Value = low P/E, high dividend, stable earning, 경기침체 시 good | . LOS 46.l: Describe how economic analysis is used in sector rotation strategies. . Ex post risk premiums on equity sectors can be computed as the difference between the average return on a sector and the short-term risk free rate. Getting the timing right is of course very difficult. The point, however, is that understanding and forecasting the relationship between the equity market performance of different sectors and the business cycle would help analysts enhance their sector rotation strategies. . Rotation = cyclical vs. non-cyclical . 분석 필요 - correlation, risk premium 등 . LOS 46.m: Describe the economic factors affecting investment in commercial real estate. . Commercial real estate investments have . Bond-like characteristics. The steady rental income stream is similar to cash flows from a portfolio of bonds. The credit quality of tenants affects the value of commercial real estate. | Equity-like characteristics. The value of commercial real estate is influenced by many factors, including the state of the economy, the demand for rental properties, and property location. Uncertainty about the value of the property at the end of the lease term gives commercial properties an equity-like character. | Illiquidity. | . Valuation . Discountrateforcommercialrealestate⁡=R+π+θ+γ+κ+ϕκ=risk premium for uncertainty about termainal value of property (similar to the equity risk premium)ϕ=risk premium for illiquidity operatorname{Discount rate for commercial real estate} = R + pi + theta + gamma + kappa + phi kappa = text{risk premium for uncertainty about termainal value of property (similar to the equity risk premium)} phi = text{risk premium for illiquidity}Discountrateforcommercialrealestate=R+π+θ+γ+κ+ϕκ=risk premium for uncertainty about termainal value of property (similar to the equity risk premium)ϕ=risk premium for illiquidity . 성격 . bond-like - 안정적 임대수입, 임차인에 따라 신용도 영향 | equity-like - value가 경기에 영향 받음, 임대기간 말에 불확실성 존재 | . valuation = R + inflation + risk premium + r + k + Rp(비유동성 프리미엄) . 상업용 부동산은 가치가 cyclical -&gt; 다른자산과 상관계수 + . LOS 47.a: Describe how value added by active management is measured. . The information ratio is used to evaluate active managers and can be used to make portfolio allocation decisions for an investor. . Active management seeks to add value by outperforming a passively managed benchmark portfolio. . Active return . Active return($R_{A}$) is the value added by active management. Active return can be measured ex-ante or ex-post. . Active weights in a portfolio determine the amount of value added. Active weights must sum to zero. . Expected returns on the active and benchmark portfolios can be computed as the weighted average of securities returns: E(RP)=∑wPjE(RPj) and E(RB)=∑wBjE(RBj)E(RA)=∑wPjE(RPj)−∑wBjE(RBj) E(R_{P}) = sum{w_{Pj}E(R_{Pj})} , and , E(R_{B}) = sum{w_{Bj}E(R_{Bj})} E(R_{A}) = sum{w_{Pj}E(R_{Pj})} - sum{w_{Bj}E(R_{Bj})}E(RP​)=∑wPj​E(RPj​)andE(RB​)=∑wBj​E(RBj​)E(RA​)=∑wPj​E(RPj​)−∑wBj​E(RBj​) Active return can be decomposed into two parts: . Asset allocation return | Security selection return | 사전적, 사후적으로 측정 가능 . LOS 47.b: Calculate and interpret the information ratio (ex post and ex ante) and contrast it to the Sharpe ratio. . The Sharpe ratio (SR) is calculated as excess return per unit of risk (standard deviation): SR=RP−RFσP SR = frac{R_{P} - R_{F}}{ sigma_{P}}SR=σP​RP​−RF​​ An important attribute of the Sharpe ratio is that it is unaffected by the addition of cash or leverage in the portfolio. . The information ratio (IR) is the ratio of the active return to the standard deviation of active returns, which is known as active risk: IR=RP−RBσ(RP−RB)=RAσA=activereturn⁡activerisk⁡ IR = frac{R_{P} - R_{B}}{ sigma_{(R_{P} - R_{B})}} = frac{R_{A}}{ sigma_{A}} = frac{ operatorname{active return}}{ operatorname{active risk}}IR=σ(RP​−RB​)​RP​−RB​​=σA​RA​​=activeriskactivereturn​ . Some important points . The information ratio that we are considering is usually the ex-ante information ratio. The ex-ante information ratio is generally positive, while ex-post information ratios will often turn out to be negative. | A closet index fund is a fund that is purposed to be actively managed but in reality closely tracks the underlying benchmark index. These funds will have a Sharpe ratio similar to that of the benchmark index, a very low information ratio, and little active risk. After fees, the information ratio of a closet index fund is often negative. | A fund with zero systematic risk that uses the risk-free rate as its benchmark would have an information ratio that is equal to its Sharpe ratio. | Unlike the Sharpe ratio, the information ratio will change with the addition of cash or the use of leverage. Adding cash to a portfolio is likely to lower active return. | The information ratio of an unconstrained portfolio is unaffected by the aggressiveness of the active weights. If the active weights of a portfolio are tripled, the active return and the active risk both triple, leaving the information ratio unchanged. | The resulting blended portfolio will have the same information ratio as the original actively managed portfolio, leaving the information ratio unchanged. | Investors can select an appropriate amount of active risk by investing a portion of their assets in the active portfolio and the remaining portion in the benchmark. | . For an unconstrained active portfolio, the optimal amount of active risk is the level of active risk that maximizes the portfolio’s Sharpe ratio. This optimal amount of active risk can be calculated as: σA∗=IRSRBσBSRP=SRB2+IR2 sigma_{A}^{*} = frac{IR}{SR_{B}} sigma_{B} SR_{P} = sqrt{SR_{B}^{2} + IR^{2}}σA∗​=SRB​IR​σB​SRP​=SRB2​+IR2​ . . LOS 47.c: State and interpret the fundamental law of active portfolio management including its component terms-transfer coefficient, information coefficient, breadth, and active risk (aggressiveness). . The information coefficient (IC) is a measure of a manager’s skill. IC is the ex-ante, risk-weighted correlation between active returns and forecasted active returns. | The transfer coefficient (TC) can be thought of as the correlation between actual active weights and optimal active weights. For an constrained active portfolio, the active weights will be equal to the optimal weight and TC = 1. | Breadth (BR) is the number of independent active bets taken per year. | . IR=TC∗IC∗BRE(RA)=TC∗IC∗BR∗σA IR = TC * IC * sqrt{BR} E(R_{A}) = TC * IC * sqrt{BR} * sigma_{A}IR=TC∗IC∗BR . ​E(RA​)=TC∗IC∗BR . ​∗σA​ . IR의 3가지 구성항목 . Information coefficient - manager skill | Transfer coefficient - 자유도 정도 | breadth - number of independent active part | . Grinold rule - modified active return 개념 . IR을 늘리려면? - IC를 증가시키거나, BR을 늘리거나 . LOS 47.d: Explain how the information ratio may be useful in investment manager selection and choosing the level of active portfolio risk. . Portfolio theory concludes that investors choose some combination of the risk-free asset and an optimal risky portfolio, with the weights determined by their preferences (risk tolerance). The optimal risky portfolio is the portfolio with the highest Sharpe ratio. The portfolio with the highest information ratio will also be the portfolio with the highest Sharpe ratio, so investors will choose the active manager with the highest Sharpe ratio. E(RA)=IR∗σA E(R_{A}) = IR * sigma_{A}E(RA​)=IR∗σA​ 결론 . optimization risk portfolio - highest Sharpe ratio | Highest IR portfolio - highest Sharpe ratio portfolio | . LOS 47.e: Compare active management strategies (including market timing and security selection) and evaluate strategy changes in terms of the fundamental law of active management. . Market timing is simply a bet on the direction of the market (or a segment of the market). IC=2(% of correct⁡)−1 IC = 2( operatorname{ % , of , correct}) - 1IC=2(%ofcorrect)−1 . Sector rotation . Market timing can also be used to make sector rotation decisions. σC=[σX2−2σXσYρXY+σY2]1/2 sigma_{C} = [ sigma_{X}^{2} - 2 sigma{_X} sigma_{Y} rho_{XY} + sigma_{Y}^2]^{1/2}σC​=[σX2​−2σX​σY​ρXY​+σY2​]1/2 시장방향에 베팅 . 우수한 성과를 보이는 sector에 자산 할당 . LOS 47.f: Describe the practical strengths and limitations of the fundamental law of active management. . The practical limitations of the fundamental law of active management can be summarized as “garbage in, garbage out;” poor input estimates lead to incorrect evaluations. In the case of unconstrained optimization, the two components (inputs) that determine the information ratio are 1) the information coefficient (IC) and 2) the breadth (BR) of the manager’s strategy. . The limitations are generally derived from inaccurate estimates of the two inputs: . Ex-ante measurement of skill - Managers tend to overestimate their ability to outperform the market and, hence, overestimate their IC. | Independence - If two or more decisions rely on same (or similar) information, then they are not independent. | . BR=N1+(N−1)rN=number of decisionsr=correlation between the decisions BR = frac{N}{1 + (N - 1)r} N = text{number of decisions} r = text{correlation between the decisions}BR=1+(N−1)rN​N=number of decisionsr=correlation between the decisions . Limitation - ex ante manager skill - 고평가 . independence - 진짜 결정이 다 독립적? . 그래도 성과평과 input이 적으니 편함 . LOS 48.a: Explain the components of execution costs, including explicit and implicit costs. . Evaluation of trade execution should not only consider explicit costs such as brokerage fees but also implicit costs. . Trading costs . Explicit trading costs include brokerage, taxes, and fees. . Implicit costs are harder to measure, and include the bid-ask spread, market or price impact costs, opportunity costs, and delay costs (or slippage). . The bid-ask spread is the highest potential cost for a small trade. | Market impact (or price impact) is the impact of demanding illiquidity in the market. | Delay cost (or slippage) is the cost of an adverse price movement during the lag in executing a large trade. | Opportunity cost arises from unfilled orders or failed trading opportunities. | . Note that there is a tradeoff between the market impact cost on one hand and the delay plus opportunity cost on the other. . Explicit cost - brokerage, taxes, fee | Implicit cost - Bid-ask spread, market impact, delay cost, opportunity cost | tradeoff 존재 - market impact vs delay + opportunity cost . LOS 48.b: Calculate and interpret effective spreads and VWAP transaction cost estimates. . Larger orders have a price impact as they move down the order book (and, therefore, execute at worse prices). This price impact depends on the size of the order and the relative liquidity in the market. . Dealer는 거래중개인 . bid = 삽니다 / ask = 팝니다 -&gt; 둘 사이 차이는 inside spread, 중간은 midquote . large order는 price impact 존재 (해당 단가에 물량이 별로 없다면) -&gt; 대안으로 standing limit order (지정가 주문), 그러나 체결이 안 될 위험있음 . Types of benchmarks . The implicit costs of a trade are measured relative to a benchmark. Several benchmarks can be used to evaluate trades, including the effective spread, VWAP, and implementation shortfall. . Effective spread . The effective spread transactions cost uses the midquote price as the benchmark price. per-share effective spread transaction cost⁡=side⁡+(transactionprice⁡−midquoteprice⁡)side⁡=+1 for buy orders and -1 for sell orderseffectivespread⁡=2∗per-share effective spread transaction cost⁡ operatorname{per-share , effective , spread , transaction , cost} = operatorname{side} + ( operatorname{transaction price} - operatorname{midquote price}) operatorname{side} = text{+1 for buy orders and -1 for sell orders} operatorname{effective spread} = 2 * operatorname{per-share , effective , spread , transaction , cost}per-shareeffectivespreadtransactioncost=side+(transactionprice−midquoteprice)side=+1 for buy orders and -1 for sell orderseffectivespread=2∗per-shareeffectivespreadtransactioncost If the trade occurs at a better price, there will be a price improvement. . Since the effective spread is less than the quoted spread, there was not a price improvement on that trade. . Limitations of effective spread . When a larger order is split into smaller orders, the effective spread is a poor indicator of trade performance. | Effective spread also does not account for slippage or delay costs when part of the order does not get filled at desired prices. | Effective spread does not capture the opportunity cost of a trade. | . Spread는 낮을수록 거래를 잘한 것 . 단점 - 거래량을 무시 -&gt; delay cost, opportunity cost 반영 못함 (거래가 이루어지지 않았을 경우) . Volume-weighted average price (VWAP) . VWAP is easy to interpret-it evaluates the price at which an order was executed relative to other trades occurring during the same time period. . To evaluate a trade, the VWAP of the trade is compared to the benchmark VWAP. VWAPtransactioncost⁡=tradesize⁡∗side⁡∗(tradeVWAP⁡−benchmarkVWAP⁡) operatorname{VWAP transaction cost} = operatorname{trade size} * operatorname{side} * ( operatorname{trade VWAP} - operatorname{benchmark VWAP})VWAPtransactioncost=tradesize∗side∗(tradeVWAP−benchmarkVWAP) Limitations of VWAP transaction cost . VWAP is not useful if the trade being evaluated is a significant part of the trading volume. | VWAP does not capture the price impact cost. | . 하루에 거래한 내역들을 가중평균(거래량 기준)한 가격 . BM VWAP과 비교 . 단점 - 거래량이 영향 -&gt; 거래량이 너무 많으면 BM과 별 차이 없어짐, price impact cost 반영 못함 (단 1개의 거래로 가격이 상승했을 경우) . VWAP의 탄생 -&gt; 장 마감 직전까지 기다렸다가 거래를 하려는 manager들이 생김 -&gt; implementation shortfall 탄생 . LOS 48.c: Describe the implementation shortfall approach to transaction cost measurement. . Implementation shortfall . Implementation shortfall is a conceptual approach that measure transactions costs as the difference between the value of the actual portfolio and the value of hypothetical paper portfolio. . It measures the total cost of trading by capturing all three implicit costs (i.e., price impact, slippage, and opportunity costs). . paper portfolio와 actual portfolio를 비교 . paper portfolio는 가상의 portfolio로 trade가 모두 원래 계왹한 가격에 이루어졌다고 가정 -&gt; actual과의 비교로 price impact, slippage, opportunity costs 모두 잡아냄 . LOS 48.d: Describe factors driving the development of electronic trading systems. . The use of information technology in the development of electronic markets has resulted in lower trading costs and improved execution efficiency. . Factors driving development of electronic trading systems are . Cost | Accuracy | Audit trails | Fraud prevention | Continuous market | . Bond market trades remain largely over the counter. . 기술발달 -&gt; 수요공급자들을 보다 빠르게 연결 -&gt; trading cost 감소, 거래효율성 증가 . 장점 - costs, accuracy, audit trail, fraud prevention, continuous market . 주식시장 대부분 electronic trading, 그러나 아직 채권시장은 dealer에게 많이 의존 (OTC) . LOS 48.e: Describe market fragmentation. . Market fragmentation occurs when a security trades in multiple markets. . Automated trading strategies for large orders seek out liquidity across all markets to minimize the price impact of their trades. . 특정주식이 여러시장에서 거래될 때 -&gt; market fragmentation 발생 -&gt; 각 시장의 liquidity 차이로 cost 발생 가능 . 대안 - 자동화 기술 -&gt; liquidity aggregation - 모든 시장을 다 뒤짐 / smart order - 제일 효율적인 시장 고름 . LOS 48.f: Distinguish among types of electronic traders. . Electronic news traders . These analyze high-speed news feeds and submit market orders (as opposed to limit orders) based on the analysis. . 뉴스를 빠르게 분석하여 시장 거래, AI 사용하기도 함 . Electronic dealers . These post bid and offer prices to profit from the spread. Dealer profit depends on the frequency with which they trade, Electronic dealers maintain a low inventory of actively traded securities and quickly adjust their positions based on market information. . Bid-ask spread로 이익 추구, low inventory (빠르게 position이 adjusted되어서) . Electronic arbitrageurs . These trade in multiple markets seeking to exploit price discrepancies. . price discrepancies 찾아다님 . Electronic front runners . These use artificial intelligence to sniff out large trades (or many small trades) on the same side and then use low latency to trade ahead of them. Front runners search for patterns in order submissions or relationships between orders and events. . 빠르게 행동하는 trader, 대량거래 발생 전에 해당주식 매수하여 매도 (pattern과 event를 분석) . Electronic quote matchers . Standing limit orders provide valuable information to other traders; they disclose the intend of the trader posting the order to buy or sell the specified quantity. . 특정가격에 매수/매도 주문 -&gt; 그 자체만으로도 다른 trader들에게 의미있는 정보 . Buy-side traders . These execute trades on behalf of their portfolio managers. . portfolio manager의 주문을 받아 대신 거래하는 trader . LOS 48.h: Describe comparative advantages of low-latency traders. . In addition to lower trading costs, electronic trading system allow low-latency traders a competitive advantage by jumping the order queue. In other words, electronic traders have to be faster than their competitors to capitalize on market opportunities. . Low-latency traders focus on minimizing the latency involved in three phases of a trade: . The time gap between the publication of actionable news and the receipt of that news by the trader. | The time gap between the receipt of actionable news and deciding on an appropriate action. | The time gap between order determination and communicating that order to the exchange. | Communication speed | Computation speed | . electronic trading -&gt; low latency, 대응속도가 빨라짐 -&gt; 과거보다 빠르게 시장의 개회를 capture 가능 . 1: 시장에서 정보의 발생 -&gt; 2: trader가 정보를 취득 -&gt; 3: trader가 의사결정 후 명령 -&gt; 4: 거래 수행 . 2, 4: communication speed . 3: computation speed . LOS 48.g: Describe characteristics and uses of electronic trading systems. . Advanced order types are limit orders with a dynamic limit price that varies with a benchmark. . Trading tactics are plans calling for the submission of multiple orders. . Algorithms (or algos) are programmed execution strategies using multiple orders, sequencing of orders, and trading tactics to achieve specific goals. . Impact of electronic trading . Hidden orders | Leapfrog - This is the practice of beating the best bid or ask price. A leapfrogging limit order therefore narrows the inside spread. | Flickering quotes - These are exposed limit orders that are submitted and canceled almost immediately. | Electronic arbitrage Take liquidity on both sides - This is an arbitrage trade to buy and sell the same security in different markets to take advantage of mispricing across markets. | Offer liquidity on one side | Offer liquidity on both sides - This strategy is fraught with risks; after one leg of the order is filled, if the other leg does not fill, the trader is exposed to risk of adverse price movement. | | Machine learning - Also known as data mining, machine learning involves using statistical modeling techniques that allow the model to evolve based on new data. | advanced order type - limit order with a dynamic limit price . . algorithms - 미리 설정&amp;프로그램 된 전략으로 trading . Electronic trading의 영향 . hidden orders - 기존 거래방식(bid-ask)을 따르지 않고, 거래정보(단가, 규모)를 공개하지 않은 상태로 거래 | leapfrog - ask 관련 dealer들의 경쟁 심화 -&gt; bid-ask spread가 좁혀짐 | flickering quotes - 주문 후 바로 취소, 상대방이 해당 주문 가격으로 먼저 제안하기를 바라는 전략 (우리 물량은 공개하기 싫을 때) | arbitrage take liquidity on both sides - 다른 시장에서 다른 가격으로 판매되는 security들을 동시에 buy&amp;sell (market order) | offer liquidity on one side - 특정주식을 싼 시장에서 사서 비싼시장에 팔기 (limit order) | offer liquidity on both sides - 특정주식을 best 가격보다 비싸게 사서 다른 시장에 팔기 (limit order) -&gt; 위험노출 | | machine learning - data mining, 통계, 새로운 data로 알고리즘 개발 -&gt; 극단 case에는 안 들어 맞을수도 | LOS 48.i: Describe the risks associated with electronic trading and how regulators mitigate them. . High-frequency traders (HFT) arms race - This arms race offsets some of the lower cost benefits of electronic trading. | Systemic risk Runaway algorithms - These produce a series of unintended orders. The flash crash of May 2010 was caused by a trading algorithm. | Fat finger errors - These are input errors. | Overcharging orders - These demand liquidity significantly higher than what is available in the market. | Malevolent orders - These are created to specifically manipulate the market. Examples includes aggrieved employees programming rogue trades and traders seeking to conduct denial-of-service attacks on their competitors with excessive submission of quotes. | . | . high-frequency trader (HFT) arms race - 최첨단 시설 구축으로 인한 비용 (cost 증가) . systematic risk - 기술의 발달로 인해 피해자들이 발생할 수 있음 . runaway algorithms, fat finger errors, overcharge orders, malevolent orders | . LOS 48.j: Describe abusive trading practices that real-time surveillance of markets may detect. . Front running -This is low-latency trading ahead of known large trades. | Market manipulation - This includes activities that produce false market data, including price and volume data. Trading for market impact - These are trades designed to change the price. | Rumormongering - This involves dissemination of fake information to affect the target trader’s value assessments. | Wash trading - This is trading between commonly controlled accounts to create an impression of false liquidity. | Spoofing or layering - These are fake limit orders posted to create fake optimism or pessimism about the security. | Bluffing - This involves preying on momentum traders. | Gunning the market - This focuses other traders into bad trades. | Squeezing and cornering | . | . front running - low-latency trading head of known large trade . market manipulation - 거짓된 data로 시장 조작 . trading for market impact (시장가격 영향주기) | rumormongering (루머) | wash trading (자전거래) | spoofing &amp; layering (optimism 또는 pessimism으로 시장가보다 다른 가격 제시, 시장 흔들기) | bluffing - 모멘텀 투자자들 | gunning the market - stop-loss 주문한 투자자들 노리기, 대량 short하여 나오는 물량 사기 | squeezing &amp; cornering - 상대방으로 default 위험에 처하게 해서 이익 추구 | .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/05/CFA-Level-2-Portfolio-Management.html",
            "relUrl": "/markdown/2021/10/05/CFA-Level-2-Portfolio-Management.html",
            "date": " • Oct 5, 2021"
        }
        
    
  
    
        ,"post13": {
            "title": "Kaggle Pandas",
            "content": "kaggle Pandas . Creating, Reading and Writing . . . Indexing, Selecting &amp; Assigning . Indexing in pandas . . . Summary Functions and Maps . . Maps . A map is a term, borrowed from mathematics, for a function that takes one set of values and “maps” them to another set of values. . . The function you pass to map() should expect a single value from the Series (a point value, in the above example), and return a transformed version of that value. map() returns a new Series where all the values have been transformed by your function. . . . Exercise . descriptor_counts = pd.Series([reviews[&#39;description&#39;].map(lambda x: &#39;tropical&#39; in x).sum(), reviews[&#39;description&#39;].map(lambda x: &#39;fruity&#39; in x).sum()], index=[&#39;tropical&#39;, &#39;fruity&#39;]) # descriptor_counts # Check your answer q6.check() . Grouping and Sorting . Groupwise analysis . groupby() created a group of reviews which allotted the same point values to the given wines. Then, for each of these groups, we grabbed the points() column and counted how many times it appeared. value_counts() is just a shortcut to this groupby() operation. . . . . Another groupby() method worth mentioning is agg(), which lets you run a bunch of different functions on your DataFrame simultaneously. For example, we can generate a simple statistical summary of the dataset as follows: . . Multi-indexes . . Multi-indices have several methods for dealing with their tiered structure which are absent for single-level indices. They also require two levels of labels to retrieve a value. . . Sorting . sort_values() defaults to an ascending sort, where the lowest values go first. However, most of the time we want a descending sort, where the higher numbers go first. . . . Data Types and Missing Values . Dtypes . The data type for a column in a DataFrame or a Series is known as the dtype. . . float64 means that it’s using a 64-bit floating point number; int64 means a similarly sized integer instead, and so on. . One peculiarity to keep in mind (and on display very clearly here) is that columns consisting entirely of strings do not get their own type; they are instead given the object type. . It’s possible to convert a column of one type into another wherever such a conversion makes sense by using the astype() function. . . Missing data . Entries missing values are given the value NaN, short for “Not a Number”. For technical reasons these NaN values are always of the float64 dtype. . Pandas provides some methods specific to missing data. To select NaN entries you can use pd.isnull() (or its companion pd.notnull()). This is meant to be used thusly: . . Replacing missing values is a common operation. Pandas provides a really handy method for this problem: fillna(). fillna() provides a few different strategies for mitigating such data. . . Or we could fill each missing value with the first non-null value that appears sometime after the given record in the database. This is known as the backfill strategy. . . Renaming and Combining . Renaming . . . . Combining . . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/02/kaggle-Pandas.html",
            "relUrl": "/markdown/2021/10/02/kaggle-Pandas.html",
            "date": " • Oct 2, 2021"
        }
        
    
  
    
        ,"post14": {
            "title": "Kaggle Feature Engineering",
            "content": "kaggle Feature Engineering . What Is Feature Engineering . determine which features are the most important with mutual information | invent new features in several real-world problem domains | encode high-cardinality categoricals with a target encoding | create segmentation features with k-means clustering | decompose a dataset’s variation into features with principal component analysis | . The goal of feature engineering . The goal of feature engineering is simply to make your data better suited to the problem at hand. . You might perform feature engineering to: . improve a model’s predictive performance | reduce computational or data needs | improve interpretability of the results | . A guiding principle of feature engineering . For a feature to be useful, it must have a relationship to the target that your model is able to learn. . The key idea here is that a transformation you apply to a feature becomes in essence a part of the model itself. Say you were trying to predict the Price of square plots of land from the Length of one side. Fitting a linear model directly to Length gives poor results: the relationship is not linear. . Whatever relationships your model can’t learn, you can provide yourself through transformations. As you develop your feature set, think about what information your model could use to achieve its best performance. . Mutual Information . A great first step is to construct a ranking with a feature utility metric, a function measuring associations between a feature and the target. Then you can choose a smaller set of the most useful features to develop initially and have more confidence that your time will be well spent. . The metric we’ll use is called “mutual information”. Mutual information is a lot like correlation in that it measures a relationship between two quantities. The advantage of mutual information is that it can detect any kind of relationship, while correlation only detects linear relationships. . Mutual information is a great general-purpose metric and especially useful at the start of feature development when you might not know what model you’d like to use yet. It is: . easy to use and interpret, | computationally efficient, | theoretically well-founded, | resistant to overfitting, and, | able to detect any kind of relationship | . Mutual information and what it measures . Mutual information describes relationships in terms of uncertainty. The mutual information (MI) between two quantities is a measure of the extent to which knowledge of one quantity reduces uncertainty about the other. . Technical note: What we’re calling uncertainty is measured using a quantity from information theory known as “entropy”. The entropy of a variable means roughly: “how many yes-or-no questions you would need to describe an occurance of that variable, on average.” The more questions you have to ask, the more uncertain you must be about the variable. Mutual information is how many questions you expect the feature to answer about the target. . Interpreting mutual information scores . The least possible mutual information between quantities is 0.0. When MI is zero, the quantities are independent: neither can tell you anything about the other. Conversely, in theory there’s no upper bound to what MI can be. In practice though values above 2.0 or so are uncommon. (Mutual information is a logarithmic quantity, so it increases very slowly.) . Here are some things to remember when applying mutual information: . MI can help you to understand the relative potential of a feature as a predictor of the target, considered by itself. | It’s possible for a feature to be very informative when interacting with other features, but not so informative all alone. MI can’t detect interactions between features. It is a univariate metric. | The actual usefulness of a feature depends on the model you use it with. A feature is only useful to the extent that its relationship with the target is one your model can learn. Just because a feature has a high MI score doesn’t mean your model will be able to do anything with that information. You may need to transform the feature first to expose the association. | . Scikit-learn has two mutual information metrics in its feature_selection module: one for real-valued targets (mutual_info_regression) and one for categorical targets (mutual_info_classif). . . . Creating Features . Tips on Discovering New Features . Understand the features. Refer to your dataset’s data documentation, if available. | Research the problem domain to acquire domain knowledge. If your problem is predicting house prices, do some research on real-estate for instance. Wikipedia can be a good starting point, but books and journal articles will often have the best information. | Study previous work. Solution write-ups from past Kaggle competitions are a great resource. | Use data visualization. Visualization can reveal pathologies in the distribution of a feature or complicated relationships that could be simplified. Be sure to visualize your dataset as you work through the feature engineering process. | . Mathematical transforms . Relationships among numerical features are often expressed through mathematical formulas, which you’ll frequently come across as part of your domain research. In Pandas, you can apply arithmetic operations to columns just as if they were ordinary numbers. . . Data visualization can suggest transformations, often a “reshaping” of a feature through powers or logarithms. . . Counts . Features describing the presence or absence of something often come in sets, the set of risk factors for a disease, say. You can aggregate such features by creating a count. . You could also use a dataframe’s built-in methods to create boolean values. In the Concrete dataset are the amounts of components in a concrete formulation. Many formulations lack one or more components (that is, the component has a value of 0). This will count how many components are in a formulation with the dataframe’s built-in greater-than gt method: . Building-up and breaking-down features . . . Group transforms . Finally we have Group transforms, which aggregate information across multiple rows grouped by some category. If you had discovered a category interaction, a group transform over that categry could be something good to investigate. . . If you’re using training and validation splits, to preserve their independence, it’s best to create a grouped feature using only the training set and then join it to the validation set. We can use the validation set’s merge method after creating a unique set of values with drop_duplicates on the training set: . . Tips on Creating Features It’s good to keep in mind your model’s own strengths and weaknesses when creating features. Here are some guidelines: . Linear models learn sums and differences naturally, but can’t learn anything more complex. | Ratios seem to be difficult for most models to learn. Ratio combinations often lead to some easy performance gains. | Linear models and neural nets generally do better with normalized features. Neural nets especially need features scaled to values not too far from 0. Tree-based models (like random forests and XGBoost) can sometimes benefit from normalization, but usually much less so. | Tree models can learn to approximate almost any combination of features, but when a combination is especially important they can still benefit from having it explicitly created, especially when data is limited. | Counts are especially helpful for tree models, since these models don’t have a natural way of aggregating information across many features at once. | . Clustering With K-Means . Unsupervised algorithms don’t make use of a target; instead, their purpose is to learn some property of the data, to represent the structure of the features in a certain way. In the context of feature engineering for prediction, you could think of an unsupervised algorithm as a “feature discovery” technique. . Clustering simply means the assigning of data points to groups based upon how similar the points are to each other. . Adding a feature of cluster labels can help machine learning models untangle complicated relationships of space or proximity. . Cluster labels as a feature . Applied to a single real-valued feature, clustering acts like a traditional “binning” or “discretization” transform. On multiple features, it’s like “multi-dimensional binning” (sometimes called vector quantization). . . It’s important to remember that this Cluster feature is categorical.Here, it’s shown with a label encoding (that is, as a sequence of integers) as a typical clustering algorithm would produce; depending on your model, a one-hot encoding may be more appropriate. . The motivating idea for adding cluster labels is that the clusters will break up complicated relationships across features into simpler chunks. Our model can then just learn the simpler chunks one-by-one instead having to learn the complicated whole all at once. It’s a “divide and conquer” strategy. . . K-means clustering . There are a great many clustering algorithms. They differ primarily in how they measure “similarity” or “proximity” and in what kinds of features they work with. The algorithm we’ll use, k-means, is intuitive and easy to apply in a feature engineering context. Depending on your application another algorithm might be more appropriate. . K-means clustering measures similarity using ordinary straight-line distance (Euclidean distance, in other words). It creates clusters by placing a number of points, called centroids, inside the feature-space. Each point in the dataset is assigned to the cluster of whichever centroid it’s closest to. The “k” in “k-means” is how many centroids (that is, clusters) it creates. You define the k yourself. . You could imagine each centroid capturing points through a sequence of radiating circles. When sets of circles from competing centroids overlap they form a line. The result is what’s called a Voronoi tessallation. The tessallation shows you to what clusters future data will be assigned; the tessallation is essentially what k-means learns from its training data. . . We’ll focus on three parameters from scikit-learn’s implementation: n_clusters, max_iter, and n_init. . It’s a simple two-step process. The algorithm starts by randomly initializing some predefined number (n_clusters) of centroids. It then iterates over these two operations: . assign points to the nearest cluster centroid | move each centroid to minimize the distance to its points | It iterates over these two steps until the centroids aren’t moving anymore, or until some maximum number of iterations has passed (max_iter). . It often happens that the initial random position of the centroids ends in a poor clustering. For this reason the algorithm repeats a number of times (n_init) and returns the clustering that has the least total distance between each point and its centroid, the optimal clustering. . . You may need to increase the max_iter for a large number of clusters or n_init for a complex dataset. Ordinarily though the only parameter you’ll need to choose yourself is n_clusters (k, that is). The best partitioning for a set of features depends on the model you’re using and what you’re trying to predict, so it’s best to tune it like any hyperparameter (through cross-validation, say). . Since k-means clustering is sensitive to scale, it can be a good idea rescale or normalize data with extreme values. . Exercise . . X = df.copy() y = X.pop(&quot;SalePrice&quot;) # YOUR CODE HERE: Define a list of the features to be used for the clustering features = [&#39;LotArea&#39;, &#39;TotalBsmtSF&#39;, &#39;FirstFlrSF&#39;, &#39;SecondFlrSF&#39;, &#39;GrLivArea&#39;] # Standardize X_scaled = X.loc[:, features] X_scaled = (X_scaled - X_scaled.mean(axis=0)) / X_scaled.std(axis=0) # YOUR CODE HERE: Fit the KMeans model to X_scaled and create the cluster labels kmeans = KMeans(n_clusters=10, n_init=10, random_state=0) X[&quot;Cluster&quot;] = kmeans.fit_predict(X_scaled) # Check your answer q_2.check() . Principal Component Analysis . Just like clustering is a partitioning of the dataset based on proximity, you could think of PCA as a partitioning of the variation in the data. PCA is a great tool to help you discover important relationships in the data and can also be used to create more informative features. . (Technical note: PCA is typically applied to standardized data. With standardized data “variation” means “correlation”. With unstandardized data “variation” means “covariance”. All data in this course will be standardized before applying PCA.) . Principal component analysis . . Notice that instead of describing abalones by their &#39;Height&#39; and &#39;Diameter&#39;, we could just as well describe them by their &#39;Size&#39; and &#39;Shape&#39;. This, in fact, is the whole idea of PCA: instead of describing the data with the original features, we describe it with its axes of variation. The axes of variation become the new features. . . These new features are called the principal components of the data. The weights themselves are called loadings. There will be as many principal components as there are features in the original dataset: if we had used ten features instead of two, we would have ended up with ten components. . PCA also tells us the amount of variation in each component. We can see from the figures that there is more variation in the data along the Size component than along the Shape component. PCA makes this precise through each component’s percent of explained variance. . . The Size component captures the majority of the variation between Height and Diameter. It’s important to remember, however, that the amount of variance in a component doesn’t necessarily correspond to how good it is as a predictor: it depends on what you’re trying to predict. . PCA for feature engineering . The first way is to use it as a descriptive technique. Since the components tell you about the variation, you could compute the MI scores for the components and see what kind of variation is most predictive of your target. That could give you ideas for kinds of features to create – a product of &#39;Height&#39; and &#39;Diameter&#39; if &#39;Size&#39; is important, say, or a ratio of &#39;Height&#39; and &#39;Diameter&#39; if Shape is important. You could even try clustering on one or more of the high-scoring components. . The second way is to use the components themselves as features. Because the components expose the variational structure of the data directly, they can often be more informative than the original features. Here are some use-cases: . Dimensionality reduction: When your features are highly redundant (multicollinear, specifically), PCA will partition out the redundancy into one or more near-zero variance components, which you can then drop since they will contain little or no information. | Anomaly detection: Unusual variation, not apparent from the original features, will often show up in the low-variance components. These components could be highly informative in an anomaly or outlier detection task. | Noise reduction: A collection of sensor readings will often share some common background noise. PCA can sometimes collect the (informative) signal into a smaller number of features while leaving the noise alone, thus boosting the signal-to-noise ratio. | Decorrelation: Some ML algorithms struggle with highly-correlated features. PCA transforms correlated features into uncorrelated components, which could be easier for your algorithm to work with. | . PCA basically gives you direct access to the correlational structure of your data. . PCA Best Practices There are a few things to keep in mind when applying PCA: . PCA only works with numeric features, like continuous quantities or counts. | PCA is sensitive to scale. It’s good practice to standardize your data before applying PCA, unless you know you have good reason not to. | Consider removing or constraining outliers, since they can an have an undue influence on the results. | . . . . . Target Encoding . target encoding, is instead meant for categorical features. It’s a method of encoding categories as numbers, like one-hot or label encoding, with the difference that it also uses the target to create the encoding. This makes it what we call a supervised feature engineering technique. . A target encoding is any kind of encoding that replaces a feature’s categories with some number derived from the target. . This kind of target encoding is sometimes called a mean encoding. Applied to a binary target, it’s also called bin counting. (Other names you might come across include: likelihood encoding, impact encoding, and leave-one-out encoding.) . Smoothing . An encoding like this presents a couple of problems, however. First are unknown categories. Target encodings create a special risk of overfitting, which means they need to be trained on an independent “encoding” split. When you join the encoding to future splits, Pandas will fill in missing values for any categories not present in the encoding split. These missing values you would have to impute somehow. . Second are rare categories. When a category only occurs a few times in the dataset, any statistics calculated on its group are unlikely to be very accurate. . A solution to these problems is to add smoothing. The idea is to blend the in-category average with the overall average. Rare categories get less weight on their category average, while missing categories just get the overall average. . . When choosing a value for m, consider how noisy you expect the categories to be. Does the price of a vehicle vary a great deal within each make? Would you need a lot of data to get good estimates? If so, it could be better to choose a larger value for m; if the average price for each make were relatively stable, a smaller value could be okay. . Use Cases for Target Encoding Target encoding is great for: . High-cardinality features: A feature with a large number of categories can be troublesome to encode: a one-hot encoding would generate too many features and alternatives, like a label encoding, might not be appropriate for that feature. A target encoding derives numbers for the categories using the feature’s most important property: its relationship with the target. | Domain-motivated features: From prior experience, you might suspect that a categorical feature should be important even if it scored poorly with a feature metric. A target encoding can help reveal a feature’s true informativeness. | .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/02/kaggle-Feature-Engineering.html",
            "relUrl": "/markdown/2021/10/02/kaggle-Feature-Engineering.html",
            "date": " • Oct 2, 2021"
        }
        
    
  
    
        ,"post15": {
            "title": "Kaggle Data Cleaning",
            "content": "kaggle Data Cleaning . Handling Missing Values . How many missing data points do we have? . # get the number of missing data points per column missing_values_count = nfl_data.isnull().sum() # look at the # of missing points in the first ten columns missing_values_count[0:10] . # how many total missing values do we have? total_cells = np.product(nfl_data.shape) total_missing = missing_values_count.sum() # percent of data that is missing percent_missing = (total_missing/total_cells) * 100 print(percent_missing) . Figure out why the data is missing . This is the point at which we get into the part of data science that I like to call “data intution”, by which I mean “really looking at your data and trying to figure out why it is the way it is and how that will affect your analysis”. . For dealing with missing values, you’ll need to use your intution to figure out why the value is missing. One of the most important questions you can ask yourself to help figure this out is this: . Is this value missing because it wasn’t recorded or because it doesn’t exist? . If a value is missing becuase it doesn’t exist (like the height of the oldest child of someone who doesn’t have any children) then it doesn’t make sense to try and guess what it might be. These values you probably do want to keep as NaN. On the other hand, if a value is missing because it wasn’t recorded, then you can try to guess what it might have been based on the other values in that column and row. This is called imputation. . If you’re doing very careful data analysis, this is the point at which you’d look at each column individually to figure out the best strategy for filling those missing values. . Drop missing values . If you’re in a hurry or don’t have a reason to figure out why your values are missing, one option you have is to just remove any rows or columns that contain missing values. (Note: I don’t generally recommend this approch for important projects! It’s usually worth it to take the time to go through your data and really look at all the columns with missing values one-by-one to really get to know your dataset.) . If you’re sure you want to drop rows with missing values, pandas does have a handy function, dropna() to help you do this. . Filling in missing values automatically . We can use the Panda’s fillna() function to fill in missing values in a dataframe for us. One option we have is to specify what we want the NaN values to be replaced with. . I could also be a bit more savvy and replace missing values with whatever value comes directly after it in the same column. (This makes a lot of sense for datasets where the observations have some sort of logical order to them.) . # replace all NA&#39;s the value that comes directly after it in the same column, # then replace all the remaining na&#39;s with 0 subset_nfl_data.fillna(method=&#39;bfill&#39;, axis=0).fillna(0) . Exercise . # TODO: Your code here! sf_permits.head() . # TODO: Your code here! percent_missing = sf_permits.isnull().sum().sum() / np.product(sf_permits.shape) * 100 # Check your answer q2.check() . . . # TODO: Your code here sf_permits_with_na_dropped = sf_permits.dropna(axis=1) dropped_columns = len(sf_permits.columns) - len(sf_permits_with_na_dropped.columns) # Check your answer q5.check() . # TODO: Your code here sf_permits_with_na_imputed = sf_permits.fillna(method=&#39;bfill&#39;, axis=0).fillna(0) # Check your answer q6.check() . Scaling and Normalization . Scaling vs. Normalization: What’s the difference? . in scaling, you’re changing the range of your data, while | in normalization, you’re changing the shape of the distribution of your data. | . Scaling . This means that you’re transforming your data so that it fits within a specific scale, like 0-100 or 0-1. . By scaling your variables, you can help compare different variables on equal footing. . Notice that the shape of the data doesn’t change, but that instead of ranging from 0 to 8ish, it now ranges from 0 to 1. . Normalization . Normalization is a more radical transformation. The point of normalization is to change your observations so that they can be described as a normal distribution. . In general, you’ll normalize your data if you’re going to be using a machine learning or statistics technique that assumes your data is normally distributed . Notice that the shape of our data has changed. Before normalizing it was almost L-shaped. But after normalizing it looks more like the outline of a bell (hence “bell curve”). . Exercise . # TODO: Your code here scaled_goal_data = minmax_scaling(original_goal_data, [&#39;goal&#39;], 0, 1) # Check your answer q1.check() . Parsing Dates . . Notice that at the bottom of the output of head(), you can see that it says that the data type of this column is “object”. . Pandas uses the “object” dtype for storing various types of data types, but most often when you see a column with the dtype “object” it will have strings in it. . If you check the pandas dtype documentation here, you’ll notice that there’s also a specific datetime64 dtypes. Because the dtype of our column is object rather than datetime64, we can tell that Python doesn’t know that this column contains dates. . . You may have to check the numpy documentation to match the letter code to the dtype of the object. “O” is the code for “object”, so we can see that these two methods give us the same information. . Convert our date columns to datetime . We can pandas what the format of our dates are with a guide called as “strftime directive”, which you can find more information on at this link. The basic idea is that you need to point out which parts of the date are where and what punctuation is between them. There are lots of possible parts of a date, but the most common are %d for day, %m for month, %y for a two-digit year and %Y for a four digit year. . Some examples: . 1/17/07 has the format “%m/%d/%y” | 17-1-2007 has the format “%d-%m-%Y” | . . . What if I run into an error with multiple date formats? While we’re specifying the date format here, sometimes you’ll run into an error when there are multiple date formats in a single column. If that happens, you have have pandas try to infer what the right date format should be. You can do that like so: | . landslides[&#39;date_parsed&#39;] = pd.to_datetime(landslides[&#39;Date&#39;], infer_datetime_format=True) . Why don’t you always use infer_datetime_format = True? There are two big reasons not to always have pandas guess the time format. The first is that pandas won’t always been able to figure out the correct date format, especially if someone has gotten creative with data entry. The second is that it’s much slower than specifying the exact format of the dates. | . Selecting the day of the month . . Plot the day of the month to check the date parsing . One of the biggest dangers in parsing dates is mixing up the months and days. The to_datetime() function does have very helpful error messages, but it doesn’t hurt to double-check that the days of the month we’ve extracted make sense. . To do this, let’s plot a histogram of the days of the month. We expect it to have values between 1 and 31 and, since there’s no reason to suppose the landslides are more common on some days of the month than others, a relatively even distribution. (With a dip on 31 because not all months have 31 days.) Let’s see if that’s the case: . . Character Encodings . What are encodings? . Character encodings are specific sets of rules for mapping from raw binary byte strings (that look like this: 0110100001101001) to characters that make up human-readable text (like “hi”). There are many different encodings, and if you tried to read in text with a different encoding than the one it was originally written in, you ended up with scrambled text called “mojibake” (said like mo-gee-bah-kay). Here’s an example of mojibake: . æ–‡å—åŒ–ã?? . You might also end up with a “unknown” characters. There are what gets printed when there’s no mapping between a particular byte and a character in the encoding you’re using to read your byte string in and they look like this: . ���������� . Character encoding mismatches are less common today than they used to be, but it’s definitely still a problem. There are lots of different character encodings, but the main one you need to know is UTF-8. . UTF-8 is the standard text encoding. All Python code is in UTF-8 and, ideally, all your data should be as well. It’s when things aren’t in UTF-8 that you run into trouble. . . If you look at a bytes object, you’ll see that it has a b in front of it, and then maybe some text after. That’s because bytes are printed out as if they were characters encoded in ASCII. (ASCII is an older character encoding that doesn’t really work for writing any language other than English.) Here you can see that our euro symbol has been replaced with some mojibake that looks like “ xe2 x82 xac” when it’s printed as if it were an ASCII string. . . However, when we try to use a different encoding to map our bytes into a string, we get an error. This is because the encoding we’re trying to use doesn’t know what to do with the bytes we’re trying to pass it. You need to tell Python the encoding that the byte string is actually supposed to be in. . Like I said earlier, strings are UTF-8 by default in Python 3, so if we try to treat them like they were in another encoding we’ll create problems. . . Reading in files with encoding problems . Notice that we get the same UnicodeDecodeError we got when we tried to decode UTF-8 bytes as if they were ASCII! This tells us that this file isn’t actually UTF-8. We don’t know what encoding it actually is though. One way to figure it out is to try and test a bunch of different character encodings and see if any of them work. A better way, though, is to use the chardet module to try and automatically guess what the right encoding is. It’s not 100% guaranteed to be right, but it’s usually faster than just trying to guess. . . . What if the encoding chardet guesses isn’t right? Since chardet is basically just a fancy guesser, sometimes it will guess the wrong encoding. One thing you can try is looking at more or less of the file and seeing if you get a different result and then try that. . Saving your files with UTF-8 encoding . The good news is, since UTF-8 is the standard encoding in Python, when you save a file it will be saved as UTF-8 by default: . Exercise . new_entry = sample_entry.decode(&#39;big5-tw&#39;).encode(&#39;utf-8&#39;) # Check your answer q1.check() . # TODO: Load in the DataFrame correctly. with open(&quot;../input/fatal-police-shootings-in-the-us/PoliceKillingsUS.csv&quot;, &#39;rb&#39;) as rawdata: result = chardet.detect(rawdata.read(30000)) print(result) police_killings = pd.read_csv(&quot;../input/fatal-police-shootings-in-the-us/PoliceKillingsUS.csv&quot;, encoding=&#39;Windows-1252&#39;) # Check your answer q2.check() . # TODO: Save the police killings dataset to CSV police_killings.to_csv(&quot;/kaggle/working/my_file.csv&quot;) # Check your answer q3.check() . Inconsistent Data Entry . Do some preliminary text pre-processing . . Use fuzzy matching to correct inconsistent data entry . We’re going to use the fuzzywuzzy package to help identify which strings are closest to each other. This dataset is small enough that we could probably could correct errors by hand, but that approach doesn’t scale well. . Fuzzy matching: The process of automatically finding text strings that are very similar to the target string. In general, a string is considered “closer” to another one the fewer characters you’d need to change if you were transforming one string into another. So “apple” and “snapple” are two changes away from each other (add “s” and “n”) while “in” and “on” and one change away (rplace “i” with “o”). You won’t always be able to rely on fuzzy matching 100%, but it will usually end up saving you at least a little time. . Fuzzywuzzy returns a ratio given two strings. The closer the ratio is to 100, the smaller the edit distance between the two strings. . . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/02/kaggle-Data-Cleaning.html",
            "relUrl": "/markdown/2021/10/02/kaggle-Data-Cleaning.html",
            "date": " • Oct 2, 2021"
        }
        
    
  
    
        ,"post16": {
            "title": "Kaggle Intro to AI Ethics",
            "content": "kaggle Intro to AI Ethics . These technologies have the potential to harm or help the people that they serve. By applying an ethical lens, we can work toward identifying the harms that these technologies can cause to people and we can design and build them to reduce these harms - or decide not to build them. . This course covers several topics: . In the human-centered design lesson, you’ll learn how to design an AI system to ensure that it serves the needs of the people that it is intended for. | In the bias lesson, you’ll determine how AI systems can learn to discriminate against certain groups. | In the fairness lesson, you’ll learn to quantify the extent of the bias in AI systems. | In the model cards lesson, you’ll learn how to use a popular framework for improving public accountability for AI models. | . Human-Centered Design for AI . Before selecting data and training models, it is important to carefully consider the human needs an AI system should serve - and if it should be built at all. . Human-centered design (HCD) is an approach to designing systems that serve people’s needs. . 6 steps . 1. Understand people’s needs to define the problem. . Your entire team – including data scientists and engineers – should be involved in this step, so that every team member gains an understanding of the people they hope to serve. Your team should include and involve people with diverse perspectives and backgrounds, along race, gender, and other characteristics. Sharpen your problem definition and brainstorm creative and inclusive solutions together. . 2. Ask if AI adds value to any potential solution. . Would people generally agree that what you are trying to achieve is a good outcome? | Would non-AI systems - such as rule-based solutions, which are easier to create, audit and maintain - be significantly less effective than an AI system? | Is the task that you are using AI for one that people would find boring, repetitive or otherwise difficult to concentrate on? | Have AI solutions proven to be better than other solutions for similar use cases in the past? | . If you answered no to any of these questions, an AI solution may not be necessary or appropriate. . 3. Consider the potential harms that the AI system could cause . Weigh the benefits of using AI against the potential harms, throughout the design pipeline: from collecting and labeling data, to training a model, to deploying the AI system. Consider the impact on users and on society. Your privacy team can help uncover hidden privacy issues and determine whether privacy-preserving techniques like differential privacy or federated learning may be appropriate. Take steps to reduce harms, including by embedding people - and therefore human judgment - more effectively in data selection, in model training and in the operation of the system. If you estimate that the harms are likely to outweigh the benefits, do not build the system. . example . An online education company wants to use an AI system to ‘read’ and automatically assign scores to student essays, while redirecting company staff to double-check random essays and to review essays that the AI system has trouble with. The system would enable the company to quickly get scores back to students. The company creates a harms review committee, which recommends that the system not be built. Some of the major harms flagged by the committee include: the potential for the AI system to pick up bias against certain patterns of language from training data and amplify it (harming people in the groups that use those patterns of language), to encourage students to ‘game’ the algorithm rather than improve their essays and to reduce the classroom role of education experts while increasing the role of technology experts. . 4. Prototype, starting with non-AI solutions . Develop a non-AI prototype of your AI system quickly to see how people interact with it. This makes prototyping easier, faster and less expensive. It also gives you early information about what users expect from your system and how to make their interactions more rewarding and meaningful. . The people giving feedback should have diverse backgrounds – including along race, gender, expertise and other characteristics. They should also understand and consent to what they are helping with and how. . 5. Provide ways for people to challenge the system . People who use your AI system once it is live should be able to challenge its recommendations or easily opt out of using it. Put systems and tools in place to accept, monitor and address challenges. . Talk to users and think from the perspective of a user: if you are curious or dissatisfied with the system’s recommendations, would you want to challenge it by: . Requesting an explanation of how it arrived at its recommendation? | Requesting a change in the information you input? | Turning off certain features? | Reaching out to the product team on social media? | Taking some other action? | . 6. Build in safety measures . Safety measures protect users against harm. They seek to limit unintended behavior and accidents, by ensuring that a system reliably delivers high-quality outcomes. This can only be achieved through extensive and continuous evaluation and testing. Design processes around your AI system to continuously monitor performance, delivery of intended benefits, reduction of harms, fairness metrics and any changes in how people are actually using it. . Human oversight of your AI system is crucial: . Create a human ‘red team’ to play the role of a person trying to manipulate your system into unintended behavior. Then, strengthen your system against any such manipulation. | Determine how people in your organization can best monitor the system’s safety once it is live. | Explore ways for your AI system to quickly alert a human when it is faced with a challenging case. | Create ways for users and others to flag potential safety issues. | . Identifying bias in AI . ML applications have discriminated against individuals on the basis of race, sex, religion, socioeconomic status, and other categories. . Bias is complex . Bias in data is complex. Flawed data can also result in representation bias (covered later in this tutorial), if a group is underrepresented in the training data. For instance, when training a facial detection system, if the training data contains mostly individuals with lighter skin tones, it will fail to perform well for users with darker skin tones. A third type of bias that can arise from the training data is called measurement bias, which you’ll learn about below. . bias can also result from the way in which the ML model is defined, from the way the model is compared to other models, and from the way that everyday users interpret the final results of the model. Harm can come from anywhere in the ML process. . 6 types of bias . Historical bias . Historical bias occurs when the state of the world in which the data was generated is flawed. . Measurement bias . Measurement bias occurs when the accuracy of the data varies across groups. This can happen when working with proxy variables (variables that take the place of a variable that cannot be directly measured), if the quality of the proxy varies in different groups. . Aggregation bias . Aggregation bias occurs when groups are inappropriately combined, resulting in a model that does not perform well for any group or only performs well for the majority group. (This is often not an issue, but most commonly arises in medical applications.) . Evaluation bias . Evaluation bias occurs when evaluating a model, if the benchmark data (used to compare the model to other models that perform similar tasks) does not represent the population that the model will serve. . Deployment bias . Deployment bias occurs when the problem the model is intended to solve is different from the way it is actually used. If the end users don’t use the model in the way it is intended, there is no guarantee that the model will perform well. . Note that these are not mutually exclusive: that is, an ML application can easily suffer from more than one type of bias. . . . . AI Fairness . Four fairness criteria . 1. Demographic parity / statistical parity . Demographic parity says the model is fair if the composition of people who are selected by the model matches the group membership percentages of the applicants. . A nonprofit is organizing an international conference, and 20,000 people have signed up to attend. The organizers write a ML model to select 100 attendees who could potentially give interesting talks at the conference. Since 50% of the attendees will be women (10,000 out of 20,000), they design the model so that 50% of the selected speaker candidates are women. . 2. Equal oppportunity . Equal opportunity fairness ensures that the proportion of people who should be selected by the model (“positives”) that are correctly selected by the model is the same for each group. We refer to this proportion as the true positive rate (TPR) or sensitivity of the model. . 3. Equal accuracy . Alternatively, we could check that the model has equal accuracy for each group. That is, the percentage of correct classifications (people who should be denied and are denied, and people who should be approved who are approved) should be the same for each group. . 4. Group unaware / “Fairness through unawareness” . Group unaware fairness removes all group membership information from the dataset. For instance, we can remove gender data to try to make the model fair to different gender groups. Similarly, we can remove information about race or age. . One difficulty of applying this approach in practice is that one has to be careful to identify and remove proxies for the group membership data. For instance, in cities that are racially segregated, zip code is a strong proxy for race. That is, when the race data is removed, the zip code data should also be removed, or else the ML application may still be able to infer an individual’s race from the data. Additionally, group unaware fairness is unlikely to be a good solution for historical bias. . Confusion matrix . . Note that *group unaware* fairness cannot be detected from the confusion matrix, and is more concerned with removing group membership information from the dataset. . Also note that none of the examples satisfy more than one type of fairness. For instance, the demographic parity example does not satisfy equal accuracy or equal opportunity. Take the time to verify this now. In practice, it is not possible to optimize a model for more than one type of fairness: to read more about this, explore the Impossibility Theorem of Machine Fairness. So which fairness criterion should you select, if you can only satisfy one? As with most ethical questions, the correct answer is usually not straightforward, and picking a criterion should be a long conversation involving everyone on your team. . When working with a real project, the data will be much, much larger. In this case, confusion matrices are still a useful tool for analyzing model performance. One important thing to note, however, is that real-world models typically cannot be expected to satisfy any fairness definition perfectly. . Exercise . . . . Model Cards . A model card is a short document that provides key information about a machine learning model. Model cards increase transparency by communicating information about trained models to broad audiences. . AI researchers are exploring many ways to communicate key information about models to inform people who use AI systems, people who are affected by AI systems and others. . Model cards - introduced in a 2019 paper - are one way for teams to communicate key information about their AI system to a broad audience. This information generally includes intended uses for the model, how the model works, and how the model performs in different situations. . Who is the audience of your model card? . A model card should strike a balance between being easy-to-understand and communicating important technical information. When writing a model card, you should consider your audience: the groups of people who are most likely to read your model card. These groups will vary according to the AI system’s purpose. . What sections should a model card contain? . 1. Model Details . Include background information, such as developer and model version. | . 2. Intended Use . What use cases are in scope? | Who are your intended users? | What use cases are out of scope? | . 3. Factors . What factors affect the impact of the model? | . 4. Metrics . What metrics are you using to measure the performance of the model? Why did you pick those metrics? For classification systems – in which the output is a class label – potential error types include false positive rate, false negative rate, false discovery rate, and false omission rate. The relative importance of each of these depends on the use case. | For score-based analyses – in which the output is a score or price – consider reporting model performance across groups. | . | . 5. Evaluation Data . Which datasets did you use to evaluate model performance? Provide the datasets if you can. | Why did you choose these datasets for evaluation? | Are the datasets representative of typical use cases, anticipated test cases and/or challenging cases? | . 6. Training Data . Which data was the model trained on? | . 7. quantitative Analyses . How did the model perform on the metrics you chose? Break down performance by important factors and their intersections. | . 8. Ethical Considerations . Describe ethical considerations related to the model, such as sensitive data used to train the model, whether the model has implications for human life, health, or safety, how risk was mitigated, and what harms may be present in model usage. | . 9. Caveats and Recommendations . Add anything important that you have not covered elsewhere in the model card. | . How can you use model cards in your organization? . The use of detailed model cards can often be challenging because an organization may not want to reveal its processes, proprietary data or trade secrets. In such cases, the developer team should think about how model cards can be useful and empowering, without including sensitive information. . Learn more . To dive deeper into the application of HCD to AI, check out these resources: . Lex Fridman’s introductory lecture on Human-Centered Artificial Intelligence | Google’s People + AI Research (PAIR) Guidebook | Stanford Human-Centered Artificial Intelligence (HAI) research | . To continue learning about bias, check out the Jigsaw Unintended Bias in Toxicity Classification competition that was introduced in this exercise. . Kaggler Dieter has written a helpful two-part series that teaches you how to preprocess the data and train a neural network to make a competition submission. Get started here. | Many Kagglers have written helpful notebooks that you can use to get started. Check them out on the competition page. | . Another Kaggle competition that you can use to learn about bias is the Inclusive Images Challenge, which you can read more about in this blog post. The competition focuses on evaluation bias in computer vision. . Explore different types of fairness with an interactive tool. | You can read more about equal opportunity in this blog post. | Analyze ML fairness with this walkthrough of the What-If Tool, created by the People and AI Research (PAIR) team at Google. This tool allows you to quickly amend an ML model, once you’ve picked the fairness criterion that is best for your use case. | .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/02/kaggle-AI-ethics.html",
            "relUrl": "/markdown/2021/10/02/kaggle-AI-ethics.html",
            "date": " • Oct 2, 2021"
        }
        
    
  
    
        ,"post17": {
            "title": "Tiny Python Project chapter 5 ~ 8",
            "content": "Tiny Python Project Chapter 5 ~ 8 . Chapter 5 . . . . . . . . . . . . . . . . . . . #!/usr/bin/env python3 &quot;&quot;&quot; Author : runner &lt;runner@9762e84df2b1&gt; Date : 2021-10-01 Purpose: Rock the Casbah &quot;&quot;&quot; import argparse import os import sys # -- def get_args(): &quot;&quot;&quot;Get command-line arguments&quot;&quot;&quot; parser = argparse.ArgumentParser( description=&#39;Rock the Casbah&#39;, formatter_class=argparse.ArgumentDefaultsHelpFormatter) parser.add_argument(&#39;text&#39;, metavar=&#39;text&#39;, type=str, help=&#39;Input string or file&#39;) parser.add_argument(&#39;-o&#39;, &#39;--outfile&#39;, help=&#39;Output filename&#39;, metavar=&#39;str&#39;, type=str, default=&#39;&#39;) args = parser.parse_args() if os.path.isfile(args.text): args.text = open(args.text).read().rstrip() return args # -- def main(): &quot;&quot;&quot;Make a jazz noise here&quot;&quot;&quot; args = get_args() text_arg = args.text filename_arg = args.outfile out_fh = open(filename_arg, &#39;wt&#39;) if filename_arg else sys.stdout out_fh.write(text_arg.upper() + &#39; n&#39;) out_fh.close() # -- if __name__ == &#39;__main__&#39;: main() . . . . . . . Chapter 6 . . . . . #!/usr/bin/env python3 &quot;&quot;&quot; Author : runner &lt;runner@9762e84df2b1&gt; Date : 2021-10-01 Purpose: Rock the Casbah &quot;&quot;&quot; import argparse import sys # -- def get_args(): &quot;&quot;&quot;Get command-line arguments&quot;&quot;&quot; parser = argparse.ArgumentParser( description=&#39;Rock the Casbah&#39;, formatter_class=argparse.ArgumentDefaultsHelpFormatter) parser.add_argument(&#39;file&#39;, metavar=&#39;FILE&#39;, nargs=&#39;*&#39;, type=argparse.FileType(&#39;rt&#39;), default=[sys.stdin], help=&#39;Input file(s)&#39;) return parser.parse_args() # -- def main(): &quot;&quot;&quot;Make a jazz noise here&quot;&quot;&quot; args = get_args() totalLineCounts, totalWordsCounts, totalByteCounts = 0, 0, 0 for fh in args.file: lineCounts, wordsCounts, byteCounts = 0, 0, 0 for l in fh: lineCounts += 1; wordsCounts += len(l.split()) byteCounts += len(l) totalLineCounts += lineCounts totalWordsCounts += wordsCounts totalByteCounts += byteCounts print(f&#39;{lineCounts:8}{wordsCounts:8}{byteCounts:8} {fh.name}&#39;) if len(args.file) &gt; 1: print(f&#39;{totalLineCounts:8}{totalWordsCounts:8}{totalByteCounts:8} total&#39;) # -- if __name__ == &#39;__main__&#39;: main() . . . Chapter 7 . . . . #!/usr/bin/env python3 &quot;&quot;&quot; Author : runner &lt;runner@f139ec3a85b3&gt; Date : 2021-10-01 Purpose: Rock the Casbah &quot;&quot;&quot; import argparse # -- def get_args(): &quot;&quot;&quot;Get command-line arguments&quot;&quot;&quot; parser = argparse.ArgumentParser( description=&#39;Rock the Casbah&#39;, formatter_class=argparse.ArgumentDefaultsHelpFormatter) parser.add_argument(&#39;letter&#39;, metavar=&#39;letter&#39;, nargs=&#39;+&#39;, help=&#39;Letter(s)&#39;,) parser.add_argument(&#39;-f&#39;, &#39;--file&#39;, help=&#39;Input file&#39;, metavar=&#39;FILE&#39;, type=argparse.FileType(&#39;rt&#39;), default=&#39;gashlycrumb.txt&#39;) return parser.parse_args() # -- def main(): &quot;&quot;&quot;Make a jazz noise here&quot;&quot;&quot; args = get_args() sentenceDict = {v[0]: v for v in args.file} for letter in args.letter: if (letter.upper() not in sentenceDict.keys()): print(&#39;I do not know &quot;{} &quot;.&#39;.format(letter)) continue print(sentenceDict[letter.upper()], end=&#39;&#39;) # -- if __name__ == &#39;__main__&#39;: main() . . . . . Chapter 8 . . . . . . #!/usr/bin/env python3 &quot;&quot;&quot; Author : runner &lt;runner@c71caa78d29f&gt; Date : 2021-10-01 Purpose: Rock the Casbah &quot;&quot;&quot; import argparse import os # -- def get_args(): &quot;&quot;&quot;Get command-line arguments&quot;&quot;&quot; parser = argparse.ArgumentParser( description=&#39;Apples and bananas&#39;, formatter_class=argparse.ArgumentDefaultsHelpFormatter) parser.add_argument(&#39;text&#39;, metavar=&#39;text&#39;, help=&#39;Input text or file&#39;) parser.add_argument(&#39;-v&#39;, &#39;--vowel&#39;, help=&#39;The vowel to substitute&#39;, metavar=&#39;vowel&#39;, type=str, default=&#39;a&#39;, choices=[&#39;a&#39;, &#39;e&#39;, &#39;i&#39;, &#39;o&#39;, &#39;u&#39;]) args = parser.parse_args() if os.path.isfile(args.text): args.text = open(args.text).read().rstrip() return args # -- def main(): &quot;&quot;&quot;Make a jazz noise here&quot;&quot;&quot; args = get_args() text_arg = args.text vowel_arg = args.vowel if text_arg.isupper(): vowel_dict = {v: vowel_arg.upper() for v in [&#39;a&#39;, &#39;e&#39;, &#39;i&#39;, &#39;o&#39;, &#39;u&#39;, &#39;A&#39;, &#39;E&#39;, &#39;I&#39;, &#39;O&#39;, &#39;U&#39;]} else: vowel_dict = {v: vowel_arg.lower() for v in [&#39;a&#39;, &#39;e&#39;, &#39;i&#39;, &#39;o&#39;, &#39;u&#39;, &#39;A&#39;, &#39;E&#39;, &#39;I&#39;, &#39;O&#39;, &#39;U&#39;]} new = &#39;&#39; new = text_arg.translate(str.maketrans(vowel_dict)) print(new) # -- if __name__ == &#39;__main__&#39;: main() . . . . . . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/10/01/tiny-python-project-chapter-5~8.html",
            "relUrl": "/markdown/2021/10/01/tiny-python-project-chapter-5~8.html",
            "date": " • Oct 1, 2021"
        }
        
    
  
    
        ,"post18": {
            "title": "System Programming week 5",
            "content": "System Programming Week 5 . Control: Condition codes . Processor State . . Condition Codes (Implicit Setting) . Single bit register . addq Src, Dest . t = a + b . CF (Carry Flag) for unsigned CF set if carry out from most significant bit (unsigned overflow, 비트연산으로 인해 most significant bit의 overflow가 일어났을 때) | . | ZF (Zero Flag) ZF set if t == 0 | . | SF (Sign Flag) for signed SF set if t &lt; 0 (as signed) | . | OF (Overflow Flag) for signed set if two’s-complement (signed) overflow: (a &gt; 0 &amp;&amp; b &gt; 0 &amp;&amp; t &lt; 0) || (a &lt; 0 &amp;&amp; b &lt; 0 &amp;&amp; t &gt;= 0) | . | . Not set by leaq instruction . Condition codes (Explicit Setting by Compare Instruction) . cmpq Src2, Src1 . cmpq b, a like computing a - b without setting destination. (빼기 연산으로 compare 연산을 함) . CF set if carry out from most significant bit (used for unsigned comparisions) | ZF set if a == b | SF set if (a - b) &lt; 0 (as signed) | OF set if two’s-complement (signed) overflow (a &gt; 0 &amp;&amp; b &lt; 0 &amp;&amp; (a - b) &lt; 0) || (a &lt; 0 &amp;&amp; b &lt; 0 &amp;&amp; (a - b) &gt;=0) | . Condition Codes (Explicit Setting: Test) . Explicit Setting by Test instruction . testq Src2, Src1 . testq b, a like computing a &amp; b without setting destination. bit by bit으로 comparison 연산 | . | Sets condition codes based on value of Src1 &amp; Src2 | Useful to have one of the operands be a mask | ZF set when a &amp; b == 0 | SF set when a &amp; b &lt; 0 | . Reading condition codes . . . . Condition branches . Jumping . jX Instructions - jump to different part of code depending on condition codes . . . Expressing with Goto Code . C allows goto statement . Jump to position designated by label. . . . Using conditional moves . Conditional move instructions . instruction supports: if (Test) Dest &lt;- Src | GCC tries to use them but, only when known to be safe. | . | Branch의 모든 계산을 다 끝내놓고, 조건에 맞는 결과만 가져와서 씀 | . Why? . Branches are very disruptive to instruction flow through pipelines. | Conditional moves do not require control transfers. | . . . Bad cases for conditional move . . Loops . “Do-While” Loop example . . Do-While statement가 assembly에서 가장 직관적으로 변환됨 . . “Do-While” translation . . “While” translation . . -Og는 optimization을 끄는 것 . . . . “For” loop form . . . . . Switch statement . 왜 if statement보다 switch statement가 더 성능이 좋은지 이해하기 . Switch statement example . . Jump table structure . . Jump table을 작성해서 argument가 들어오자 마자 조건에 맞는 Code block으로 바로 jump 할 수 있는 code block의 address를 저장하고 있는 jump table을 활용함. -&gt; 계산을 하지 않아도 됨 . if statement로 many cases를 사용하면 하나하나 conditions들을 연산해야 하기 때문에 switch statement가 더 빠름 . Switch statement example . . . Assembly setup explanation . . Table structure . Each targe requires 8 bytes | Base address .L4 | . Jumping . Direct: jmp .L8 | Jump target is denoted by label .L8 | Indirect: jmp *.L4(, %rdi, 8) | Must scale by factor of 8 (addresses are 8 bytes) | Fetch target from effective Address .L4 + x * 8 only for $0&lt;=x&lt;=6$ | . | . . Code blocks (x == 1) . . Handling Fall-through . . Code blocks (x == 2, x == 3) . . Code blocks (x == 5, x == 6, default) . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/09/30/system-programming-week-5.html",
            "relUrl": "/markdown/2021/09/30/system-programming-week-5.html",
            "date": " • Sep 30, 2021"
        }
        
    
  
    
        ,"post19": {
            "title": "Probability and statistics week 5",
            "content": "Probability and Statistics Week 5 . 조건부 확률 . 특정 사건이 일어난 것을 알고 있을 때, 다른 사건이 동시에 발생하는 확률 P(A∣B)=P(A∩B)P(B)if A∩B=∅:P(A∣B)=P(A∩B)P(B)=0if A∩B=B:P(A∣B)=P(A∩B)P(B)=1P(A∣B)+P(A‘∣B)=P(A∩B)P(B)+P(A‘∩B)P(B)=1 P(A | B) = frac{P(A cap B)}{P(B)} if , A cap B = empty: P(A | B) = frac{P(A cap B)}{P(B)} = 0 if , A cap B = B: P(A | B) = frac{P(A cap B)}{P(B)} = 1 P(A | B) + P(A^{`} | B) = frac{P(A cap B)}{P(B)} + frac{P(A^{`} cap B)}{P(B)} = 1P(A∣B)=P(B)P(A∩B)​ifA∩B=∅:P(A∣B)=P(B)P(A∩B)​=0ifA∩B=B:P(A∣B)=P(B)P(A∩B)​=1P(A∣B)+P(A‘∣B)=P(B)P(A∩B)​+P(B)P(A‘∩B)​=1 B로 sample space를 줄여서 B가 일어났을 때 A가 일어날 확률을 구하는 개념. 즉, $P(A | B) + P(A | B^{`}) = 1$ A∩(B∪C)≠A∩B∪CP(A∣B)=P(A∩B)P(B), P(B∣A)=P(A∩B)P(A)P(A∩B)=P(B)P(A∣B)=P(A)P(B∣A) A cap (B cup C) ne A cap B cup C P(A | B) = frac{P(A cap B)}{P(B)}, , P(B | A) = frac{P(A cap B)}{P(A)} P(A cap B) = P(B)P(A | B) = P(A)P(B | A)A∩(B∪C)​=A∩B∪CP(A∣B)=P(B)P(A∩B)​,P(B∣A)=P(A)P(A∩B)​P(A∩B)=P(B)P(A∣B)=P(A)P(B∣A) . Independent variable . P(B∣A)=P(B)P(A∣B)=P(A∩B)P(B)=P(A)P(B)P(B)=P(A) P(B | A) = P(B) P(A | B) = frac{P(A cap B)}{P(B)} = frac{P(A)P(B)}{P(B)} = P(A) P(B∣A)=P(B)P(A∣B)=P(B)P(A∩B)​=P(B)P(A)P(B)​=P(A) . 아래 것 중 하나라도 성립하면 나머지도 성립 P(A∣B)=P(A)P(B∣A)=P(B)P(A∩B)=P(A)P(B)P(A | B) = P(A) P(B | A) = P(B) P(A cap B) = P(A)P(B)P(A∣B)=P(A)P(B∣A)=P(B)P(A∩B)=P(A)P(B) 한 사건이 발생한 사실을 아는 것이 다른 사건의 확률에 아무 영향을 주지 못함 . . Probability Tree . . P(claim)=P(plantI⁡)∗P(claim∣plantI⁡)+P(plantII⁡)∗P(claim∣plantII⁡)+P(plantIII⁡)∗P(claim∣plantIII⁡)+P(plantIV⁡)∗P(claim∣plantIV⁡) P(claim) = P( operatorname{plant I}) * P(claim | operatorname{plant I}) + P( operatorname{plant II}) * P(claim | operatorname{plant II}) + P( operatorname{plant III}) * P(claim | operatorname{plant III}) + P( operatorname{plant IV}) * P(claim | operatorname{plant IV})P(claim)=P(plantI)∗P(claim∣plantI)+P(plantII)∗P(claim∣plantII)+P(plantIII)∗P(claim∣plantIII)+P(plantIV)∗P(claim∣plantIV) . 확률을 세는 방법 . . n가지의 선택 중 k번 선택하는 경우 . 복윈: $N = n^{k}$ | 비복원 순서가 있는 경우: Permutation | 순서가 없는 경우: Combination | . | . Law of Total Probability (전체 확률의 법칙) . . Posterior probabilities (사후확률) . . Bayes’ Theorem . P(Ai):prior probabilityP(B∣Ai):likelihood probabilityP(Ai∣B)=P(Ai)P(B∣Ai)∑j=1nP(Aj)P(B∣Aj):posterior probability P(A_{i}): text{prior probability} P(B | A_{i}): text{likelihood probability} P(A_{i} | B) = frac{P(A_{i})P(B | A_{i})}{ sum_{j = 1}^{n}{P(A_{j})P(B | A_{j})}}: text{posterior probability}P(Ai​):prior probabilityP(B∣Ai​):likelihood probabilityP(Ai​∣B)=∑j=1n​P(Aj​)P(B∣Aj​)P(Ai​)P(B∣Ai​)​:posterior probability . 베이지안 이론 . 빈도주의 vs. 베이지안 . 아는 확률을 통해서 모르는 확률을 추론하는 것 - 베이지안 이론 . example . . Random variable . 표본공간 S에 대해서 대응하는 real number를 연결하는 함수 . . 변수지만 사실상 함수의 개념. output을 실수와 mapping . example . . 확률변수의 종류 . discrete random variable - 불연속적인 특정 값만 가지는 경우 -&gt; probability mass function | continuous random variable - 어떤 구간 내에서 임의의 실수 값을 가지는 경우 -&gt; probability density function | . Probability Mass Function (확률질량함수) . 이산형 확률변수 X가 어떤 값 $x_{i}$를 가질 확률 $p_{i}$ P(X=xi)=pi P(X = x_{i}) = p_{i}P(X=xi​)=pi​ Histogram을 총 sample의 수로 나눈 것과 사실 상 같음 . 아래의 두 조건을 만족해야 함 0≤pi≤1∑ipi=1 0 le p_{i} le 1 sum_{i}{p_{i}} = 10≤pi​≤1∑i​pi​=1 Hisgotram처럼 bar 형태로 그릴 수 있음 . example . . . . mapping된 특정 real number에만 값이 있는 것임 . . Cumulative Distribution Function (누적분포함수) . F(x)=P(X≤x)F(x)=∑y:y&lt;=xP(X=y) F(x) = P(X le x) F(x) = sum_{y:y&lt;=x}{P(X = y)}F(x)=P(X≤x)F(x)=y:y&lt;=x∑​P(X=y) . example . . 0≤FX(x)≤1FX(∞)=1FX(−∞)=0FX(x1)≤FX(x2)forx1&lt;x2 0 le F_{X}(x) le 1 F_{X}( infty) = 1 F_{X}(- infty) = 0 F_{X}(x_{1}) le F_{X}(x_{2}) for x_{1} &lt; x_{2}0≤FX​(x)≤1FX​(∞)=1FX​(−∞)=0FX​(x1​)≤FX​(x2​)forx1​&lt;x2​ . CCDF (Complementary Cumulative Distribution Function) . 1−FX(x)=P(X&gt;=x) 1 - F_{X}(x) = P(X &gt;= x)1−FX​(x)=P(X&gt;=x) . 파레토 분포 등을 볼 때 유용하게 쓰임 . 20:80법칙 생각하면 됨 . relationship between PMF and CDF . P(x1&lt;X&lt;=x)=F(x2)−F(x1) P(x_{1} &lt; X &lt;= x) = F(x_{2}) - F(x_{1})P(x1​&lt;X&lt;=x)=F(x2​)−F(x1​) . . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/09/30/probability-and-statistics-week-5.html",
            "relUrl": "/markdown/2021/09/30/probability-and-statistics-week-5.html",
            "date": " • Sep 30, 2021"
        }
        
    
  
    
        ,"post20": {
            "title": "Probability and inferential statistics week 5",
            "content": "Probability and Inferential Statistics Week 5 . . . . . . . . . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/09/30/probability-and-inferential-statistics-week-5.html",
            "relUrl": "/markdown/2021/09/30/probability-and-inferential-statistics-week-5.html",
            "date": " • Sep 30, 2021"
        }
        
    
  
    
        ,"post21": {
            "title": "Algorithms week 5",
            "content": "Algorithms Week 5 . Linear time sorting . Comparison-based sorting에 성능적인 한계가 있음 | 이러한 단점을 해결하기 위한 linear-time sorting 기법들이 있음 | . (Randomized) Quicksort . It behaves as follows: . If the list has 0 or 1 elements it’s sorted. | Otherwise, choose a pivot and partition around it. | Recursively apply quicksort to the sublists to the left and right of the pivot. | . . void qucikSort (int array[], int l, int r) { if (l &lt; r) { int pivot = array[r]; int pos = partition(array, l, r, pivot); quickSort(array, l, pos - 1); quickSort(array, pos + 1, r); } } . Worst-case runtime - $O(n^{2})$: When pivot = array[r] . Randomized Quicksort . void qucikSort (int array[], int l, int r) { if (l &lt; r) { int pivot = array[l + rand() % n]; int pos = partition(array, l, r, pivot); quickSort(array, l, pos - 1); quickSort(array, pos + 1, r); } } . Worst-case - $O(n^{2})$: Think of this as the adversary chooses the randomness. . Expected - $O(n log{n})$ . Initial observations . There’s a really good case, in which partition always picks the median element as the pivot. . . There’s a really bad case, in which partition always picks the smallest or largest element as the pivot. . . Expected runtime of randomized quicksort . The expected runtime of auicksort is $O(n log{n})$ . We can provie it through counting the number of times two elements get compared. . Lower-bound of comparison-based sorting . Sorting . We’ve seen a few sorting algorithms . Insertion sort is worst-case $O(n^{2})$-time. | Mergesort is worst-case $O(n log{n})$-time. | Quicksort is worst-case $O(n log{n})$-time. | . Comparison-based algorithms use “comparisons” to achieve their output. . Linear-time select is a comparison-based algorithms. | quicksort, mergesort, insertionsort | . Theorem [Lower bound of $ ohm(n log{n})$]: Any deterministic comparison-based sorting algorithm requires $ ohm(n log{n})$-time? . Argue that all comparison-based sorting algorithms produce a decision tree. Then analyze decision trees. | . Proof: . Any deterministic comparison-based algorithm can be represented as a decision tree with $n!$ leaves. | The worst-case running time is the depth of the decision tree. | All decision trees with $n!$ leaves have depth at least $ ohm(n log{n})$ | . So any comparison-based sorting algorithm must have worst-case running time at least $ ohm({n log{n}})$ . Decision tree . . . The leaves of this tree are all possible orderings of the items: when we reach a leaf we return it. . Running the algorithm on a given input corresponds to taking a particular path through the tree. . . . . Linear-time sorting . If any deterministic comparison-based sorting algorithm requires $ ohm(n log{n})$-time, then what’s this nonsense about linear-time sorting algorithms? . We can achieve $O(n)$ worst-case runtime if we make assumptions about the input. (e.g. They are integers ranging from 0 to k - 1) . | Counting sort, Bucket sort, Radix sort . | . Counting sort . void countingsort(int array[], int n) { int count [k + 1]; for (int i = 0; i &lt; k + 1; i++) { count[i] = 0; } for (int i = 0, j = 0; i &lt;= k; i++) { while(count[i] &gt; 0) { array[j] = i; j++; count[i]--; } } } . Assumption: $ operatorname{input value rance} = [0, k - 1]$ . . . Bucket sort . similar to the counting sort, but . Might be multiple keys per bucket, so buckets need another stable_sort to be sorted. . . static void bucketsort(int array[], int n, int k) { vector&lt;int&gt; bucket[bucket_number]; for (int i = 0; i &lt; n; i++) { int b = array[i] / ceil(k / bucket_number); bucket[b].push_back(array[i]); } if (bucket_number &lt; k) { for (int i = 0; i &lt; bucket_number; i++) { sort(bucket[i].begin(), bucket[i].end()); } } int m = 0; for (int i = 0; i &lt; bucket_number; i++) { for (int j = 0; j &lt; bucket[i].size(); j++) { array[m] = bucket[i][j]; m++ } } } . worst-case runtime: $ O(max(n log{n}, n + k))$ . Two cases for um_buckets and k: . $k &lt;= operatorname{num_buckets}$: At most one key per bucket, so buckets don’t need another stable_sort to be sorted (similar to counting_sort). | $k &gt; operatorname{num_buckets}$: Might be multiple keys per buckets, so buckets need another stable_sort to be sorted. | . . Radix sort . 기수정렬 . . 자릿수로 정렬 . void radixsort(int array[], int size) { int max = getMax(array, size); for (int place = 1; max / place &gt; 0; place *= 10) { countingSort(array, size, place); } } . void countingSort(int array[], int size, int place) { count int max = 10; int* output = new int[size]; int* count = new int[max]; for (int i = 0; i &lt; max; ++i) { count[i] = 0 } for (int i = 0; i &lt; size; i++) { key = (array[i] / place) % 10; count[key]++; } for (int i = 1; i &lt; max; i++) { count[i] += count[i - 1]; } for (int i = size - 1; i &gt;= 0; i--) { key = (array[i] / place) % 10; output[count[key] - 1] = array[i]; count[key]--; } for (int i = 0; i &lt; size; i++) { array[i] = output[i]; } } .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/09/30/algorithms-week-5.html",
            "relUrl": "/markdown/2021/09/30/algorithms-week-5.html",
            "date": " • Sep 30, 2021"
        }
        
    
  
    
        ,"post22": {
            "title": "CFA Level 2 Equity",
            "content": "CFA Level 2 Equity . LOS 24.a: Define valuation and intrinsic value and explain sources of perceived mispricing. . Intrinsic Value (IV) . the valuation of an asset or security by someone who has complete understanding of the characteristics of the asset or issuing firm. . Asset Mispricing . Efficient market theory: Intrinsic value = Market value . . . LOS 24.b: Explain the going concern assumption and contrast a going concern value to a liquidation value. . The going concern assumption is simply the assumption that a company will continue to operate as a business. . The liquidation value is the estimate of what the assets of the firm would bring if sold separately, net of the company’s liabilities. . going concern value &gt; liquidation value: value added from asset synergy . LOS 24.c: Describe definitions of value and justify which definition of value is most relevant to public company valuation. . Fair market value . Fair market value is the price at which a hypothetical willing, informed, and able seller would trade an asset to a willing, informed, and able buyer. . well-informed, willing buyer and seller . 팔거나 살 수 있는 willingness가 중요, ability도 있어야 함 . fair value . fair value != fair market value, but 같을 수 있음 . value for financial reporting . investment value . Investment value is the value of a stock to a particular buyer. Investment value may depend on the buyer’s specific needs and expectations, as well as perceived synergies with existing buyer assets. . value to specific buyer: synergy 고려 . LOS 24.d: Describe applications of equity valuation. . stock selection - is the stock under- or overvalued? | inferring market expectations - what does the security price say about expectations? | Evaluating corporate events - what is the effect on firm value from a merger? | fairness opinions - is the value paid for the firm fair? | evaluating business strategies - what is the effect on firm value of a new strategy? | communicating with analysis and shareholders - how is firm value being affected? | appraising private businesses - what is the value of a private firm? | compensation - what is the value of equity compensation? | . LOS 24.e: Describe questions that should be addressed in conducting an industry and competitive analysis. . the valuation process . understanding the business | forecasting company performance | selecting the appropriate valuation model - absolute or relative | using forecasts in a valuation | applying the valuation conclusions - over or under valued? | five elements of industry structure . threat of new entrants in the industry | threat of substitutes | bargaining power of buyers | bargaining power of supplier | rivalry among existing competitors | three generic strategies . cost leadership | product differentiation | focus - employing one of the previous strategies within a particular segment of the industry in order to gain a competitive advantage. | . Quality of earnings examples . accelerating or premature recognition of income recognizes revenue early using bill-and-hold sales. | . | reclassifying gains and nonoperating income capitalizes product development expenses | . | expense recognition and losses revenue: non-operating -&gt; operating | expense: operating -&gt; non-operating | . | amortization, depreciation, and discount rates liabilities are understated | . | off-balance-sheet issues increases loan-loss reserves | . | LOS 24.f: Contrast absolute and relative valuation models and describe examples of each type of model. . Absolute valuation . . One absolute valuation approach is to determine the value of a firm today as the discounted or present value of all the cash flows expected in the future. . Another absolute approach to valuation is represented by asset-based models. This approach estimates a firm’s value as the sum of the market value of the assets it owns or controls. This approach is commonly used to value firms that own or control natural resources, such as oil fields, coal deposits, and other mineral claims. . Relative valuation . . Another very common approach to valuation is to determine the value of an asset in relation to the values of other assets. . LOS 24.g: Describe sum-of-the-parts valuation and conglomerate discounts. . Rather than valuing a company as a single entity, an analysts can value individual parts of the firm and add them up to determine the value of the company as a whole. The value obtained is called the sum-of-the-parts value. . Conglomerate discount . internal capital inefficiency | endogenous (internal) factors | research measurement errors | LOS 24.h: Explain broad criteria for choosing an appropriate approach for valuing a given company. . What are the characteristics of the company? | What is the availability and quality of data? | What is the purpose of the valuation? | . The purpose of the analysis may be valuation for making a purchase offer for a controlling interest in the company. In this case, a model based on cash flow may be more appropriate than one based on dividends because a controlling interest would allow the purchaser to set dividend policy. . LOS 25.a: Describe among realized holding period return, expected holding period return, required return, return from convergence of price to intrinsic value, discount rate, and internal rate of return. . Holding period return . . price convergence . If the expected return is not equal to required return, there can be a “return from convergence of price to intrinsic value”. . . 만약 expected return = 20%, required rate of return = 10%이면, 이 차이에서 발생하는 convergence에서 오는 return을 price convergence라고 함 . LOS 25.b: Calculate and interpret an equity risk premium using historical and forward-looking estimation approaches. . equity risk premium = required return on equity index - risk-free rate . Historical estimates . A historical estimate of the equity risk premium consists of the difference between the historical mean return for a broad-based equity-market index and a risk-free rate over a given time period. . A weakness of the approach is the assumption that the mean and variance of the returns are constant over time. In fact, the premium actually appears to be countercyclical-it is low during good times and high during bad times. . The historical estimate can also be upward biased if only firms that have survived during the period of measurement (called survivorship bias) are included in the sample. . The risk premium is always be lower when the geometric mean is used instead of the arithmetic mean. If the yield curve is upward sloping, the use of longer-term bonds rather than shorter-term bonds to estimate the risk-free rate will cause the estimated risk premium to be smaller. . Forward-looking estimates . Gordon Growth Model . . A weakness of the approach is that the forward-looking estimates will change through time and need to be updated. . Another weakness is the assumption of a stable growth rate, which is often not appropriate in rapidly growing economies. . . Supply-side Estimates (Macroeconomic models) . . Macroeconomic model estimates of the equity risk premium are based on the relationships between macroeconomic variables and financial variables. . break-even inflation rate = (1 + YTM of 20-year T-bonds) / (1 + YTM of 20-year TIPS) - 1 . Expected real growth rate in EPS should be approximately equal to the real GDP growth rate. Growth in GDP can be estimated as the sum of labor productivity growth and growth in the labor supply. . . If the market is believed to be overvalued ($ hat{PEg} &lt; 0$), P/E ratios would be expected to decrease and the opposite would be true if the market were believed to be undervalued ($ hat{PEg} &gt; 0$). If the market is correctly priced, $ hat{PEg} = 0$. The $ hat{Y}$ can be estimated using estimated dividends on the index including reinvestment return. . . LOS 25.c: Estimate the required return on an equity investment using the capital asset pricing model, the Fama-French model, the Pastor-Stambaugh model, macroeconomic multifactor models, and the build-up method (e.g., bond yield plus risk premium) . Capital Asset Pricing Model . requiredrateonstock⁡j=risk-free rate⁡+equityriskpremium⁡∗betaof⁡j operatorname{required rate on stock} j = operatorname{risk-free , rate} + operatorname{equity risk premium} * operatorname{beta of} jrequiredrateonstockj=risk-freerate+equityriskpremium∗betaofj . Fama-French Model (3 factors) . requiredreturnofstock⁡j=RF+βmkt,j∗(Rmkt−RF)+βSMB,j∗(Rsmall−Rbig)+βHML,j∗(RHBM−RLBM) operatorname{required return of stock}j = RF + beta_{mkt, j} * (R_{mkt} - RF) + beta_{SMB, j} * (R_{small} - R_{big}) + beta_{HML, j} * (R_{HBM} - R_{LBM})requiredreturnofstockj=RF+βmkt,j​∗(Rmkt​−RF)+βSMB,j​∗(Rsmall​−Rbig​)+βHML,j​∗(RHBM​−RLBM​) . $R_{mkt} - RF$ = return on a value-weighted market index minus the risk-free rate . $R_{small} - R_{big}$ = a small-cap return premium equal to the average return on small-cap portfolios minus the average return on large-cap portfolios . $R_{HBM} - R_{LBM}$ = a value return premium equal to the average return on high book-to-market portfolios minus the average return on low book-to-market portfolios . The baseline value (i.e., the expected value for the variable) for $ beta_{mkt, j}$ is one, and the baseline values for $ beta_{SMB, j}$ and $ beta_{HML, j}$ are zero. . Pastor-Stambaugh Model (4 factors) . The Pastor-Stambaugh model adds a liquidity factor to the Fama-French model. The baseline value for the liquidity factor beta is zero. requiredreturnofstock⁡j=RF+βmkt,j∗(Rmkt−RF)+βSMB,j∗(Rsmall−Rbig)+βHML,j∗(RHBM−RLBM)+βliq,j∗(Rilliq−Rliq) operatorname{required return of stock}j = RF + beta_{mkt, j} * (R_{mkt} - RF) + beta_{SMB, j} * (R_{small} - R_{big}) + beta_{HML, j} * (R_{HBM} - R_{LBM}) + beta_{liq, j} * (R_{illiq} - R_{liq})requiredreturnofstockj=RF+βmkt,j​∗(Rmkt​−RF)+βSMB,j​∗(Rsmall​−Rbig​)+βHML,j​∗(RHBM​−RLBM​)+βliq,j​∗(Rilliq​−Rliq​) . Macroeconomic Multifactor Models (5 factors) . Macroeconomic multifactor models use factors associated with economic variables that can be reasonably believed to affect cash flows and/or appropriate discount rates. The Burmeister, Roll, and Ross model incorporates the following five factors: . Confidence risk - unexpected changes in the difference between the return of risky corporate bonds and government bonds. | Time horizon risk - unexpected change in the difference between the return of long-term government bonds and Treasury bills. | Inflation risk - unexpected changes in the inflation rate. | Business cycle risk - unexpected change in the level of real business activity. | Market timing risk - the equity market return that is not explained by the other four factors. | . Build-up Method . requiredreturn⁡=RF+equityriskpremium⁡+sizepremium⁡+specific-company premium⁡ operatorname{required return} = RF + operatorname{equity risk premium} + operatorname{size premium} + operatorname{specific-company , premium}requiredreturn=RF+equityriskpremium+sizepremium+specific-companypremium . The formula could have a factor for the level of controlling versus minority interests and a factor for marketability of the equity; however, these latter two factors are usually used to adjust the value of the company directly rather than through the required return. . private company valuation formula 사용 . other risk premium (specific-company premium): marketability / control 반영되는 부분인데 risk premium보다는 Cashflow (value)에 직접 영향 - DCF 할 때 CF에 영향 . Bond-Yield Plus Risk Premium Method . The method simply adds a risk premium to the yield to maturity (YTM) of the company’s long-term debt. The logic here is that the yield to maturity of the company’s bonds includes the effects of inflation, leverage, and the firm’s sensitivity to the business cycle. That value is usually estimated at 3-5%, with the specific estimate based upon some model or simply from experience. . LOS 25.d: Explain beta estimation for public companies, thinly traded public companies, and nonpublic companies. . Beta estimates for public companies . Popular choices for the index include the S&amp;P 500 and the NYSE Composite. The most common length and frequency are five years of monthly data. . Adjusted Beta for public companies . When making forecasts of the equity risk premium, some analysts recommend adjusting the beta for beta drift. Beta drift refers to the observed tendency of an estimated beta to revert to a value of 1.0 over time. To compensate, the Blume method can be used to adjust the beta estimate: adjustedbeta⁡=(2/3∗regressionbeta⁡)+(1/3∗1.0) operatorname{adjusted beta} = (2 / 3 * operatorname{regression beta}) + (1 / 3 * 1.0)adjustedbeta=(2/3∗regressionbeta)+(1/3∗1.0) . Beta estimates for thinly traded stocks and nonpublic companies . Identify a benchmark company, which is publicly traded and similar to target company’s operations. . | Estimate the beta of that benchmark company. This can be done with a regression analysis. . | Unlever the beta estimate unleveredbetaofbenchmarkcompany⁡=betaofbenchmarkcompany⁡∗11+debtofbenchmarkcompany⁡equityofbenchmarkcompany⁡ operatorname{unlevered beta of benchmark company} = operatorname{beta of benchmark company} * frac{1}{1 + frac{ operatorname{debt of benchmark company}}{ operatorname{equity of benchmark company}}}unleveredbetaofbenchmarkcompany=betaofbenchmarkcompany∗1+equityofbenchmarkcompanydebtofbenchmarkcompany​1​ {b} . | Lever up the unlevered beta estimateofbetafortargetcompany⁡=unleveredbetaofbenchmarkcompany⁡∗(1+debtoftargetcompany⁡equityoftargetcompany⁡) operatorname{estimate of beta for target company} = operatorname{unlevered beta of benchmark company} * (1 + frac{ operatorname{debt of target company}}{ operatorname{equity of target company}})estimateofbetafortargetcompany=unleveredbetaofbenchmarkcompany∗(1+equityoftargetcompanydebtoftargetcompany​) . | LOS 25.e: Describe strengths and weaknesses of methods used to estimate the required return on an equity investment. . . LOS 25.f: Explain international consideration in required return estimation. . International investment, if not hedged, exposes the investor to exchange rate risk. . Country spread model . One method for adjusting data from emerging markets is to use a corresponding developed market as a benchmark and add a premium for the emerging market. EmergingERP⁡=Developedequityriskpremium⁡+Countrypremium⁡Countrypremium⁡=Emergingmarketbondyield⁡−developedmarketbondyield⁡ operatorname{Emerging ERP} = operatorname{Developed equity risk premium} + operatorname{Country premium} operatorname{Country premium} = operatorname{Emerging market bond yield} - operatorname{developed market bond yield}EmergingERP=Developedequityriskpremium+CountrypremiumCountrypremium=Emergingmarketbondyield−developedmarketbondyield . country risk rating model . A second method is the country risk rating model. This model estimates a regression equation using the equity risk premium for developed countries as the depended variables and risk ratings for those countries as the independent variable. The model is then used for predicting the equity risk premium for emerging markets using the emerging markets risk-ratings. . Developed market의 risk rating (independent variable)과 ERP (dependent variable)을 regression analysis -&gt; emerging market의 risk rating을 대입하여 ERP 추정 . LOS 25.g: Explain and calculate the weighted average cost of capital for a company. . WACC⁡=marketvalueofdebt⁡marketvalueofdebtandequity⁡∗rd∗(1−t)+marketvalueofequity⁡marketvalueofdebtandequity⁡∗re operatorname{WACC} = frac{ operatorname{market value of debt}}{ operatorname{market value of debt and equity}} * r_{d} * (1 - t) + frac{ operatorname{market value of equity}}{ operatorname{market value of debt and equity}} * r_{e}WACC=marketvalueofdebtandequitymarketvalueofdebt​∗rd​∗(1−t)+marketvalueofdebtandequitymarketvalueofequity​∗re​ . the tax rate should be the marginal tax rate. . the WACC calculation should use the target weights for debt and equity. . LOS 25.h: Evaluate the appropriateness of using a particular rate of return as a discount rate, given a description of the cash flow to be discounted and other relevant facts. . Cash flows to the firm - WACC | Cash flows to equity - required rate on equity | Nominal cash flows - nominal discount rates | Real cash flows - real discount rates | . LOS 26.a: Compare top-down, bottom-up, and hybrid approaches for developing inputs to equity valuation models. . Bottom-up analysis starts with analysis of an individual company or its reportable segments. . Top-down analysis begins with expectations about a macroeconomic variable, often the expected growth rate of nominal GDP. . A hybrid analysis incorporates elements of both top-down and bottom-up analysis. A hybrid analysis can highlights any inconsistencies in assumptions between the top-down and bottom-up approaches. A hybrid analysis is the most common type. . LOS 26.b: Compare “growth relative to GDP growth” and “market growth and market share” approaches to forecasting revenue. . . LOS 26.c: Evaluate whether economies of scale are present in an industry by analyzing operating margins and sales levels. . If the average cost of production decreases as industry sales increase, we say that the industry exhibits economies of scale. . Economies of scale are observed when larger companies in an industry have larger margins. . LOS 26.d: Forecast the following costs: cost of goods sold, selling general and administrative costs, financing costs, and income taxes. . Cost of Goods Sold (COGS) . Because cost of goods sold is closely related to revenue, future COGS is usually estimated as a percentage of future revenue: forecastCOGS⁡=historicalCOGS⁡/revenue⁡∗estimateoffuturerevenue⁡or⁡forecastCOGS⁡=(1−grossmargin⁡)∗estimateoffuturerevenue⁡ operatorname{forecast COGS} = operatorname{historical COGS} / operatorname{revenue} * operatorname{estimate of future revenue} operatorname{or} operatorname{forecast COGS} = (1 - operatorname{gross margin}) * operatorname{estimate of future revenue}forecastCOGS=historicalCOGS/revenue∗estimateoffuturerevenueorforecastCOGS=(1−grossmargin)∗estimateoffuturerevenue It can be worthwhile to examine the gross margins of a firm’s competitor in the market as a check of the reasonableness of future gross margin estimates. In some cases, differences between firms’ business models may be the underlying reason for differences in gross margins. . A closer examination of the volume and price of a firm’s inputs may improve the quality of a forecast of COGS, especially in the short run. An analyst must be aware of the proportion of future input costs hedged in this way or, at a minimum, whether the firm has historically hedged these costs and over what horizon. . Estimates of a firm’s COGS may also be improved by forecasting COGS for the firm’s various product categories and business segments separately. . Selling General and Administrative Costs (SG&amp;A) . Compared to COGS, SG&amp;A operating expenses are less sensitive to changes in sales volume; SG&amp;A fixed cost component is generally greater than its variable cost component. . Selling and distribution costs, on the other hand, may be more directly related to sales volumes, because it is likely that more salespeople will be hired to support higher firm sales. If a firm’s financial statements break out the components of SG&amp;A separately, the different components can be considered separately to improve the overall forecast of SG&amp;A expenses. . Financing cost . The primary determinants of gross interest expense are the level of (gross) debt and market interest rates. . Net debt is gross debt minus cash, cash equivalents, and short-term securities. . Net interest expense is gross interest expense minus interest income on cash and short-term debt securities. . Income tax expense . statutory rate | effective tax rate | cash tax rate | . LOS 26.e: Describe approaches to balance sheet modeling. . Net income less dividends declared will flow through to retained earnings. Working capital items can be forecast based on their historical relationship with income statement items. . The forecasted annual COGS divided by the inventory turnover ratio can be used to forecast an inventory value for the balance sheet that is consistent with income statement projections of COGS. projectedaccountsreceivable⁡=dayssalesoutstanding⁡∗forecastedsales⁡/365 operatorname{projected accounts receivable} = operatorname{days sales outstanding} * operatorname{forecasted sales} / 365projectedaccountsreceivable=dayssalesoutstanding∗forecastedsales/365 Working capital items will increase at the same rate as revenues. . Property, plant and equipment (PP&amp;E) on the balance sheet is determined by depreciation and capital expenditures (capex). . Forecasts may also be improved by analyzing capital expenditures for maintenance separately from capital expenditure for growth. Historical depreciation should be increased by the inflation rate when estimating capital expenditure for maintenance because replacement cost can be expected to increase with inflation. . . . LOS 26.f: Describe the relationship between return on invested capital and competitive advantage. . Once financial projections are completed, the return on invested capital (ROIC) can be calculated. While analysis use varying definitions of ROIC, it can be thought of as net operating profit projected for taxes (NOPLAT) divided by invested capital (operating assets minus operating liabilities). ROIC is a return to both equity and debt and is preferable to return on equity (ROE) in some contexts because it allows (relative to their peers) are likely exploiting some competitive advantage in the production and/or sale of their products. . A related measure, return on capital employed, is similar to ROIC but uses pretax operating earnings in the numerator to facilitate comparison between companies that face different tax rates. . . LOS 26.g: Explain how competitive factors affect prices and costs. . LOS 26.h: Judge the competitive position of a company based on a Porter’s five forces analysis. . A firm’s future competitive success is possibly the most important factor in determining future revenue and profitability. . Porter’s five forces . threat of substitute products | intensity of industry rivalry | bargaining power of suppliers | bargaining power of customers | threat of new entrants | LOS 26.i: Explain how to forecast industry and company sales and costs when they are subject to price inflation or deflation. . . 가격 인상 시 demand elasticity에 대한 고려 필요 - 탄력적이면 price 상승 시 revenue 하락, 비탄력적이면 price 상승 시 revenue 하락이 덜함 . price-volume trade-off: inflation 상황에서 가격 인상이 늦으면 profit margin이 낮아짐, 빠르면 profit margin은 유지되지만 volume이 내려갈 수 있음 . Companies with commodity-type inputs can hedge their exposure to changes in input prices through derivatives or, more simply, fixed-price contracts for future delivery. - hedge . Companies that are vertically integrated (and are in effect their own suppliers) will be less subject to the effects of variations in input prices. - vertical integration . For a company that neither hedges input price exposure nor is vertically integrated the issue for the analyst is to determine how rapidly, and to what extent, the increase in costs can be passed on to customers, as well as the expected effect of price increases on sales volume and sales revenue. . The effects of increasing a product’s price depend on the product’s elasticity of demand. For most firms, product demand is relatively elastic. With elastic demand, the percentage reduction in unit sales is greater than the percentage increase in price, and a price increase will decrease total sales revenue. . The elasticity of demand is most affected by the availability of substitute products. In a competitive industry, the pricing decisions of other firms in the industry can affect the market shares of all firms in an industry. . Firms that are too quick to increase prices will experience declining sales volumes, though firms that are slow to increase prices will experience declining gross margins. . LOS 26.j: Evaluate the effects of technological developments on demand, selling prices, costs, and margins. . Some advances in technology decrease costs of production, which will increase profit margins (at least for early adopters), and, over time, increase industry supply and unit sales as well. . Other advances in technology will result in either improved substitutes or wholly new products. Some technological advances can disrupt not only markets but entire industries. One way for an analyst to model the introduction of new substitutes for a company’s products is to estimate a cannibalization factor, which is the percentage of new product sales that will replace existing product sales. cannibalizationrate⁡=newproductsalesthatreplaceexistingproductsales⁡totalnewproductsales⁡ operatorname{cannibalization rate} = frac{ operatorname{new product sales that replace existing product sales}}{ operatorname{total new product sales}}cannibalizationrate=totalnewproductsalesnewproductsalesthatreplaceexistingproductsales​ . LOS 26.k: Explain considerations in the choice of an explicit forecast horizon. . . LOS 26.l: Explain an analyst’s choices in developing projections beyond the short-term forecasts horizon. . An analyst will typically value a stock using the earnings or some measures of cash flow over a forecast period, along with the stock’s terminal value at the end of the forecast horizon. This terminal value is usually estimated using either a relative valuation approach or a discounted cash flow approach. . When using a multiples approach, an analyst must ensure that the multiple used is consistent with the estimate of the company’s growth rate and required rate of return. . When using a discounted cash flow approach to estimate the terminal value, two key inputs are a cash flow or earnings measure and an expected future growth rate. . LOS 26.m: Demonstrate the development of a sales-based pro forma company model. . Steps in developing a sales-based pro forma model: . Estimate revenue growth and future expected revenue | Estimate COGS | Estimate SG&amp;A | Estimate financing costs | Estimate income tax expense and cash taxes | Estimate cash taxes, taking into account changes in deferred tax items | Model the balance sheet based on items that flow from the income statement | Use depreciation and capital expenditures (for maintenance and for growth) to estimate capital expenditures and net PP&amp;E for the balance sheet | Use the completed pro forma income statement and balance sheet to construct a pro forma cash flow statement | LOS 27.a: Compare dividends, free cash flow, and residual income as inputs to discounted cash flow models and identify investment situations for which each measure is suitable. . FCFF=NI+NCC+Interest∗(1−t)−WCI−FCIFCFE=FCFF−Interest∗(1−t)+NetBorrowing⁡ FCFF = NI + NCC + Interest * (1 - t) - WC_{I} - FC_{I} FCFE = FCFF - Interest * (1 - t) + operatorname{Net Borrowing}FCFF=NI+NCC+Interest∗(1−t)−WCI​−FCI​FCFE=FCFF−Interest∗(1−t)+NetBorrowing . Choice of Discounted Cash Flow Models . Dividend discount model history of dividend payments | dividends related to earnings | noncontrolling perspective | . | Free cash flow model small or zero dividends | positive cash flow related to earning | controlling perspective | . | Residual income model small or zero dividends | negative free cash flow | high quality accounting disclosures | . | . LOS 27.b: Calculate and interpret the value of a common stock using the dividend discount model (DDM) for single and multiple holding periods. . One-period DDM . V0=D1+P11+r V_{0} = frac{D_{1} + P_{1}}{1 + r}V0​=1+rD1​+P1​​ . Two-period DDM . V0=D1(1+r)+D2+P2(1+r)2 V_{0} = frac{D_{1}}{(1 + r)} + frac{D_{2} + P_{2}}{(1 + r)^{2}}V0​=(1+r)D1​​+(1+r)2D2​+P2​​ . Multi-period DDM . V0=∑t=1∞Dt(1+r)t V_{0} = sum_{t = 1}^{ infty} frac{D_{t}}{(1 + r)^{t}}V0​=t=1∑∞​(1+r)tDt​​ . LOS 27.c: Calculate the value of a common stock using the Gordon growth model and explain the model’s underlying assumptions. . The GGM assumes that dividends increase at a constant rate indefinitely. . GGM . V0=D1r−g V_{0} = frac{D_{1}}{r - g}V0​=r−gD1​​ . The model assumes that: . The firm expects to pay a dividend, $D_{1}$, in one year. | Dividends grow indefinitely at a constant rate, g (which may be less than zero). | The growth rate, g, is less than the required return, r. | . It is unrealistic to assume that any firm can continue to grow indefinitely at a rate higher than the long-term growth rate in real gross domestic product (GDP) plus the long-term inflation rate. . LOS 27.d: Calculate and interpret the implied growth rate of dividends using the Gordon growth model and current stock price. . . LOS 27.e: Calculate and interpret the present value of growth opportunities (PVGO) and the component of the leading price-to-earnings ratio (P/E) related to PVGO. . stock value - 1) no growth rate, 2) PVGO V0=E1r+PVGO V_{0} = frac{E_{1}}{r} + PVGOV0​=rE1​​+PVGO This means the value of a firm’s equity has two components: . The value of its assets in place $(E_{1}/r)$, which is the present value of a perpetual cash flow of $E_{1}$. | The present value of its future investment opportunities (PVGO). | . LOS 27.f: Calculate and interpret the justified leading and trailing P/Es using the Gordon growth model. . justified leading P/E⁡=P0E1=D1/E1r−g=1−br−gjustified trailing P/E⁡=P0E0=D0∗(1+g)/E0r−g=(1−b)∗(1+g)r−g=justified leading P/E⁡∗(1+g)b=retentionratio⁡ operatorname{justified , leading , P/E} = frac{P_{0}}{E_{1}} = frac{D_{1} / E_{1}}{r - g} = frac{1 - b}{r - g} operatorname{justified , trailing , P/E} = frac{P_{0}}{E_{0}} = frac{D_{0} * (1 + g) / E_{0}}{r - g} = frac{(1 - b) * (1 + g)}{r - g} = operatorname{justified , leading , P/E} * (1 + g) b = operatorname{retention ratio}justifiedleadingP/E=E1​P0​​=r−gD1​/E1​​=r−g1−b​justifiedtrailingP/E=E0​P0​​=r−gD0​∗(1+g)/E0​​=r−g(1−b)∗(1+g)​=justifiedleadingP/E∗(1+g)b=retentionratio . LOS 27.g: Calculate the value of noncallable fixed-rate perpetual preferred stock. . valueofperpetualpreferredshares⁡=Dprp operatorname{value of perpetual preferred shares} = frac{D_{p}}{r_{p}}valueofperpetualpreferredshares=rp​Dp​​ . LOS 27.h: Describe strengths and limitations of the Gordon growth model and justify its selection to value a company’s common shares. . strengths . simple and applicable to stable, mature firms | can be applied to entire markets | g can be estimated using macro data | can be applied to firms that repurchase stock | . limitations . not applicable to non-dividend-paying firms | g must be constant | stock value is very sensitive to $r - g$ | most firms have nonconstant growth in dividends. | . LOS 27.i: Explain the assumptions and justify the selection of the two-stage DDM, the H-model, the three-stage DDM, or spreadsheet modeling to value a company’s common shares. . H-model . The growth rate starts out high and then decline linearly over the high-growth stage until it reaches the long-run average growth rate. . . LOS 27.j: Explain the growth phase, transition phase, and maturity phase of a business. . initial growth phase | transition phase | mature phase | . .   growth phase     . variable | initial growth | transition | maturity | . earnings growth | very high | above average but falling | stable at long-run level | . capital investment | significant requirements | decreasing | stable at long-run level | . profit margin | high | above average but falling | stable at long-run level | . FCFE | negative | may be positive, and growing | stable at long-run level | . ROE vs. Required Return | ROE &gt; r | ROE approaching r | ROE = r | . Dividend payout | low or zero | increasing | stable at long-run level | . appropriate model | three-stage | two-stage | Gordon growth (single) | . LOS 27.k: Describe terminal value and explain alternative approaches to determining the terminal value in a DDM. . DCF:⁡TV10=D11r−gMultiple:⁡TV10=PE10∗E10 or PE11∗E11 operatorname{DCF: }TV_{10} = frac{D_{11}}{r - g} operatorname{Multiple: }TV_{10} = frac{P}{E_{10}} * E_{10} , or , frac{P}{E_{11}} * E_{11}DCF:TV10​=r−gD11​​Multiple:TV10​=E10​P​∗E10​orE11​P​∗E11​ . LOS 27.l: Calculate and interpret the value of common shares using the two-stage DDM, the H-model, and the three-stage DDM. . Valuation using the H-model . V0=D0∗(1+gL)r−gL+D0∗H∗(gS−gL)r−gLH=t2=half-life (in years) of high-growth period⁡gS=short-term growth rate⁡gL=long-term growth rate⁡ V_{0} = frac{D_{0} * (1 + g_{L})}{r - g_{L}} + frac{D_{0} * H * (g_{S} - g_{L})}{r - g_{L}} H = frac{t}{2} = operatorname{half-life , (in , years) , of , high-growth , period} g_{S} = operatorname{short-term , growth , rate} g_{L} = operatorname{long-term , growth , rate}V0​=r−gL​D0​∗(1+gL​)​+r−gL​D0​∗H∗(gS​−gL​)​H=2t​=half-life(inyears)ofhigh-growthperiodgS​=short-termgrowthrategL​=long-termgrowthrate . LOS 27.m: Estimate a required return based on any DDM, including the Gordon growth model and the H-model. . . . LOS 27.n: Explain the use of spreadsheet modeling to forecast dividends and to value common shares. . LOS 27.o: Calculate and interpret the sustainable growth rate of a company and demonstrate the use of DuPont analysis to estimate a company’s sustainable growth rate. . g=b∗ROEROE=NetIncome⁡Sales∗SalesTotalassets⁡∗Totalassets⁡Equity=ProfitMargin⁡∗Totalassetturnover⁡∗Leverageratio⁡g=NetIncome⁡−DividendsNetIncome⁡∗NetIncome⁡Sales∗SalesTotalassets⁡∗Totalassets⁡Equity=b∗ROA∗Totalassets⁡Equity g = b * ROE ROE = frac{ operatorname{Net Income}}{Sales} * frac{Sales}{ operatorname{Total assets}}* frac{ operatorname{Total assets}}{Equity} = operatorname{Profit Margin} * operatorname{Total asset turnover} * operatorname{Leverage ratio} g = frac{ operatorname{Net Income} - Dividends}{ operatorname{Net Income}} * frac{ operatorname{Net Income}}{Sales} * frac{Sales}{ operatorname{Total assets}}* frac{ operatorname{Total assets}}{Equity} = b * ROA * frac{ operatorname{Total assets}}{Equity}g=b∗ROEROE=SalesNetIncome​∗TotalassetsSales​∗EquityTotalassets​=ProfitMargin∗Totalassetturnover∗Leverageratiog=NetIncomeNetIncome−Dividends​∗SalesNetIncome​∗TotalassetsSales​∗EquityTotalassets​=b∗ROA∗EquityTotalassets​ . LOS 27.p: Evaluate whether is overvalued, fairly valued, or undervalued by the market based on a DDM estimate of value. . Market price &gt; Model price -&gt; overvalued | Market price = Model price -&gt; fairly valued | Market price &lt; Model price -&gt; undervalued | . LOS 28.a: Compare the free cash flow to the firm (FCFF) and free cash flow to equity (FCFE) approaches to valuation. . . firmvalue⁡=FCFFdiscouuntedattheWACC⁡equityvalue⁡=FCFEdiscountedattherequiredreturnonequity⁡equityvalue⁡=firmvalue⁡−marketvalueofdebt⁡ operatorname{firm value} = operatorname{FCFF discouunted at the WACC} operatorname{equity value} = operatorname{FCFE discounted at the required return on equity} operatorname{equity value} = operatorname{firm value} - operatorname{market value of debt}firmvalue=FCFFdiscouuntedattheWACCequityvalue=FCFEdiscountedattherequiredreturnonequityequityvalue=firmvalue−marketvalueofdebt FCFE is easier and more straightforward to use in cases where the company’s capital structure is not particularly volatile. On the other hand, if a company has negative FCFE and significant debt outstanding, FCFF is generally the best choice. . LOS 28.b: Explain the ownership perspective implicit in the FCFE approach. . The ownership perspective in the free cash flow approach is that of an acquirer who can change the firm’s dividend policy, which is a control perspective, or for minority shareholders of a company that is in-play. The ownership perspective implicit in the dividend discount approach is that of a minority owner who has no direct control over the firm’s dividend policy. . Analysts often prefer to use free cash flow rather than dividend-based valuation for the following reasons: . many firms pay no, or low, cash dividends | Dividends are paid at the discretion of the board of directors. It may consequently, be poorly aligned with the firm’s long-run profitability. | If a company is vied as an acquisition target, free cash flow is a more appropriate measure because the new owner will have discretion over tis distribution (control perspective). | Free cash flows may be more related to long-run profitability of the firm as compared to dividends. | . LOS 28.c: Explain the appropriate adjustments to net income, earnings before interest and taxes (EBIT), earnings before interest, taxes, depreciation, and amortization (EBITDA), and cash flow from operations (CFO) to calculate FCFF and FCFE. . Calculating FCFF from net income . FCFF=NI+NCC+Interest∗(1−t)−FCInv−WCInv FCFF = NI + NCC + Interest * (1 - t) - FCInv - WCInvFCFF=NI+NCC+Interest∗(1−t)−FCInv−WCInv . Noncash charges . . The most significant noncash charge is usually depreciation. . Amortization of intangibles should be added back to net income, much like depreciation. | Provisions for restructuring charges and other noncash losses should be added back to net income. However, if the firm is accruing these costs to cover future cash outflows, then the forecast of future free cash flow should be reduced accordingly. Gains or losses on sale of long-term assets are also removed (they would be accounted for under fixed capital investment). | Income from restructuring charge reversals and other noncash gains should be subtracted from net income. | For a bond issuer, the amortization of a bond discount should be added back to net income, and the accretion of the bond premium should be subtracted from net income to calculate FCFF. | Deferred taxes, which result from differences in the timing of reporting income and expenses for accounting versus tax purposes, must be carefully analyzed. Over time, differences between book and taxable income should offset each other and have no significant effect on overall cash flows. If, however, the analyst expects deferred tax liabilities to continue to increase, increases in deferred tax liabilities should be added back to net income. Increases in deferred tax assets that are not expected to reverse should be subtracted from net income. | . Fixed capital investment . . Fixed capital investment is a net amount: it is equal to the difference between capital expenditures (investments in long-term fixed assets) and the proceeds from the sale of long-term assets: If no long-term assets were sold during the year,FCInv=ending net PP&amp;E⁡−beginning net PP&amp;E⁡+depreciationIf long-term assets were sold during the year,FCInv=ending net PP&amp;E⁡−beginning net PP&amp;E⁡+depreciation−gainonsale⁡ text{If no long-term assets were sold during the year,} FCInv = operatorname{ending , net , PP &amp;E} - operatorname{beginning , net , PP &amp;E} + depreciation text{If long-term assets were sold during the year,} FCInv = operatorname{ending , net , PP &amp;E} - operatorname{beginning , net , PP &amp;E} + depreciation - operatorname{gain on sale}If no long-term assets were sold during the year,FCInv=endingnetPP&amp;E−beginningnetPP&amp;E+depreciationIf long-term assets were sold during the year,FCInv=endingnetPP&amp;E−beginningnetPP&amp;E+depreciation−gainonsale . Working capital investment . The investment in net working capital is equal to the change in working capital, excluding cash, cash equivalents, notes payable, and the current portion of long-term debt. . Interest expense . Only the after-tax interest cost because paying interest reduces our tax bill. . Calculating FCFF from EBIT . FCFF=EBIT∗(1−t)+Dep−FCInv−WCInv FCFF = EBIT * (1 - t) + Dep - FCInv - WCInvFCFF=EBIT∗(1−t)+Dep−FCInv−WCInv . Because many noncash adjustments occur on the income statement below EBIT, we don’t need to adjust for them when calculating free cash flwo if we start with EBIT. . Calculating FCFF from EBITDA . FCFF=EBITDA∗(1−t)+Dep∗t−FCInv−WCInv FCFF = EBITDA * (1 - t) + Dep * t - FCInv - WCInvFCFF=EBITDA∗(1−t)+Dep∗t−FCInv−WCInv . Calculating FCFF from CFO . FCFF=CFO+Int∗(1−t)−FCInv FCFF = CFO + Int * (1 - t) - FCInvFCFF=CFO+Int∗(1−t)−FCInv . Calculating FCFE from FCFF . FCFE=FCFF−Int∗(1−t)+netborrowing⁡ FCFE = FCFF - Int * (1 - t) + operatorname{net borrowing}FCFE=FCFF−Int∗(1−t)+netborrowing . Calculating FCFE from net income . FCFE=NI+NCC−FCInv−WCInv+netborrowing⁡ FCFE = NI + NCC - FCInv - WCInv + operatorname{net borrowing}FCFE=NI+NCC−FCInv−WCInv+netborrowing . Calculating FCFE from CFO . FCFE=CFO−FCInv+netborrowing⁡ FCFE = CFO - FCInv + operatorname{net borrowing}FCFE=CFO−FCInv+netborrowing . Free cash flow with preferred stock . Remember to treat preferred stock just like debt, except preferred dividends are not tax deductible. . Specifically, any preferred dividends should be added back to the FCFF, just as after-tax interest charges are in the net income approach to generating FCFF. This approach assumes that net income is net income to common shareholders after preferred dividends have been subtracted out. The only adjustment to FCFE would be to modify net borrowing to reflect new debt borrowing and net issuance by the amount of the preferred stock. . LOS 28.d: Calculate FCFF and FCFE. . LOS 28.e: Describe approaches for forecasting FCFF and FCFE. . The first method is to calculate historical free cash flow and apply a growth rate under the assumptions that growth will be constant and fundamental factors will be maintained. . The second method is to forecast the underlying components of free cash flow and calculate each year separately. FCFE=NI−(1−DR)∗(FCI−Dep+WCI)DR=DebtDebt+Equity=DebtRatio⁡ FCFE = NI - (1 - DR) * (FC_{I} - Dep + WC_{I}) DR = frac{Debt}{Debt + Equity} = operatorname{Debt Ratio}FCFE=NI−(1−DR)∗(FCI​−Dep+WCI​)DR=Debt+EquityDebt​=DebtRatio . LOS 28.f: Compare the FCFE model and dividend discount models. . The free cash flow to equity approach takes a control perspective that assumes that recognition of value should be immediate. Dividend discount models take a minority perspective. . LOS 28.g: Explain how dividends, share repurchases, share issues, and changes in leverage may affect future FCFF and FCFE. . Dividends, share repurchases, and share issues have no effect on FCFF and FCFE; changes in leverage have only a minor effect on FCFE and no effect on FCFF. . . LOS 28.h: Evaluate the use of net income and EBITDA as proxies for cash flow in valuation. . Net income is a poor proxy for FCFE. FCFE=NI+NCC−FCInv−WCInv+netborrowing⁡ FCFE = NI + NCC - FCInv - WCInv + operatorname{net borrowing}FCFE=NI+NCC−FCInv−WCInv+netborrowing EBITDA is a poor proxy for FCFF. FCFF=EBITDA∗(1−t)+Dep∗t−FCInv−WCInv FCFF = EBITDA * (1 - t) + Dep * t - FCInv - WCInvFCFF=EBITDA∗(1−t)+Dep∗t−FCInv−WCInv . LOS 28.i: Explain the single-stage (stable-growth), two-stage, and three-stage FCFF and FCFE models and select and justify the appropriate model given a company’s characteristics. . Single-stage FCFF model . valueofthefirm⁡=FCFF1WACC−g=FCFF0∗(1+g)WACC−gWACC=We∗re+Wd∗rd∗(1−t)Equityvalue⁡=Firmvalue⁡−MVofDebt⁡ operatorname{value of the firm} = frac{FCFF_{1}}{WACC - g} = frac{FCFF_{0} * (1 + g)}{WACC - g} WACC = W_{e} * r_{e} + W_{d} * r_{d} * (1 - t) operatorname{Equity value} = operatorname{Firm value} - operatorname{MV of Debt} valueofthefirm=WACC−gFCFF1​​=WACC−gFCFF0​∗(1+g)​WACC=We​∗re​+Wd​∗rd​∗(1−t)Equityvalue=Firmvalue−MVofDebt . Single-stage FCFE model . valueofequity⁡=FCFE1r−g=FCFE0∗(1+g)r−g operatorname{value of equity} = frac{FCFE_{1}}{r - g} = frac{FCFE_{0} * (1 + g)}{r - g}valueofequity=r−gFCFE1​​=r−gFCFE0​∗(1+g)​ . LOS 28.j: Estimate a company’s value using the appropriate free cash flow model(s). . LOS 28.k: Explain the use of sensitivity analysis in FCFF and FCFE valuations. . Sensitivity analysis shows how sensitive an analyst’s valuation results are to changes in each of a model’s input. . There are two major sources of error in valuation analysis: . Estimating the future growth in FCFF and FCFE. | The chosen base years for the FCFF or FCFE growth forecasts. | . LOS 28.l: Describe approaches for calculating the terminal value in a multistage valuation model. . terminalvalueinyearn⁡=trailing P/E⁡∗earningsinyearn⁡terminalvalueinyearn⁡=leading P/E⁡∗forecasted earnings in year n+1⁡ operatorname{terminal value in year n} = operatorname{trailing , P/E} * operatorname{earnings in year n} operatorname{terminal value in year n} = operatorname{leading , P/E} * operatorname{forecasted , earnings , in , year , n + 1}terminalvalueinyearn=trailingP/E∗earningsinyearnterminalvalueinyearn=leadingP/E∗forecastedearningsinyearn+1 . LOS 28.m: Evaluate whether a stock is overvalued, fairly valued, or undervalued based on a free cash flow valuation model. . LOS 29.a: Distinguish between the method of comparables and the method based on forecasted fundamentals as approaches to using price multiples in valuation, and explain economic rationales for each approach. . The method of comparables values a stock based on the average price multiple of the stock of similar companies. The economic rationale for the method of comparables is the Law of One Price, which assets that two similar assets should sell at comparable price multiples. . The method of forecasted fundamentals values a stock based on the ratio of its value from a discounted cash flow (DCF) model to some fundamental variable. The economic rationale for the method of forecasted fundamentals is that the value used in the numerator of the justified price multiple is derived from a DCF model. . LOS 29.b: Calculate and interpret a justified price multiple. . LOS 29.c: Describe rationales for and possible drawbacks to using alternative price multiples and dividends yield in valuation. . LOS 29.d: Calculate and interpret alternative price multiples and dividend yield. . A justified price multiple is what the multiple should be if the stock is fairly valued. If the actual multiple is greater than the justified price multiple, the stock is overvalued; if the actual multiple is less than the justified multiple, the stock is undervalued (all else equal). . P/E ratio . There are a number of rationales for using price-to-earnings (P/E) ratio in valuation: . Earnings power, as measured by earnings per share (EPS), is the primary determinant of investment value. | The P/E ratio is popular in the investment community. | Empirical research shows that P/E differences are significantly related to long-run average stock returns. | . P/E ratio have a number of shortcomings: . Earnings can be negative, which produces a meaningless P/E ratio. | The volatile, transitory portion of earnings makes the interpretation of P/Es diffciult for analysts. | Management discretion within allowed accounting practices can distort reported earnings, and thereby lessen the comparability of P/Es across firms. | . trailing P/E⁡=marketpricepershare⁡EPSoverprevious12monthsleading P/E⁡=marketpricepershare⁡forecastedEPSovernext12months⁡ operatorname{trailing , P/E} = frac{ operatorname{market price per share}}{EPS over previous 12 months} operatorname{leading , P/E} = frac{ operatorname{market price per share}}{ operatorname{forecasted EPS over next 12 months}}trailingP/E=EPSoverprevious12monthsmarketpricepershare​leadingP/E=forecastedEPSovernext12monthsmarketpricepershare​ Trailing P/E is not useful for forecasting and valuation if the firm’s business has changed. Leading P/E may not be relevant if earnings are sufficiently volatile so that next year’s earnings are not forecastable with any degree of accuracy. . P/B ratio . . Advantages of using the price-to-book (P/B) ratio include: . Book value is a cumulative amount that is usually positive, even when the firm reports a loss and EPS is negative. Thus, a P/B can typically be used when P/E cannot. | Book value is more stable than EPS, so it may be more useful than P/E when EPS is particularly high, low, or volatile. | Book value is an appropriate measure of net asset value for firms that primarily hold liquid assets. Examples include finance, investment, insurance, and banking firms. | P/B can be useful in valuing companies that are expected to go out of business. | Empirical research shows that P/Bs help explain differences in long-run average stock return. | . Disadvantages of using P/B include: . P/Bs do not reflect the value of intangible economic assets, such as human capital. | P/Bs can be misleading when there are significant differences in the asset size of the firms under consideration because in some cases the firm’s business model dictates the size of its asset base. | Different accounting conventions can obscure the true investment in the firm made by shareholders, which reduces the comparability of P/Bs across firms and countries. | Inflation and technological change can cause the book and market values of assets to differ significantly, so book value is not an accurate measure of the value of shareholders’ investment. | . P/B ratio⁡=marketvalueofequity⁡bookvalueofequity⁡=marketpricepershare⁡bookvaluepershare⁡bookvalueofequity⁡=common shareholders′ equity⁡=totalassets⁡−totalliabilities⁡−preferredstock⁡ operatorname{P/B , ratio} = frac{ operatorname{market value of equity}}{ operatorname{book value of equity}} = frac{ operatorname{market price per share}}{ operatorname{book value per share}} operatorname{book value of equity} = operatorname{common , shareholders&amp;#x27; , equity} = operatorname{total assets} - operatorname{total liabilities} - operatorname{preferred stock} P/Bratio=bookvalueofequitymarketvalueofequity​=bookvaluepersharemarketpricepershare​bookvalueofequity=commonshareholders′equity=totalassets−totalliabilities−preferredstock . A common adjustment is to use tangible book value, which is equal to book value of equity less intangible assets. Balance sheets should be adjusted for significant off-balance-sheet assets and liabilities and for differences between the fair and recorded value of assets and liabilities. Finally, book values often need to be adjusted to ensure comparability. . P/S ratio . The advantages of using the price-to-sales (P/S) ratio include: . Sales revenue is always positive. | Sales revenue is not as easy to manipulate. | P/S ratios are not as volatile as P/E multiples. | P/S ratios are particularly appropriate for valuing stocks in mature or cyclical industries and start-up companies with no record of earnings. | Like P/E and P/B ratios, empirical research finds that differences in P/S are significantly related to differences in long-run average stock returns. | . The disadvantages of using P/S ratios include: . High growth in sales does not necessarily indicate high operating profits as measured by earnings and cash flow. | P/S ratios do not capture differences in cost structures across companies. | While less subject to distortion, revenue recognition practices can still distort sales forecasts. | . P/S ratio⁡=marketvalueofequity⁡totalsales⁡=marketpricepershare⁡salespershare⁡ operatorname{P/S , ratio} = frac{ operatorname{market value of equity}}{ operatorname{total sales}} = frac{ operatorname{market price per share}}{ operatorname{sales per share}}P/Sratio=totalsalesmarketvalueofequity​=salespersharemarketpricepershare​ . P/CF ratio . Advantages of using the price-to-cash flow (P/CF) ratio include: . Cash flow is harder for managers to manipulate than earnings. | Price to cash flow is more stable than price to earnings. | Reliance on cash flow rather than earnings handles the problem of differences in the quality of reported earnings, which is problem for P/E. | Empirical evidence indicates that differences in price to cash flow are significantly related to differences in long-run average stock returns. | . There are two drawbacks to the price-to-cash flow ratio: . Items affecting actual cash flow from operations are ignored when the EPs plus noncash charges estimate is used. For example, noncash revenue and net changes in working capital are ignored. | From a theoretical perspective, free cash flow to equity (FCFE) is preferable to operating cash flow. However, FCFE is more volatile than operating cash flow, so it is not necessarily more informative. | . Dividend yield . Advantages of the dividend yield approach include: . Dividend yield contributes to total investment return. | Dividends are not as risky as the capital appreciation component of total return. | . Disadvantages of the dividend yield approach include: . The focus on dividend yield is incomplete because it ignores capital appreciation. | The dividend displacement of earnings concept argues that dividends paid now displace future earnings, which implies a trade-off between current and future cash flows. | . . LOS 29.e: Calculate and interpret underlying earnings, explain methods of normalizing earning per share (EPS), and calculate normalized EPS. . Underlying earnings . Underlying earnings are earnings that exclude nonrecurring components. . The countercyclical tendency to have high P/Es due to lower EPS at the bottom of the cycle and low P/Es due to high EPS at the top of the cycle is known as the Molodovsky effect. . . Normalized earnings . Normalized (or normal) earnings per share, which is an estimate of EPS in the middle of the business cycle. . Under the method of historical average EPS, the normalized EPS is estimated as the average EPS over some recent period, usually the most recent business cycle. | Under the method of average return on equity, normalized EPS is estimated as the average return on equity (ROE) multiplied by the current book value per share (BVPS). Once again, average ROE is often measured over the most recent business cycle. The reliance on BVPS reflects the effect of firms size changes more accurately than does the method of historical average EPS. | The method of historical average EPS ignores size effects, so the method of average ROE is preferred. . LOS 29.f: Explain and justify the use of earnings yield (E/P). . Negative earnings render P/E ratios meaningless. . Earnings yield (E/P) . A high E/P suggests a cheap security, and a low E/P suggests an expensive security. . LOS 29.g: Describe fundamental factors that influence alternative price multiples and dividend yield. . LOS 29.h: Calculate and interpret the justified price-to-earnings ratio (P/E), price-to-book ratio (P/B), and price-to-sales ratio (P/S) for a stock, based on forecasted fundamentals. . Leading P0/E1⁡=D1/E1r−g=1−br−gTrailing P0/E0⁡=D0/E0∗(1+g)r−g=(1−b)(1+g)r−gJustified P/B⁡=ROE(1−b)r−g=ROE−ROE∗br−g=ROE−gr−gJustified P/S⁡=E0/S0(1−b)(1+g)r−g=profitmargin⁡∗trailing P/E⁡Justified P/CF⁡=FCFE0(1+g)r−gCFJustified EV/EBITDA⁡=FCFF0(1+g)WACC−gEBITDAJustified D/P⁡=r−g1+g operatorname{Leading , P_{0}/E_{1}} = frac{D_{1} / E_{1}}{r - g} = frac{1 - b}{r - g} operatorname{Trailing , P_{0}/E_{0}} = frac{D_{0} / E_{0} * (1 + g)}{r - g} = frac{(1 - b)(1 + g)}{r - g} operatorname{Justified , P/B} = frac{ROE(1 - b)}{r - g} = frac{ROE - ROE*b}{r - g} = frac{ROE - g}{r - g} operatorname{Justified , P/S} = frac{E_{0} / S_{0}(1 - b)(1 + g)} {r - g} = operatorname{profit margin} * operatorname{trailing , P/E} operatorname{Justified , P/CF} = frac{ frac{FCFE_{0}(1 + g)}{r - g}}{CF} operatorname{Justified , EV/EBITDA} = frac{ frac{FCFF_{0}(1 + g)}{WACC - g}}{EBITDA} operatorname{Justified , D/P} = frac{r - g}{1 + g}LeadingP0​/E1​=r−gD1​/E1​​=r−g1−b​TrailingP0​/E0​=r−gD0​/E0​∗(1+g)​=r−g(1−b)(1+g)​JustifiedP/B=r−gROE(1−b)​=r−gROE−ROE∗b​=r−gROE−g​JustifiedP/S=r−gE0​/S0​(1−b)(1+g)​=profitmargin∗trailingP/EJustifiedP/CF=CFr−gFCFE0​(1+g)​​JustifiedEV/EBITDA=EBITDAWACC−gFCFF0​(1+g)​​JustifiedD/P=1+gr−g​ . LOS 29.j: Evaluate a stock by the method of comparables and explain the importance of fundamentals in using the method of comparables. . LOS 29.r: Evaluate whether a stock is overvalued, fairly valued, or undervalued based on comparison of multiples. . . Firms with multiples below the benchmark are undervalued, and firms with multiples above the benchmark are overvalued. . . Most analysts use trailing book values in calculating P/Bs. Relative P/B valuation must consider differences in ROE, risk, and expected growth in making comparisons among stocks. . P/S ratios are usually calculated based on trailing sales. Analysts need to control for profit margin, expected growth, risk, and the quality of accounting data in making comparisons. . The Fed and Yardeni Models . The Fed model considers the overall market to be overvalued (undervalued) when the earnings yield on the S&amp;P 500 Index is lower (higher) than the yield on 10-year U.S. Treasury bonds. . The Yardeni model includes expected earnings growth rate in the analysis: CEY=CBY−k∗LTEG+ϵiCEY=current earnings yield of the marketCBY=current Moody’s A-rated corporate bond yieldLTEG=five-year consensus earnings growth ratek=constant assigned by the market to earnings growth (about 0.20 in recent years) CEY = CBY - k * LTEG + epsilon_{i} CEY = text{current earnings yield of the market} CBY = text{current Moody&amp;#x27;s A-rated corporate bond yield} LTEG = text{five-year consensus earnings growth rate} k = text{constant assigned by the market to earnings growth (about 0.20 in recent years)}CEY=CBY−k∗LTEG+ϵi​CEY=current earnings yield of the marketCBY=current Moody’s A-rated corporate bond yieldLTEG=five-year consensus earnings growth ratek=constant assigned by the market to earnings growth (about 0.20 in recent years) . PE=1CBY−k∗LTEG frac{P}{E} = frac{1}{CBY - k * LTEG}EP​=CBY−k∗LTEG1​ . P/E ratio is negatively related to interest rates and positively related to growth. . LOS 29.k: Calculate and interpret the P/E-to-growth ratio (PEG) and explain its use in relative valuation. . PEGratio⁡=P/E ratio⁡g operatorname{PEG ratio} = frac{ operatorname{P/E , ratio}}{g}PEGratio=gP/Eratio​ . The PEG is interpreted as P/E per unit of expected growth. This implied valuation rule is that stocks with lower PEGs are more attractive than stocks with higher PEGs. . There are a number of drawbacks to using the PEG ratio: . The relationship between P/E and g is not linear, which makes comparisons difficult. | The PEG ratio still doesn’t account for risk. | The PEG ratio doesn’t reflect the duration of the high-growth period for a multistage valuation model. | . LOS 29.l: Calculate and explain the use of price multiples in determining terminal value in a multistage discounted cash flow (DCF) model. . Fundamental approach . TVn=Justified⁡PEn∗EPSn /TVn=Justified⁡PEn+1∗EPSn+1 TV_{n} = operatorname{Justified} frac{P}{E_{n}} * EPS_{n} ,/ TV_{n} = operatorname{Justified} frac{P}{E_{n + 1}} * EPS_{n + 1}TVn​=JustifiedEn​P​∗EPSn​/TVn​=JustifiedEn+1​P​∗EPSn+1​ . Comparable approach . TVn=Benchmark⁡PEn∗EPSn /TVn=Benchmark⁡PEn+1∗EPSn+1 TV_{n} = operatorname{Benchmark} frac{P}{E_{n}} * EPS_{n} , / TV_{n} = operatorname{Benchmark} frac{P}{E_{n + 1}} * EPS_{n + 1}TVn​=BenchmarkEn​P​∗EPSn​/TVn​=BenchmarkEn+1​P​∗EPSn+1​ . LOS 29.m: Explain alternative definitions of cash flow used in price and enterprise value (EV) multiples and describe limitations of each definition. . There are at least four definitions of cash flow available for use . Earnings-plus-non-cash-charges (CF) CF=netincome⁡+depreciation+amortization CF = operatorname{net income} + depreciation + amortizationCF=netincome+depreciation+amortization . It ignores some items that affect cash flow, such as noncash revenue and changes in net working capital. | . | Adjusted cash flow (adjusted CFO) . CFO is often adjusted for nonrecurring cash flows. US GAAP requires interest paid, interest received, and dividends received to be classified as operating cash flows. IFRS, however, is more flexible: interest paid may be classified as either an operating or financing cash flow, while interest and dividends received can be classified as either operating or investing cash flows. | . | Free cash flow to equity (FCFE) . Theory suggests that FCFE is the preferred way to define cash flow, but it is more volatile than straight cash flow. FCFE=CFO−FCInv+netborrowing⁡ FCFE = CFO - FCInv + operatorname{net borrowing}FCFE=CFO−FCInv+netborrowing | . | Earnings before interest, taxes, depreciation, and amortization (EBITDA) . EBITDA is a pretax, pre-interest measure that represents a flow to both equity and debt. Thus, it is better suited as an indicator of total company value than just equity value. Enterprise value-to-EBITDA ratio. | . | P/CF ratio⁡=marketvalueofequitycashflow=marketpricepershare⁡cashflowpershare⁡ operatorname{P/CF , ratio} = frac{market value of equity}{cash flow} = frac{ operatorname{market price per share}}{ operatorname{cash flow per share}}P/CFratio=cashflowmarketvalueofequity​=cashflowpersharemarketpricepershare​ . LOS 29.n: Calculate and interpret EV multiples and evaluate the use of EV/EBITDA. . Enterprise value (EV) . EV=marketvalueofcommonstock⁡+marketvalueofpreferredstock⁡+marketvalueofdebt⁡+minorityinterest⁡−cashandinvestments⁡ EV = operatorname{market value of common stock} + operatorname{market value of preferred stock} + operatorname{market value of debt} + operatorname{minority interest} - operatorname{cash and investments}EV=marketvalueofcommonstock+marketvalueofpreferredstock+marketvalueofdebt+minorityinterest−cashandinvestments . The rationale for subtracting cash and investments is that an acquirer’s net price paid for an acquisition target would be lower by the amount of the target’s liquid assets. EV/EBITDA ratio⁡=enterprisevalue⁡EBITDA operatorname{EV/EBITDA , ratio} = frac{ operatorname{enterprise value}}{EBITDA}EV/EBITDAratio=EBITDAenterprisevalue​ EV/EBITDA is useful in a number of situations: . The ratio may be more useful than P/E when comparing firms with different degrees of financial leverage. | EBITDA is useful for valuing capital-intensive businesses with high levels of depreciation and amortization. | EBITDA is usually positive even when EPS is not. | . EV/EBITDA has a number of drawbacks, however: . If working capital is growing, EBITDA will overstate CFO. | Because FCFF captures the amount of capital expenditures, it is more strongly linked with valuation theory than EBITDA. | . . Total Invested Capital (TIC) . sometimes referred to as market value of invested capital. TIC=marketvalueofequity⁡+marketvalueofdebt⁡ TIC = operatorname{market value of equity} + operatorname{market value of debt}TIC=marketvalueofequity+marketvalueofdebt TIC includes cash and short-term investments. . In addition to EV/EBITDA and TIC/EBITDA, analysts employ enterprise value ratios with EBIT, FCFF, or other items in the denominator. . LOS 29.o: Explain sources of differences in cross-border valuation comparisons. . Using relative valuation methods that requires the use of comparable firm is challenging in an alternative context due to differences in accounting methods, cultures, risk , and growth opportunities. Further, benchmarking is difficult because P/Es for individual firms in the same industry vary widely internationally and country market P/Es can vary significantly. . The usefulness of all price multiples is affected to some degree by differences in international accounting standards. The lease affected is P/adjusted CFO, P/FCFE, while P/B, P/E, P/EBITDA, and EV/EBITDA will be more seriously affected because they are more influenced by management’s choice of accounting methods and estimates. . LOS 29.p: Describe momentum indicators and their use in valuation. . Unexpected earnings or earnings surprise . earningssurprise⁡=reportedEPS⁡−expectedEPS⁡ operatorname{earnings surprise} = operatorname{reported EPS} - operatorname{expected EPS}earningssurprise=reportedEPS−expectedEPS . Standardized Unexpected Earnings (SUE) . StandardizedUnexpectedEarnings⁡=earningssurprise⁡standarddeviationofearningssurprise⁡ operatorname{Standardized Unexpected Earnings} = frac{ operatorname{earnings surprise}}{ operatorname{standard deviation of earnings surprise}}StandardizedUnexpectedEarnings=standarddeviationofearningssurpriseearningssurprise​ . A given size forecast error is more meaningful the smaller the size of the historical forecast errors. . Relative strength indicators compare a stock’s price or return performance during a given time period with its own historical performance or with some group of peer stocks. The economic rationale is that patterns of persistence or reversal may exist in stock returns. . LOS 29.q: Explain the use of the arithmetic mean, the harmonic mean, the weighted harmonic mean, and the median to describe the central tendency of a group of multiples. . Arithmetic mean - outlier 영향 큼 | Harmonic mean - small value 영향 큼 | Weighted harmonic mean - 가장 ideal | . weightedharmonicmean⁡=1∑i=1nwiXi operatorname{weighted harmonic mean} = frac{1}{ sum_{i = 1}^{n} frac{w_{i}}{X_{i}}}weightedharmonicmean=∑i=1n​Xi​wi​​1​ . LOS 30.a: Calculate and interpret residual income, economic value added, and market value added. . Residual income (RI), or economic profit, is the net income of a firm less a charge that measures stockholders’ opportunity cost of capital. . EVA and MVA . Economic value added (EVA) measures the value added for shareholders by management during a given year. EVA=NOPAT−WACC∗totalcapital⁡=EBIT∗(1−t)−$WACCNOPAT=net operating profit after tax EVA = NOPAT - WACC * operatorname{total capital} = EBIT * (1 - t) - $WACC NOPAT = text{net operating profit after tax}EVA=NOPAT−WACC∗totalcapital=EBIT∗(1−t)−$WACCNOPAT=net operating profit after tax The analyst should make the following adjustments (if applicable) to the financial statements before calculating NOPAT and invested capital: . Capitalize and amortize research and development charges (rather than expense them), and add them back to earnings to calculate NOPAT. | Add back charges on strategic investments that will generate returns in the future. | Eliminate deferred taxes and consider only cash taxes as an expense. | Treat operating leases as capital leases and adjust nonrecurring items. | Add LIFO reserve to invested capital and add back change in LIFO reserve to NOPAT. (LIFO -&gt; FIFO) | . Market value added (MVA) is the different between the market value of a firm’s long-term debt and equity and the book value of instead capital supplied by investors. It measures the value created by management’s decisions since the firm’s inception. MVA=MVoffirm⁡−BVoffirm⁡ MVA = operatorname{MV of firm} - operatorname{BV of firm}MVA=MVoffirm−BVoffirm . LOS 30.b: Describe the uses of residual income models. . The measurement of managerial effectiveness | The measurement of goodwill impariment | Equity valuation | . LOS 30.c: Calculate the intrinsic value of a common stock using the residual income model and compare value recognition in residual income and other present value models. . RIt=Et−r∗Bt−1=(ROE−r)∗Bt−1=NI−$rClean surplus relationship:Bt=Bt−1+Et−Dt RI_{t} = E_{t} - r * B_{t - 1} = (ROE - r) * B_{t - 1} = NI - $r text{Clean surplus relationship}: B_{t} = B_{t - 1} + E_{t} - D_{t}RIt​=Et​−r∗Bt−1​=(ROE−r)∗Bt−1​=NI−$rClean surplus relationship:Bt​=Bt−1​+Et​−Dt​ . The residual income valuation model breaks the intrinsic value of a stock into two elements: 1) current book value of equity and 2) present value of expected future residual income. V0=B0+(RI1(1+r)1+RI2(1+r)2+RI3(1+r)3+...) V_{0} = B_{0} + ( frac{RI_{1}}{(1 + r)^{1}} + frac{RI_{2}}{(1 + r)^{2}} + frac{RI_{3}}{(1 + r)^{3}} + ...)V0​=B0​+((1+r)1RI1​​+(1+r)2RI2​​+(1+r)3RI3​​+...) Values tends to be recognized earlier in the RI approach than in other present value-based approaches. To see this, recall that with a dividend discount model (DDM) or free cash flow to equity (FCFE) model, a large portion of the estimated intrinsic value comes from the present value of the expected terminal value. Yet the uncertainty of the expected terminal value is usually greater than any of the other forecasted cash flows because it occurs several years in the future. Valuation with residual income models, however, is relatively less sensitive to terminal value estimates, which reduces forecast error. . 주주자본비용 지급 후의 ‘순액’ 개념 (주주자본비용 해당분이 $BV_{0}$) . LOS 30.d: Explain fundamental determinants of residual income. . Single stage RIM . V=B0+(ROE−r)∗B0r−g=B0+RI1r−g V = B_{0} + frac{(ROE - r) * B_{0}}{r - g} = B_{0} + frac{RI_{1}}{r - g}V=B0​+r−g(ROE−r)∗B0​​=B0​+r−gRI1​​ . Tobin’s Q . Tobin′s Q⁡=MVofdebt⁡+MVofequity⁡Replacementcostoftotalassets⁡&gt;1:economic profit operatorname{Tobin&amp;#x27;s , Q} = frac{ operatorname{MV of debt} + operatorname{MV of equity}}{ operatorname{Replacement cost of total assets}} &gt; 1: text{economic profit}Tobin′sQ=ReplacementcostoftotalassetsMVofdebt+MVofequity​&gt;1:economic profit . Fundamental drivers of residual income: . If return on equity (ROE) is equal to the required return on equity, the justified market value of a share of stock is equal to its book value. When ROE is higher than the required return on equity, the firm will have positive residual income and will be valued at more than book value. | $ frac{(ROE - r) * B_0}{r - g}$ is the additional value generated by the firm’s ability to produce returns in excess of the cost of equity and, consequently, is the present value of a firm’s expected economic profits. | . LOS 30.e: Explain the relationship between residual income valuation and the justified price-to-book ratio based on forecasted fundamentals. . Among the various market multiples, residual income models are most closely related to the price-to-book value (P/B) ratio because the justified P/B is directly linked to expected future residual income. If ROE is greater than the required return on equity, the second term (the present value of residual income) will be positive, the market value will be greater than book value, and the justified P/B ratio will be greater than one. . LOS 30.f: Calculate and interpret the intrinsic value of a common stock using single-stage (constant-growth) and multistage residual income model. . LOS 30.g: Calculate the implied growth rate in residual income, given the market price-to-book ratio and an estimate of the required rate of return on equity. . LOS 30.h: Explain continuing residual income and justify an estimate of continuing residual income at the forecast horizon, given company and industry prospects. . Continuing residual income is the residual income that is expected over the long term. . The projected rate at which residual income is expected to fade over the life cycle of the firm is captured by a persistence factor, $ omega$, which is between zero and one. . Residual income is expected to persist at its current level forever: $ omega = 1$ | Residual income is expected to drop immediately to zero: $ omega = 0$ | Residual income is expected to decline over time as ROE falls to the cost of equity (in which case residual income is eventually zero. | Residual income is expected to decline to a long-run average level consistent with a mature industry. | . Higher persistence factors will be associated with the following: . Low dividend payouts. | Historically high residual income persistence in the industry. | PO가 낮으면 RR이 높고, g가 높아짐 | . Lower persistence factors will be associated with the following: . High return on equity | Significant levels of nonrecurring items. | High accounting accruals. | 지나치게 높으면 장기적으로 ROE가 감소 | . V0=B0+PV of interim high-growth RI⁡+PVofcontinuingresidualincome⁡PV of continuing residual income in year T-1⁡=RIT1+r−ω V_{0} = B_{0} + operatorname{PV , of , interim , high-growth , RI} + operatorname{PV of continuing residual income} operatorname{PV , of , continuing , residual , income , in , year , T-1} = frac{RI_{T}}{1 + r - omega}V0​=B0​+PVofinterimhigh-growthRI+PVofcontinuingresidualincomePVofcontinuingresidualincomeinyearT-1=1+r−ωRIT​​ . Assumption #1: Residual income persists at the current level forever . If $ omega=1$ PV of continuing residual income in year T-1⁡=RIT1+r−ω=RITr operatorname{PV , of , continuing , residual , income , in , year , T - 1} = frac{RI_{T}}{1 + r - omega} = frac{RI_{T}}{r}PVofcontinuingresidualincomeinyearT-1=1+r−ωRIT​​=rRIT​​ . Assumption #2: Residual income drops immediately to zero. . If $ omega=0$ PV of coninuing residual income in year T-1⁡=RIT1+r−ω=RIT1+r operatorname{PV , of , coninuing , residual , income , in , year , T - 1} = frac{RI_{T}}{1 + r - omega} = frac{RI_{T}}{1 + r}PVofconinuingresidualincomeinyearT-1=1+r−ωRIT​​=1+rRIT​​ . Assumption #3: Residual income declines over time to zero. . PV of continuing residual income in year T-1⁡=RIT1+r−ω operatorname{PV , of , continuing , residual , income , in , year , T - 1} = frac{RI_{T}}{1 + r - omega}PVofcontinuingresidualincomeinyearT-1=1+r−ωRIT​​ . Assumption #4: Residual income declines to long-run level in mature industry. . CRIT−1=RIt+(PT−BT)1+rPV of continuing residual income in year T⁡=PT−BTPT=BT∗forecasted price-to-book ratio⁡ CRI_{T - 1} = frac{RI_{t} + (P_{T} - B_{T})}{1 + r} operatorname{PV , of , continuing , residual , income , in , year , T} = P_{T} - B_{T} P_{T} = B_{T} * operatorname{forecasted , price-to-book , ratio}CRIT−1​=1+rRIt​+(PT​−BT​)​PVofcontinuingresidualincomeinyearT=PT​−BT​PT​=BT​∗forecastedprice-to-bookratio . Long-run level에 도달하면 MV - BV가 RI일 것이라는 가정 . . . LOS 30.i: Compare residual income models to dividend discount and free cash flow models. . LOS 30.j: Explain strengths and weaknesses of residual income models and justify the selection of a residual income model to value a company’s common stock. . Strengths . Terminal value does not dominate the intrinsic value estimate, as is the case with dividend discount and free cash flow valuation models. | Residual income models use accounting data, which is usually easy to find. | The models are applicable to firms that do not pay dividends or that do not have positive expected free cash flows in the short run. | The models are applicable even when cash flows are volatile. | The models focus on economic profitability rather than just on accounting profitability. | . Weaknesses . The models rely on accounting data that can be manipulated by management. | Reliance on accounting data requires numerous and significant adjustments. | The models assume that the clean surplus relation holds or that its failure to hold has been properly taken into account. | . Residual income models are appropriate under the following circumstances: . A frim does not pay dividends, or the stream of payments is too volatile to be sufficiently predictabl.e | Expected free cash flows are negative for the foreseeable future. | The terminal value forecast is highly uncertain, which makes dividend discount or free cash flow models less useful. | . Residual income models are not appropriate under the following circumstances: . The clean surplus accounting relation is violated significantly. | There is significantly uncertainty concerning the estimates of book value and return on equity. | . LOS 30.k: Describe accounting issues in applying residual income models. . Clean surplus violations . The clean surplus relationship (ending book value = beginning book value + net income - dividends) may not hold when items are charged directly to shareholders’ equity and do not go through the income statement. (OCI) Therefore, we have to adjust net income to account for these items if they are not expected to reverse in the future. . Foreign currency translation gains and losses that flow directly to retained earnings under the current rate method. | Certain pension adjustments. | Gains/losses on certain hedging instruments. | Changes in revaluation surplus (IFRS only) for long-lived assets. | Changes in the value of certain liabilities due to changes in the liability’s credit risk (IFRS only). | Changes in the market value of debt and equity securities classified as available-for-sale (unrealized gain or loss). | . The effect of violations of the clean surplus relationship is that net income is not correct, but book value is still correct. . Clean surplus violations (OCI items)의 경우 NI대신 Balance sheet의 Book value를 사용 . Variations from fair value . Common adjustments to the balance sheet necessary to reflect fair value include the following: . Operating leases should be capitalized by increasing assets and liabilities by the present value of the expected future operating lease payments. | Special purpose entities (SPEs) whose assets and liabilities are not reflected in the financial statements of the parent company should be consolidated. | Reserves and allowances should be adjusted. For example, the allowance for bad debts, which is an offset to accounts receivables, should reflect the expected loss experience. | Inventory for companies that use LIFO should be adjusted to FIFO by adding the LIFO reserve to inventory and equity, assuming no deferred tax impact. | The pension asset or liability should be adjusted to reflect the funded status of the plan, which is equal to the difference between the fair value of the plan assets and the projected benefit obligations (PBO). | Deferred tax liabilities should be eliminated and reported as equity if the liability is not expected to reserve. | . Intangible asset effects on book value . Two intangible asset require special attention: 1) goodwill and 2) R&amp;D expenditures. . To remove distortion, the amortization of intangibles capitalized during acquisition should be removed prior to computing the ROE used for residual income valuation. . The suggested analytical treatment of R&amp;D expenditures is less definitive, but we can make the general statement that the ROE estimate for a mature company should reflect the long-term productivity of the company’s R&amp;D expenditures: Productive R&amp;D expenditures increase ROE and residual income, and unproductive expenditure reduce ROE and residual income. . Nonrecurring items and other aggressive accounting practices . Nonrecurring items should not be included in residual income forecasts because they represent items that are not expected to continue in the future. Items that may need adjustment in measuring recurring earnings include discounted operations, accounting changes, unusual items, extraordinary items, and restructuring charges. -&gt; RI 계산 시 제외 . Firms may adopt other types of aggressive accounting practices that overstate the book value of assets and earnings. . International accounting differences . How reliable are earning forecasts? | Are there systematic violations of the clean surplus relation? | Do poor quality accounting rules result in financial statements that bear no resemblance to the economic reality of the business? | . LOS 30.l: Evaluate whether a stock is overvalued, fairly valued, or undervalued based on a residual income model. . LOS 31.a: Compare public and private company valuation. . . Company-specific factors . Stage of lifecycle: Private companies are typically less mature than public firms. | Size: Private firms typically have less capital, fewer assets, and fewer employees than public firms and, as such, can be riskier. Accordingly, private firms are often valued using greater risk premiums and greater required returns compared to public firms. | Quality and depth of management: Smaller private firms may not be able to attract as many qualified applicants as public firms. This may reduce the depth of management, slow growth, and increase risk at private firm. | Management / shareholder overlap: In most private firms, management has a substantial ownership position. In this case, external shareholders have less influence and the firm may be able to take a longer-term perspective. | Short-term investors: Management of public firm may take a shorter-term view compared to private firms where managers are long-term holders of significant equity interests. | Quality of financial and other information: A potential creditor or equity investor in a private firm will have less information than is available for a public firm. This leads to greater uncertainty, higher risk, and reduces private firm valuations. | Taxes: Private firms may be more concerned with taxes than public firms. | . Stock-specific factors . Liquidity: Private company equity typically has fewer potential owners and is less liquid than publicly traded equity. Thus, a liquidity discount is often applied in valuing privately held shares. | Restrictions on marketability: Private companies often have agreements that prevent shareholders from selling, reducing the marketability of shares. | Concentration of control | . Overall, company-specific factors can have positive or negative effects on private company valuations, whereas stock-specific factors are usually a negative. Compared to public companies, private companies haver greater heterogeneity so that the appropriate discount rates and methods for valuing them vary widely as well. . LOS 31.b: Describe uses of private business valuation and explain applications of greater concern of financial analysts. . . Transactions-related valuations . Venture capital funding | Initial public offering (IPO) | Sale in an acquisition | Bankruptcy proceedings | Performance-based managerial compensation | . Compliance-related valuations . Financial reporting: Valuation in this area are often related to goodwill impairment tests in which units of a public firm are valued using private company valuation methods. The reporting of stock-based compensation also required accurate valuation. | Tax purposes: At the firm level, transfer pricing, property taxes, and corporate restructuring may necessitate valuation. For individual equity owners, estate and gift tax issues may necessitate valuations. | . Litigation-related valuations . Litigation-related valuations may be required for shareholders suits, damage claims, lost profit claims, or divorce settlements. . LOS 31.c: Explain various definitions of value and demonstrate how different definitions can lead to different estimates of value. . Definitions of value . Fair market value: tax reporting A hypothetical willing and able seller sells the asset to a willing and able buyer. | An arm’s length transaction (neither party is compelled to act) in a free market. | A well-informed buyer and seller. | . | Market value: real estate and tangible asset appraisal (감정평가) An arm’s length transactions. | A well-informed buyer and seller. | . | Fair value: financial reporting and litigation | Investment value: private company sale A willing seller and buyer | An arm’s length transaction | An asset that has been marketed. | A well-informed and prudent buyer and seller | . | Intrinsic value: Investment analysis | . Effects of value definition - value의 정의가 다르면 자산가치가 다르게 산정 . intended purpose - 같은 비상장주식이라도 사용목적에 따라 다른 추정치 | 대주주의 FMV는 경영권가치 반영, 소액주주의 Investment value는 minority/marketability discount 고려 | 세무목적은 FMV, 재무보고 목적은 Fair value | . LOS 31.d: Explain the income, market, and asset-based approaches to private company valuation and factors relevant to the selection of each approach. . Income approach: Values a firm as the present value of its expected future income. | Market approach: Values a frim using the price multiples based on recent sales of comparable assets. | Asset-based approach: Values a firm’s assets minus its liabilities. | Early in its life, a firm’s future cash flows may be subject to so much uncertainty that an asset-based approach would be most appropriate. As the firm moves to a high growth phase, it might be appropriately valued using an income approach. A mature firm might be more appropriately valued using the market approach. . Firm size is also a consideration in choosing a valuation methodology. Price multiples from large public firms should not be used to value a small private firm without some assurance that the risk and growth prospects of the firms are similar. . Nonoperating assets constitute a portion of firm value and must be included when valuing a firm. . LOS 31.e: Explain cash flow estimation issues related to private companies and adjustments required to estimate normalized earnings. . In valuing a firm, the appropriate earnings definition is normalized earnings: “firm earnings if the firm were acquired.” . Estimating normalized earnings . Normalized earnings should exclude nonrecurring and unusual items. In the case of private firms with a concentrated control, there may be discretionary or tax-motivated expenses that need to be adjusted when calculating normalized earnings. . Artificially low earnings may also be the result of excessively high owner compensation or of personal expenses charged to the firm. Use of company-owned assets potentially require an adjustment to earnings. . Any real estate owned by the firm may merit treatment separate from that of firm operations for the following reasons: . The real estate may have different risk characteristics than firm operations. | The real estate may have different growth prospects than firm operations. | Depreciation is most often based on historical cost and may understate the current cost in the market of the use of the assets. | . If it is used in the firm’s business, a market-estimated rental expense is used in calculating or estimating earnings. The value of real estate is therefore separated from its operations and treated as a nonoperating asset. If the real estate is leased from a related party, the lease rate should be adjusted to a market rate. . Other adjustments are common to both private and public companies. Additionally, some private firm financial statements are reviewed rather than audited; In any case, the analyst should be prepared to make further adjustments. . Strategic and nonstrategic buyers . In a strategic transaction, valuation of the firm is based in part on the perceived synergies with the acquirer’s other assets. A financial transaction assumes no synergies, as when one firm buys another in a dissimilar industry. . Estimating cash flow . Also, controlling and noncontrolling equity interests will have quite different values. These differences should be accounted for in cash flow estimates and assumptions. . When there is significant uncertainty about a private company’s future operations, the analyst should examine several scenarios when estimating future cash flows. For development stage firms, scenarios could include a sale of the firm, an IPO, bankruptcy, or continued private operation. For a mature firm, scenarios might include different ranges of cash flows based on different assumed growth rates. . The analyst should be aware of the potential bias in management estimates. For example, management may overstate the value of goodwill or understate future capital needs. . Although analysts use FCFF or FCFE depending on the purposes of the valuation, FCFF is usually more appropriate when the significant changes in the firm’s capital structure are anticipated. The reasoning is that the discount rate used for FCFF valuation, the weighted average cost of capital (WACC), is less sensitive to leverage changes than the cost of equity, the discount rate used for FCFE valuation. . . LOS 31.f: Calculate the value of a private company using free cash flow, capitalized cash flow, and / or excess earnings methods. . Free cash flow method . The free cash flow method here is a two-stage model. . The capitalized cash flow method . Under this method, a single measure of economic benefit is divided by a capitalization rate to arrive at firm value, where the capitalization rate is the required rate of return minus a growth rate. This is a growing perpetuity model that assumes stable growth and is, in effect, a single-stage free cash flow model. It is most often used for small private companies. It may be suitable when no comparables are available, projections are quire uncertain, and stable growth is a reasonable assumption. . If growth is non-constant, the capitalized cash flow method (CCM) should be avoided in favor of the free cash flow method. valueofafirm⁡=FCFF1WACC−gvalueofequity⁡=FCFE1r−g operatorname{value of a firm} = frac{FCFF_{1}}{WACC - g} operatorname{value of equity} = frac{FCFE_{1}}{r - g}valueofafirm=WACC−gFCFF1​​valueofequity=r−gFCFE1​​ . The excess earnings method . Excess earnings are firm earnings minus the earnings required to provide the required rate of return on working capital and fixed assets. The value of intangible asset can be estimated as the present value of the (growing) stream of excess earnings (using the excess earnings and the growing perpetuity formula from the CCM). This value for the intangible assets is added to the values of working capital and fixed assets to arrive at firm value. . The excess earnings method (EEM) is used infrequently but can be used for small firms when their intangible assets are significant. However, the required return for working capital and fixed assets is subject to estimation error. operatornamefirmvalue=value of FC /WC(tangible)⁡+PV of future excess earning (Intangible)⁡ operatorname{firm value} = operatorname{value , of , FC , / WC (tangible)} + operatorname{PV , of , future , excess , earning , (Intangible)}operatornamefirmvalue=valueofFC/WC(tangible)+PVoffutureexcessearning(Intangible) . LOS 31.g: Explain factors that require adjustment when estimating the discount rate for private companies. . Size premiums: Size premiums are often added to the discount rates for small private companies. | Availability and cost of debt: A private firm may have less access to debt financing than a public firm. Because equity capital is usually more expensive than debt and because the higher operating risk of smaller private companies results in higher cost of debt as well. WACC will typically be higher for private firms. | Acquirer versus target: When acquiring a private firm, some acquirer will incorrectly use their own (lower) cost of capital, rather than the higher rate appropriate for the target, and arrive at a value of the target company that is too high. | Projection risk: Because of the lower availability of information from private firms and managers who are inexperienced at forecasting, that analysts should increase the discount rate used. | Lifecycle stage: It is particularly difficult to estimate the discount rate for firms in an early stage of development. If such firms have unusually high levels of unsystematic risk, the use of the CAPM may be inappropriate. | . . LOS 31.h: Compare models used to estimate the required rate of return to private company equity (for example, the CAPM, the expanded CAPM, and the build-up approach). . CAPM: Typically, beta is estimated from public firm data, and this may not be appropriate for private firms that have little change of going public or being acquired by a public firm. | Expanded CAPM: This version of the CAPM includes additional premiums for size and firm-specific (unsystematic) risk. | Build-up method: When it is not possible to find comparable public firms for beta estimation, the build-up method can be used. Beginning with the expected return on the market (beta is implicitly assumed to be one), premiums are added for small size, industry factors, and company specific factors. | . . LOS 31.i: Calculate the value of a private company based on market approach methods and describe advantages and disadvantages of each method. . Market approaches to valuing private firms use price multiples and data from previous public and private transactions. . large private firm: EBIT or EBITDA multiple | small private firm: NI multiple | Extremely small private firm: Revenue multiple | . . Guideline public company method . The guideline public company method (GPCM) uses price multiples from trade data for public companies, with adjustments to the multiples to account for differences between the subject firm and the comparables. . When evaluating a controlling equity interest in a private firm, the control premium should be estimated. Most public share trades are for small, noncontrolling interests; therefore, the price multiple does not reflect a control premium. . When estimating a control premium, the following issues should be considered: . Transaction type: strategic or financial (nonstrategic). A financial transactions typically has a smaller price premium. | Industry conditions: Periodically, there is a flurry in industry acquisition activity, diving up acquisition prices. In such markets, share prices of public companies may already reflect some premium for control, and adding a standard control premium to such share price may overstate the appropriate premium for control. | Type of consideration: Some historical acquisitions involves the acquirer’s stock rather than cash. Estimates of the control premium when acquisitions are made up shares that are at higher temporary or “bubble” values will be overstated. | Reasonableness: The use of control premium and price multiples can quickly result in significant differences in valuation from historical pricing. | . Guideline transactions method . When using the guideline transactions method (GTM), prior acquisition values for entire (public and private) companies that already reflect any control premiums are used, so no additional adjustment for a controlling interest is necessary. . Transaction type | Contingent consideration: Contingent consideration refers to that part of the acquisition price that is contingent on the achievement of specific company performance targets, such as receiving FDA approval for a drug. | Type of consideration | Availability of data | Date of data | . Prior transaction method . The prior transaction method (PTM) uses transactions data from the stock of the actual subject company and is most appropriate when valuing minority (noncontrolling) interests. . Ideally, the previous transactions would be arm’s-length, of the same motivation (strategic or financial) as the subject transaction, and fairly recent. . LOS 31.j: Describe the asset-based approach to private company valuation. . The value of ownership is equivalent to the fair value of its assets less the fair value of its liabilities. . Rarely used for going concerns: difficulty in valuing intangible assets. . Most appropriate for: . Resource firms | Financial service firms, investment companies (real estate investment trusts, closed-end investment companies) | small business with limited intangible assets or early stage companies | . LOS 31.k: Explain and evaluate the effects on private company valuations of discounts and premiums based on control and marketability. . The discount for lack of control . Minority shareholders are at a disadvantage relative to controlling shareholders because they have less power to select the directors and management. They cannot determine the investment and payout policies that affect the value of the firm and the distribution of earnings. . Controlling shareholders can also enjoy excessive compensation and other perquisites to the detriment of minority shareholders. DLOC=1−11+controlpremium⁡DLOC=Discount Lack of Control DLOC = 1 - frac{1}{1 + operatorname{control premium}} DLOC = text{Discount Lack of Control}DLOC=1−1+controlpremium1​DLOC=Discount Lack of Control . The discount for lack of marketability . If an interest in a firm cannot be easily sold, discounts for lack of marketability (DLOM) would be applied (sometimes termed a discount for lack of liquidity). It is often the case that if a DLOC is applied. . The DLOM varies with the following: . An impending IPO or firm sale would decrease the DLOM. | The payment of dividends would decrease the DLOM. | Earlier, higher payments would decrease the DLOM. | Contractual restrictions on selling stock would increase the DLOM. | A greater pool of buyers would decrease the DLOM. | Greater risk and value uncertainty would increase the DLOM. | . To estimate the DLOM, an analyst can use one of three methods. The price of the restricted shares is compared to the price of the publicly traded shares. . A third method would estimate the DLOM as the price of a put option divided by the stock price. totaldiscount⁡=1−(1−DLOC)(1−DLOM) operatorname{total discount} = 1 - (1 - DLOC)(1 - DLOM)totaldiscount=1−(1−DLOC)(1−DLOM) . . LOS 31.l: Describe the role of valuation standards in valuing private companies. . The Uniform Standards of Professional Appraisal Practice (USPAP) were created by the Appraisal Foundation. . The International Valuation Standards Committee (IVSC) has create the International Valuation Standards. . There are many challenges involved with the implementation of appraisal standards: . The compliance with these standards is usually at the discretion of the appraiser because most buyers are still unaware of them. | Because most valuation reports are private, it is very difficult for the organizations to ensure compliance to the standards. | Although the organizations provide technical guidance on the use of their standards, it is necessarily limited due to the heterogeneity of valuations. | .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/09/29/CFA-Level-2-Equity.html",
            "relUrl": "/markdown/2021/09/29/CFA-Level-2-Equity.html",
            "date": " • Sep 29, 2021"
        }
        
    
  
    
        ,"post23": {
            "title": "CFA Level 2 Fixed Income",
            "content": "Fixed Income . . LOS 32.a: Describe relationships among spot rates, forward rates, yield to maturity, expected and realized returns on bonds, and the shape of the yield curve. . Spot rates . . Spot rates are the annualized market interest rates for a single payment to be received in the future. Generally, we use spot rates for government securities (risk-free) to generate the spot rate curve. . The spot interest rate is the yield to maturity of a zero-coupon bond. . The term structure of spot rates is known as the spot curve. The shape and level of the spot curve changes continuously with the market prices of bonds. . Forward rates . The annualized interest rate on a loan to be initiated at a future period is called the forward rate for that period. . The term structure of forward rates is called the forward curve. . Forward curves and spot curves are mathematically related. . Yield to maturity . . YTM of a zero-coupon bond with maturity T is the spot interest rate for a maturity of T. . For a coupon bond, if the spot rate curve is not flat, the YTM will not be the same as the spot rate. . The yield on a coupon bond is a weighted average of three spot rates. . Expected and realized returns on bonds . . Expected return is the ex-ante holding period return that a bond investor expects to earn. The expected return will be equal to the bond’s yield only when all three of the following are true: . - The bond is held to maturity . - All payments (coupon and principal) are made on time and in full . o option-free, no default risk, no prepayment risk . - All coupons are reinvested at the original YTM . o If the yield curve is not flat, the coupon payments will not be reinvested at the YTM and the expected return will differ from the yield. . . Realized return on a bond refers to the actual return that the investor experiences over the investment’s holding period. Realized return is based on actual reinvestment rates. . LOS 32.b: Describe the forward pricing and forward rate models and calculate forward and spot prices and rates using those models. . The forward pricing model . . Forward price는 현재 spot price에 투자하는 대신 무위험 수익률을 노렸을 경우의 가치와 동일하다. 그래서 forward price를 risk-free rate으로 할인하면 현재 시점의 spot price와 같은 값이 나오는 것. 이게 arbitrage-free pricing . 현재 시점에서 Forward contract value는 0 . The forward rate model . . . This model is useful because it illustrates how forward rates and spot rates are interrelated. . Spot rate과 forward rate은 geometric average 관계 . Spot curve가 upward sloping이면 forward rate은 항상 spot rate보다 크고, 그러므로 forward curve는 spot curve 위에 위치한다. Spot curve가 downward sloping이면, forward rate은 spot rate보다 항상 작고, 그러므로 forward curve는 spot curve 밑에 위치한다. . . LOS 32.c: Describe how zero-coupon rates (spot rates) may be obtained from the par curve by bootstrapping. . . . A par rate is the yield to maturity of a bond trading at par. Generally, par curve refers to the par rates for government or benchmark bonds. . By using a process called bootstrapping, spot rates or zero-coupon rates can be derived from the par curve. . LOS 32.d: Describe the assumptions concerning the evolution of spot rates in relation to forward rates implicit in active bond portfolio management. . Relationships between spot and forward rates . For an upward-sloping spot curve the forward rate rises as increases. For downward-sloping spot curve, the forward rate declines as increases. For an upward-sloping spot curve, the forward curve will be above the spot curve. Conversely, when the spot curve is downward sloping, the forward curve will be below it. . The spot rate for a long-maturity security will equal the geometric mean of a series of one-year forward rates. . Forward price evolution . . Forward rate는 현재 상황에서 관찰된 미래 시점의 단위기간 금리일 뿐, 시간이 지나면 변화한다. 그러므로 forward contract들도 expiration이 되면 해당 시점의 contract value와 forward price가 다를 수 있다. 만기 시점의 contract value = forward price이려면, 계약 시점에 관찰된 forward rate가 미래인 만기 시점에 spot rate로 정확히 실현되어야 한다. . If the future spot rates actually evolve as forecasted by the forward curve, the forward price will remain unchanged. Therefore, a change in the forward price indicates that the future spot rate(s) did not conform to the forward curve. When spot rates turn out to be lower (higher) than implied by the forward curve, the forward price will increase (decrease). A trader expecting lower future spot rates (then implied by the current forward rates) would purchase the forward contract to profit from its appreciation. . For a bond investor, the return on a bond over a one-year horizon is always equal to the one-year risk-free rate if the future spot rates evolve as predicted by today’s forward curve. If the spot curve one year from today is not the same as that predicted by today’s forward curve, the return over the one-year period will differ, with the return depending on the bond’s maturity. . An active portfolio manager will try to outperform the overall bond market by predicting how the future spot rates will differ from those predicted by the current forward curve. . If an investor believes that future spot rates will be lower than corresponding forward rates, then she will purchase bonds (at a presumably attractive price) because the market appears to be discounting future cash flows at “too high” of a discount rate. . . LOS 32.e: Describe the strategy of riding the yield curve. . Riding the yield curve (YTM curve) . . With an upward-sloping interest rate term structure, investors seeking superior returns may pursue a strategy called riding the yield curve (also known as rolling down the yield curve). Under this strategy, an investor will purchase bonds with maturities longer than his investment horizon. In an upward-sloping yield curve, shorter maturity bonds have lower yields than longer maturity bonds. As the bond approaches maturity, it is valued using successively lower yields and, therefore, at successively higher prices. . If the yield curve remains unchanged over the investment horizon, riding the yield curve strategy will produce higher returns than a simple maturity matching strategy, increasing the total return of a bond portfolio. The greater the difference between the forward rate and the spot rate, and the longer the maturity of the bond, the higher the total return. (shoulder effect) . LOS 32.f: Explain the swap rate curve and why and how market participants use it in valuation. . The swap rate curve . . In a plain vanilla interest rate swap, one party makes payments based on a fixed rate while the counterparty makes payments based on a floating rate. The fixed rate in an interest rate swap is called the swap fixed rate or swap rate. . LOS 32.g: Calculate and interpret the swap spread for a given maturity. . Swap spread . Swap spread refers to the amount by which the swap rate exceeds the yield of a government bond with the same maturity . Swap spread = SFR – treasury yield . Swap spread는 banking industry의 credit risk를 반영 . Swap spreads are almost always positive, reflecting the lower credit risk of governments compared to the credit risk of surveyed banks that determines the swap rate. . I-spread . . The I-spread for a credit-risky bond is the amount by which the yield on the risky bond exceeds the swap rate for the same maturity. The missing swap rate can be estimated from the swap rate curve using linear interpolation. . I-spread = credit-risky bond yield – SFR . While a bond’s yield reflects time value as well as compensation for credit and liquidity risk, I-spread only reflects compensation for credit and liquidity risks. The higher the I-spread, the higher the compensation for liquidity and credit risk. . LOS 32.h: Describe the Z-spread . The Z-spread . . The Z-spread is the spread that, when added to each spot rate on the default-free spot curve, makes the present value of a bond’s cash flows equal to the risky bond’s market price. Therefore, the Z-spread is a spread over the entire spot rate curve. . The term zero volatility in the Z-spread refers to the assumption of zero interest rate volatility. Z-spread is not appropriate to use to value bonds with embedded options. . Los 32.i: Describe the TED and LIBOR-OIS spreads. . . TED spread . The TED in TED spread is an acronym that combines the T in T-bill with ED, the ticker symbol for the Eurodollar futures contract. . TED spread = 3-month LIBOR rate – 3-month T-bill rate . Because T-bill are considered to risk free while LIBOR reflects the risk of lending to commercial banks, the TED spread is seen as an indication of the risk of interbank loans. A rising TED spread indicates that market participants believe banks are increasingly likely to default on loans and that risk-free T-bill are becoming more valuable in comparison. The TED spread captures the risk in the banking system more accurately than does the 10-year swap spread. . SFR은 long-term rate . OIS spread . OIS stands for overnight indexed swap. The OIS rate roughly reflects the federal funds rate and includes minimal counterparty risk. 거의 credit risk 없음 . The OIS spread is the amount by which the LIBOR rate which includes credit risk exceeds the OIS rate which includes only minimal credit risk. This makes the OIS spread a useful measure of credit risk and an indication of the overall wellbeing of the banking system. Credit risk도 포함되어 있지만, OIS spread는 liquidity를 더 잘 반영함 . A low OIS spread is a sign of high market liquidity while a high OIS spread is a sign of high market liquidity while a high OIS spread is a sign that banks are unwilling to lend due to concerns about creditworthiness. . 낮을수록 High liquidity, 높을수록 low liquidity . LOS 32.j: Explain traditional theories of the term structure of interest rates and describe the implications of each theory for forward rates and the shape of the yield curve. . Term structure를 해석하려는 theory를 의미 . Term structure of interest rates에서 interest rates는 순수한 화폐의 시간가치만 반영한 spot rate, forward rate를 의미 . . . . Unbiased expectation theory . Pure expectation theory . We hypothesize that it is investors’ expectations that determine the shape of the interest rate term structure. . Specifically, this theory suggests that forward rates are solely a function of expected future spot rates, and the every maturity strategy has the same expectation return over a given investment horizon. In other words, long-term interest rates equal the mean of future expected short-term rates. This implies that an investor should earn the same return by investing in a five-year bond or by investing in a three-year bond and then a two-year bond after the three-year bond matures. Similarly, an investor with a three-year investment horizon would be indifferent between investing in a three-year bond or in a five-year bond that will be sold two years prior to maturity. The underlying principle behind the pure expectations theory is risk neutrality. . The implications for the shape of the yield curve under the pure expectations theory are: . - if the yield curve is upward sloping, short-term rates are expected to rise. . - if the curve is downward sloping, short-term rates are expected to fall. . - A flat yield curve implies that the market expects short-term rates to remain constant. . Local expectations theory . The local expectations theory preserves the risk-neutrality assumption only for short-term holding periods. . Liquidity preference theory . The liquidity preference theory of the term structure addresses the shortcomings of the pure expectations theory by proposing that forward rates reflects investors’ expectations of future spot rates, plus a liquidity premium to compensate investors for exposure to interest rate risk. The theory suggests that this liquidity premium is positively related to maturity. . The liquidity preference theory states that forward rates are upward-biased estimates of the market’s expectation of future rates because they include a liquidity premium. Therefore, a positive-sloping yield curve may indicate that either: (1) the market expects future interest rates to rise or (2) rates are expected to remain constant (or even fall), but the addition of the liquidity premium results in a positive slope. . 기대가 어떻든, liquidity premium이 있으니까 positive-sloping . Segmented markets theory . The shape of the yield curve is determined by the preferences of borrowers and lenders, which drives the balance between supply of and demand for loans of different maturities. This is called the segmented markets theory because the theory suggests that the yield at each maturity is determined independently of the yields at other maturities; we can think of each maturity to be essentially unrelated to other maturities. . The segmented markets theory supposes that various market participants only deal in securities of a particular maturity because they are prevented from operating at different maturities. . Preferred habitat theory . The preferred habitat theory also proposes that forward rates represent expected future spot rates plus a premium, but it does not support the view that this premium is directly related to maturity. . Premiums are related to supply and demand for funds at various maturities. . LOS 32.k: Describe modern term structure models and how they are used. . . Modern term structure models . Modern interest rate term structure models attempt to capture the statistical properties of interest rates movements and provide us with quantitatively precise descriptions of how interest rates will change. . Equilibrium term structure models. . . To-be model . Equilibrium term structure models attempt to describe changes in the term structure through the use of fundamental economic variables that drive interest rates. . CIR model, Vasicek model – single factor model . CIR model, Vasicek model 둘 다 drift term, random component로 이루어져있고, Vasicek model은 random component에서 interest rate의 차수가 0, CIR model은 차수가 0.5이다. . CIR model은 negative interest rate을 방지하고, 현재의 금리수준이 금리의 변동성에 영향을 주는 반면, Vasicek model은 negative interest rate이 가능하고, 현재의 금리수준이 금리의 변동성에 영향을 주지 않는다. . Drift term에서 a는 회귀상수, 장기평균으로 회귀하는 속도를 의미 . b는 장기평균, r은 연재 금리수준을 의미. . Arbitrage-free models . Arbitrage-free models of the term structure of interest rates begin with the assumption that bonds trading in the market are correctly priced, and the model is calibrated to value such bonds consistent with their market price. These models do not try to justify the current yield curve; rather, they take this curve as given. . As-is model . Calibration – parameter를 추정하는 과정 . Benchmark bond를 대상으로 설명하고 있음 . LOS 32.l: Explain how a bond’s exposure to each of the factors driving the yield curve can be measured and how these exposures can be used to manage yield curve risks. . Managing yield curve risks . Yield curve risk refers to risk to the value of a bond portfolio due to unexpected changes in the yield curve. . Effective duration . . . Effective duration은 yield curve가 parallel shift 할 때만 의미있음 . Non-parallel shift 하는 경우를 shaping risk라고 부름 . Key rate duration . . Key rate duration is the sensitivity of the value of a security (or a bond portfolio) to changes in a single pare rate, holding all other spot rates constant. In other words, key rate duration isolate price sensitivity to a change in the yield at a particular maturity only. . Every security or portfolio has a set of key rate durations-one for each key rate. . Key rate duration은 key rate으로 설정한 해당 금리의 변화에 따라 가격이 얼마나 변하는지 나타내는 민감도이다. 만약 해당 금리의 변화가 모두 같으면, Key rate duration들의 합은 effective duration과 같다. . Sensitivity to parallel, steepness, and curvature movements . . Level – a parallel increase or decrease of interest rates . Steepness – long-term interest rates increase while short-term rates decrease . Curvature – increasing curvature means short- and long-term interest rates increase while intermediate rates do not change. . LOS 32.m: Explain the maturity structure of yield volatilities and their effect on price volatility. . . Interest rate volatility becomes particularly important when securities have embedded options, which are especially sensitive to volatility. . Term structure of interest rate volatility – short-term interest rates are generally more volatile than are long-term rates . Volatility at the long-maturity end is thought to be associated with uncertainty regarding the real economy and inflation, while volatility at the short-maturity end reflects risks regarding monetary policy. . LOS 32.a: Explain what is meant by arbitrage-free valuation of a fixed-income instrument. . . The basic principle of the ‘law of one price’ in freely functioning markets drives this analytical framework. . Arbitrage-free valuation methods value securities such that no market participant can earn an arbitrage profit in a trade involving that security. . Two types – value additivity (when the value of whole differs from the sum of the values of parts) / dominance (when one asset trades at a lower price than another asset with identical characteristics) . . Reconstitution– Interest-only (IO) strip and principle-only (PO) strip to coupon bond . Stripping – coupon bond to IO strip and PO strip . LOS 33.b: Calculate the arbitrage-free value of an option-free, fixed-rate coupon bond. . While we can value option-free bonds with a simple spot rate curve, for bond with embedded options, the path and size of changes in future rates will affect the probability of the option being exercised and the underlying future cash flows. . LOS 33.c: Describe a binomial interest rate tree framework. . The binomial interest rate tree framework assumes that interest rates have an equal probability of taking one of two possible values in the next period (hence the term binomial). . The relationship among the set of rates associated with each individual nodal period is a function of the interest rate volatility assumed to generate the tree. Volatility estimates can be based on historical data or can be implied volatility derived from interest rate derivatives. . The binomial interest rate tree framework is a lognormal random walk model with two desirable properties: (1) higher volatility at higher rates and (2) non-negative interest rates. . Binomial tree . . . . LOS 33.d: Describe the backward induction valuation methodology and calculate the value of a fixed-income instrument given its cash flow at each node. . Because the probabilities of an up move and a down move are both 50%, the value of a bond at a given node in a binomial tree is the average of the present values of the two possible values from the next period. The appropriate discount rate is the forward rate associated with the node. . . . . LOS 33.e: Describe the process of calibrating a binomial interest rate tree to match a specific term structure. . Three rules . 1. The interest rate tree should generate arbitrage-free values for the benchmark security. (fair pricing assumption) This means that the value of bonds produced by the interest rate tree must be equal to their market price, which excludes arbitrage opportunities. . 2. Adjacent forward rates (for the same period) are two standard deviations apart. . 3. The middle forward rate (or mid-point in case of even number of rates) in a period is approximately equal to the implied (from the benchmark spot rate curve) one-period forward rate for that period. . LOS 33.f: Compare pricing using the zero-coupon yield curve with pricing using an arbitrage-free binomial lattice. . For bonds with embedded options, the future cash flows are uncertain as they depend on whether the embedded option will be in the money (and hence exercised). Hence, to value bonds with embedded options, we have to allow for rates to fluctuate. . LOS 33.g: Describe pathwise valuation in a binomial interest rate framework and calculate the value of a fixed-income instrument given its cash flows along each path. . For a binomial interest rate tree with n periods, there will be 2^(n-1) unique paths. . LOS 33.h: Describe a Monte Carlo forward-rate simulation and its application. . Path dependency . Unlike call risk, prepayment risk is affected not only by the level of interest rate at a particular point in time, but also by the path rates took to get there. . An important assumption of the binomial valuation process is that the value of the cash flows at a given point in time is independent of the path that interest rates followed up to that point. In other words, cash flows are not path dependent; cash flows at any node do not depend on the path rates took to get to that node. Because of path dependency of cash flows of mortgage-backed securities, the binomial tree backward induction process cannot be used to value such securities. We instead use the Monte Carlo simulation method to value mortgage-backed securities. . A monte Carlo forward-rate simulation involves randomly generating a large number of interest rate paths, using a model that incorporates a volatility assumption and assumed probability distribution. A key feature of the Monte Carlo method is that the underlying cash flows can be path dependent. . As with pathwise valuation, the value of the bond is the average of values from the various paths. The simulated paths should be calibrated so benchmark interest rate paths value benchmark securities at their market price (i.e. arbitrage-free valuation). The calibration process entails adding (subtracting) a constant to all rates when the value obtained from the simulated paths is too high (too low) relative to market prices. This calibration process results in a drift adjusted model. . A Monte Carlo simulation may impose upper and lower bounds on interest rates as part of the model generating the simulated paths. These bounds are based on the notion of mean reversion; rates tend to rise when they are too low and fall when they are too high. . . LOS 34.a: Describe fixed-income securities with embedded options. . Callable bonds give the issuer the option to call back the bond; the investor is short the call option. . Putable bonds allow the investor to put (sell) the bond back to the issuer prior to maturity. The investor is long the underlying put option. . Extendible bond allows the investor to extend the maturity of the bond. . Style . European style – whereby the option can only be exercised on a single day immediately after the lockout period . American style – whereby the option can be exercised at any time after the lockout period . Bermudan-style – whereby the option can be exercised at fixed dates after the lockout period . Complex options . - Estate put . - Sinking fund bonds . . Los 34.b: Explain the relationships between the values of a callable or putable bond, the underlying option-free (straight) bond, and the embedded option. . Value of callable bond = value of straight bond – value of call option on the callable bond . Long callable bond = long straight bond + short call option on the callable bond . Value of putable bond = value of straight bond + value of put option on the putable bond . Long putable bond = long straight bond + long put option on the putable bond . . LOS 34.c: Describe how the arbitrage-free framework can be used to value a bond with embedded options. . LOS 34.f: Calculate the value of a callable or putable bond from an interest rate tree. . When valuing a callable bond, the value at any node where the bond is callable must be either the price at which the issuer will call the bond or the computed value if the bond is not called, whichever is lower. This is known as the call rule. Similarly, for a putable bond, the value used at any node corresponding to a put date must be either the price at which the investor will put the bond or the computed value if the bond is not put, whichever is higher. This is known as the put rule. . LOS 34.d: Explain how interest rate volatility affects the value of a callable or putable bond. . Option values are positively related to the volatility of their underlying. Accordingly, when interest rate volatility increases, the values of both call and put options increase. The value of a straight bond is affected by changes in the level of interest rates but is unaffected by changes in the volatility of interest rates. . When interest rate volatility increases, the value of a callable bond decreases and the value of a putable bond increases. . . . LOS 34.e: Explain how changes in the level and shape of the yield curve affect the value of a callable or putable bond. . Level of interest rates . As interest rates decline, the value of a callable bond rises less rapidly than the value of an otherwise-equivalent straight bond. As interest rates increase, the value of a putable bond falls less rapidly than the value of an otherwise-equivalent straight bond. . Call option on a bond value is inversely related to the level of interest rates, while put option on a bond value varies directly with the level of interest rates. . Shape of the yield curve . As an upward-sloping yield curve becomes flatter, the call option value increases. Put option value therefore declines as an upward-sloping yield curve flattens. . LOS 34.g: Explain the calculation and use of option-adjusted spreads. . The OAS is added to the tree after the adjustment for the embedded option. Hence the OAS is calculated after the option risk has been removed. – call/put rule로 인해 option risk가 제거됨. 그냥 OAS만큼 트리 전체를 올렸다 내렸다하는 것 . OAS is used by analysts in relative valuation; bonds with similar credit risk should have the same OAS. If the OAS for a bond is higher than the OAS of its peers, it is considered to be undervalued and hence an attractive investment. Conversely, bonds with low OAS relative to peers are considered to be overvalued. . . LOS 34.h: Explain how interest rate volatility affects option-adjusted spreads. . The OAS calculated varied depending on the volatility assumption used. When we use a higher estimate of volatility to value a callable bond, the calculated value of the call option increases, the calculated value of the straight bond is unaffected, and the computed value (not the market price) of the callable bond decreases (since the bondholder is short the option). Hence when the estimated (or assumed) volatility (of benchmark rates) used in a binomial tree is higher, the computed value of a callable bond will be lower-and therefore closer to its true market price. The constant spread that needs to be added to the benchmark rates to correctly price the bond (the OAS) is therefore lower. . As the assumed level of volatility used in an interest rate tree increases, the computed OAS (for a given market price) for a callable bond decreases. Similarly, the computed OAS of a putable bond increases as the assumed level of volatility in the binomial tree increases. . Assumed level of volatility Risk-free value OAS callable OAS putable       . calls | puts | callable | Putable |   |   |   | . High | high | high | low | High | low | High | . Low | low | low | high | low | high | Low | . . LOS 34.i: Calculate and interpret effective duration of a callable or putable bond. . . 1. Given assumptions about benchmark interest rates, interest rate volatility, and any calls and/or puts, calculate the OAS for the issue using the current market price and the binomial model. . 2. Impose a small parallel shift in the benchmark yield curve by an amount of equal to delta y. . 3. Build a new binomial interest rate tree using the new yield curve. . 4. Add the OAS from step 1 to each of the one-year rates in the interest rate tree to get a modified tree. . 5. Compute estimated price if yield increases by delta y using this modified interest rate tree. . 6. Repeat step 2 through 5 using a parallel rate shift of delta y to obtain a value of estimated price if yield decreases by delta y using this modified interest rate tree. . . . . . LOS 34.j: Compare effective durations of callable, putable, and straight bonds. . Both call and put options have the potential to reduce the life of a bond, so the duration of callable and putable bonds will be less than or equal to the duration of their straight counterparts. . - Effective duration (callable, putable) &lt;= effective duration (straight) . - Effective duration of floater = time (in years) to next reset . An increase (decrease) in rates would decrease the effective duration of a putable (callable) bond. . LOS 34.k: Describe the use of one-sided durations and key rate durations to evaluate the interest rate sensitivity of bonds with embedded options. . One-sided durations . For bonds with embedded options, one-sided durations-durations that apply only when interest rates rise (or, alternatively, only when rates fall)-are better at capturing interest rate sensitivity than simple effective duration. When the underlying option is at-the-money (or near-the-money), callable bonds will have lower one-sided down-duration than one-sided up-duration: the price change of a callable when rates fall is smaller than the price change for an equal increase in rates. Conversely, a near-the-money putable bond will have larger one-sided down-duration than one-sided up-duration. . Key rate duration . Key rate duration or partial durations capture the interest rate sensitivity of a bond to changes in yields (par rates) of specific benchmark maturities. Key rate duration is used to identify the interest rate risk from changes in the shape of the yield curve (shaping risk). . Generalization . 1. If an option-free bond is trading at par, the bond’s maturity-matched rate is the only rate that affects the bond’s value. Its maturity key rate duration is the same as its effective duration, and all other rate durations are zero. . 2. For an option-free bond not trading at par, the maturity-matched rate is still the most important rate. . 3. A bond with low (or zero) coupon rate may have negative key rate durations for horizons other than the bond’s maturity. . 4. A callable bond with a low coupon rate is unlikely to be called; hence, the bond’s maturity-matched rate is the most critical rate. . 5. All else equal, higher coupon bonds are more likely to be called, and therefore the time-to-exercise rate will tend to dominate the time-to-maturity rate. . 6. Putable bonds with high coupon rates are unlikely to be put, and thus are most sensitive to their maturity-matched rates. . 7. All else equal, lower coupon bonds are more likely to be put, and therefore the time-to-exercise rate will tend to dominate the time-to-maturity rate. . . . . . LOS 34.l: Compare effective convexities of callable, putable, and straight bonds. . When the underlying call option is near the money, its effective convexity turns negative. Putable bonds exhibit positive convexity throughout. . . . LOS 34.m: Calculate the value of a capped or floored floating-rate bond. . A capped floater effectively contains an issuer option that prevents the coupon rate from rising above a specified maximum rate known as the cap. . Value of a capped floater = value of a straight floater – value of the embedded cap . A floored floater has a coupon rate that will not fall below a specified minimum rate known as the floor. . Value of a floored floater = value of a straight floater + value of the embedded floor . We can use the standard backward induction methodology in a binomial interest rate tree to value a capped or floored floater. . . LOS 34.n: Describe defining features of a convertible bond. . The owner of a convertible bond has the right to convert the bond into a fixed number of common shares of the issuer during a specified timeframe (conversion period) and at a fixed amount of money (conversion price). Convertibles allow investors to enjoy the upside on the issuer’s stock, although this comes at a cost of lower yield. The issuer of a convertible bond benefits from a lower borrowing cost, but existing shareholders may face dilution if the conversion option is exercised. . The conversion ratio is the number of common shares for which a convertible bond can be exchanged. Initial conversion ratio of 10 allows its holder to convert one $1000 par bond into 10 shares of common stock. . Conversion value = stock-equivalent value . Minimum value of CB = Max(conversion value, straight value) . Market conversion price = BEP stock price . The conversion price of the bond is $1000 / 10 shares = $100. . Offer documents may also provide a contingent put option in the event of any change-of-control events such as mergers. Alternatively, lower conversion price may be specified in the event of a change of control. The conversion ratio may also be adjusted upward if the company pays a dividend in excess of a specified threshold dividend. . . LOS 34.o: Calculate and interpret the components of a convertible bond’s value. . Conversion value = market price of stock * conversion ratio . The straight value, or investment value, of a convertible bond is the value of the bond if it were not convertible-the present value of the bond’s cash flows discounted at the return required on a comparable option-free issue. . Minimum value of a convertible bond = max(straight value, conversion value) . Market conversion price = market price of convertible bond / conversion ratio = BEP stock price . Market conversion premium per share = market conversion price – stock’s market price . Market conversion premium은 downside protection으로 인한 premium . Market conversion premium ratio = market conversion premium per share / market price of common stock . Premium over straight value = market price of convertible bond / straight value – 1 . All else equal, the greater the premium over straight value, the less attractive the convertible bond. . . LOS 34.p: Describe how a convertible bond is valued in an arbitrage-free framework. . Convertible, noncallable bond value = straight value + value of call option on stock . Callable convertible bond value = straight value of bond + value of call option on stock – value of call option on bond . Callable and putable convertible bond value = straight value of bond + value of call option on stock – value of call option on bond + value of put option on bond . LOS 34.q: Compare the risk-return characteristics of a convertible bond with the risk-return characteristics of a straight bond and of the underlying common stock. . Buying convertible bonds instead of stocks limits downside risk; the price floor set by the straight bond value provides this downside protection. The cost of the downside protection is reduced upside potential due to the conversion premium. Keep in mind though, that just like investing in nonconvertible bonds, convertible bond investors must be concerned with credit risk, interest rate risk, and liquidity risk. . . The following comparisons can be made between ownership of the underlying stock and the risk-return characteristics of the convertible bond: . - When the stock’s price falls, the returns on convertible bonds exceed those of the stock, because the convertible bond’s price has a floor equal to its straight bond value. . - When the stock’s price rises, the bond will underperform because of the conversion premium. This is the main drawback of investing in convertible bonds versus investing directly in the stock. . - If the stock’s price remains stable, the return on a convertible bond may exceed the stock return due to the coupon payments received from the bond, assuming no change in interest rates or credit risk of the issuer. . Sometimes the price of the common stock associated with a convertible issue is so low that is has little or no effect on the convertible’s market price, and the bond trades as though it is a straight bond. When this happens, the convertible security is referred to as a fixed-income equivalent or a busted convertible. . Bond analytics . 1. Put-call parity . o C – P = PV(forward price of the bond on exercise date) – PV(exercise price) . 2. Option-free bond pricing . o The valuation of option-free bonds should be independent of the assumed level of volatility used to generate the interest rate tree. . LOS 36.a: Describe credit default swap (CDS), single-name and index CDS, and the parameters that define a given CDS product. . A credit default swap (CDS) is essentially an insurance contract. . Protection buyer = long credit risk = short credit . Protection seller = short credit risk = long credit . To obtain this coverage, the protection buyer pays the seller a premium called the CDS premium to the protection seller. The contract is written on a face value of protection called the notional principal. . Even though the CDS spread should be based on the underlying credit risk of the reference obligation, standardization in the market has led to a fixed coupon on CDS product: 1% for investment-grade securities and 5% for high-yield securities. Hence, the coupon rate on the CDS and the actual credit spread may be different. The present value of the difference between the standardization coupon rate and the credit spread on the reference obligation is paid upgront by one of the parties to the contract. . For a protection buyer, a CDS has some of the characteristics of a put option-when the underlying performs poorly, the holder of the put option has a right to exercise the option. . The International Swaps and Derivatives Association (ISDA), the unofficial governing body of the industry, publishes standardized contract terms and conventions in the ISDA Master Agreement to facilitate smooth functioning of the CDS market. . . . Single-name CDS . In the case of a single-name CDS, the reference obligation is the fixed-income security on which the swap is written, usually a senior unsecured obligation (in the case of a senior CDS). The issuer of the reference obligation is called the reference entity. The CDS pays off not only when the reference entity defaults on any other issue that is ranked pari passu or higher. The CDS payoff is based on the market value of the cheapest-to-deliver (CTD) bond that has the same seniority as the reference obligation. . Contract에 따라 다르지만, credit event의 reference entity . Coverage reference obligation 기준은 same or higher, payoff는 CTD bond (same rank) . Index CDS . An index CDS covers multiple issuers. . The pricing of an index CDS is dependent on the correlation of default (credit correlation) among the entities in the index. The higher the correlation of default among index constituents, the higher the spread on the index CDS. . LOS 36.b: Describe credit event and settlement protocols with respect to CDS. . Credit event . 1. Bankruptcy on the refence entity . 2. Failure to pay all the outstanding debts . 3. Restructuring . 4. Cross default . 5. Obligation acceleration . 6. Moratorium . 7. Repudiation . A 15-member group of the ISDA called the Determinations Committee (DC) declares when a credit event has occurred. . When there is a credit event, the swap will be settled in cash or by physical delivery. With physical delivery, the protection seller receives the reference obligation and pays the protection buyer the notional amount. . In the case of a cash settlement, the payout amount is the payout ratio times the notional principal. The payout ratio depends on the recovery rate. . Payout amount = payout ratio * notional principal . Payout ratio = 1 – recovery rate (%) . LOS 36.c: Explain the principles underlying, and factors that influence, the market’s pricing of CDS. . The factors that influence the pricing of CDS include the 1) probability of default, 2) loss given default. The CDS spread is higher for higher probability of default and for higher loss given default. . Probability of default is the likelihood of default by the reference entity in a given year. However, because the CDS typically covers a multi-year horizon, the probability of default is not constant; the probability of default usually increases over time. For a single-name CDS, when a default occurs, a payment is made by the protection seller to the protection buyer and the CDS ceases to exist. Hence, in the context of a CDS, the probability of default in any given year assumes that no default has occurred in the preceding years. We call the probability of default given that it has not already occurred the conditional probability of default or hazard rate. . Loss given default is the expected amount of loss in the event that a default occurs. . Expected loss at t = hazard rate at t * loss given default . Loss given default (%) = 1 – recovery rate . . . The cash payments made by the protection buyer on the CDS cease when there is a default. Hence, the expected value of the coupon payments also depends on the hazard rate. . The payments made by the protection buyer to the seller are the premium leg. These contingent payments make up the protection leg. . The difference between the present value of the premium leg and the present value of the protection leg determines the upfront payment. . Upfront payment (by protection buyer) = PV(protection leg) – PV(premium leg) . We can appropriate the upfront premium as the difference between the CDS spread and the CDS coupon rate, multiplied by the duration of the CDS. . Upfront premium % = (CDS spread – CDS coupon) * duration . CDS spread = upfront premium % / duration + CDS coupon . Price of CDS (per $100 notional) = $100 – upfront premium (%) . Valuation after inception of CDS . At inception of a CDS, the CDS spread (and the upfront premium) is computed based on the credit quality of the reference entity. After inception, the credit quality of the reference entity (or the credit risk premium in the overall market) may change. This will lead to the underlying CDS having a nonzero value. . The change in value of a CDS after inception can be approximated by the change in spread multiplied by the duration of the CDS. . Profit for protection buyer = change in spread * duration * notional principal . Profit for protection buyer (%) = change in spread (%) * duration . The protection buyer (or seller) can unwind an existing CDS exposure (prior to expiration or default) by entering into an offsetting transaction. This process of capturing value from an in-the-money CDS exposure is called monetizing the gain. . . . LOS 36.d: Describe the use of CDS to manage credit exposures and to express views regarding changes in shape and / or level of the credit curve. . Credit curve . The credit curve is the relationship between credit spreads for different bonds issued by an entity, and the bonds’ maturities. The credit curve is similar to the term structure of interest rates. If the longer maturity bonds have a higher credit spread compared to shorter maturity bonds, the credit curve will be upward sloping. . Naked CDS . CDS can be used to manage credit exposures of a bond portfolio. In a naked CDS, an investor with no underlying exposure purchases protection in the CDS market. . Long/Short trade . In a long / short trade, an investor purchases protection on one reference entity while simultaneously selling protection on another (often related) reference entity. The investor is betting that the difference in credit spreads between the two reference entities will change to the investor’s advantage. This is similar to going long (protection seller exposure) in one reference entity bond and simultaneously going short (protection buyer exposure) in the other reference entity bond. . . Curve trade . A curve trade is a type of long/short trade where the investor is buying and selling protection on the same reference entity but with a different maturity. . An investor concerned about the credit risk of an issuer in the near term while being more confident of the long-term prospects of the issuer might buy protection in the short-term CDS and offset the premium cost by selling protection in the long-term CDS. Conversely, an investor who is bearish about the reference entity’s prospects in the short term will enter into a curve-flattening trade. . . LOS 36.e: Describe the use of CDS to take advantage of valuation disparities among separate markets, such as bonds, loans, equities, and equity0linked instruments. . Earning arbitrage profits is another motivation for trading in the CDS market. Difference in pricing between asset and derivative markets, or differences in pricing of different products in the market, may offer potential arbitrage profits. . Basis trade . A basis trade is an attempt to exploit the difference in credit spreads between bond markets and the CDS market. . Another arbitrage transaction involves buying and selling debt instruments issued by the same entity based on which instruments the CDS market suggests to be undervalued or overvalued. . . LBO . In a leveraged buyout (LBO), the firm will issue a great amount of debt in order to repurchase all of the company’s publicly traded equity. This additional debt will increase the CDS spread because default is now more likely. An investor who anticipates an LBO might purchase both the stock and CDS protection both of which will increase in value when the LBO eventually occurs. . Index CDS . In the case of an index CDS, the value of the index should be equal to the sum of the values of the index components. An arbitrage transaction is possible if the credit risk of the index constituents is priced differently than the index CDS spread. . CDO . Collateralized debt obligation (CDO) are claims against a portfolio of debt securities. A synthetic CDO has similar credit risk exposure to that of a cash CDO but is assembled using CDS rather than debt securities. If the synthetic CDO can be created at a cost lower than that of the cash CDO, investors can buy the synthetic CDO and sell the cash CDO, engaging in a profitable arbitrage. . . LOS 35.a: Explain expected exposure, the loss given default, the probability of default, and the credit valuation adjustment. . Expected exposure is the amount of money a bond investor in a credit risky bond stands to lose at a point in time before any recovery is factored in. A bond’s expected exposure changes over time. . Recovery rate is the percentage recovered in the event of a default. . Loss given default (LGD) is equal to loss severity multiplied by exposure. . Probability of default is the likelihood of default occurring a given year. The initial probability of default is also known as the hazard rate. The probability of default in each subsequent year is calculated as the conditional probability of default given that default has previously not occurred. . Probability of survival at t = (1 – hazard rate)^t if hazard rate is constant . Credit valuation adjustment (CVA) is the sum of the present value of the expected loss for each period. CVA is the monetary value of the credit risk in present value terms; it is the difference in value between a risk-free bond and an otherwise identical risky bond. . CVA = price of risk-free bond – price of risky bond . . . . . Risk neutral probability of default . Risk neutral probability of default, which is the probability of default implied in the current market price. . We can also calculate the implied recovery rate in the market price given the probability of default. In general, given the market price (and hence the credit spread), the estimated risk neutral probabilities of default and recovery rates are positively correlated. . Relative credit risk analysis . While comparing the credit risk of several bonds, the metric that combines the probability of default as well as loss severity is the expected loss. Everything else constant, for a given period, the higher the expected loss, the higher the credit risk. . LOS 35.b: Explain credit scores and credit ratings. . Credit scoring is used for small businesses and individuals. A higher credit score indicates better credit quality. . Credit ratings are issued for corporate debt, asset-backed securities, and government and quasi-government debt. The issuer rating for a company is typically for its senior unsecured debt. Ratings on other classes of debt by the same issuer may be notched. Notching is the practice of lowering the rating by one or more levels for more subordinated debt of the issuer. Notching accounts for LGD difference between classes of debt by the same issuer (higher LGD for issues with lower seniority). . . LOS 35.c: Calculate the expected return on a bond given transition in its credit rating. . Credit migration (i.e., change in rating) . . LOS 35.d: Explain structural and reduced-form models of corporate credit risk, including assumptions, strengths, and weaknesses. . Structural models . Structural models of corporate credit risk are based on the structure of a company’s balance sheet and rely on insights provided by option pricing theory. . Option analogy . Consider a hypothetical company with assets that are financed by equity and a single issue of zero-coupon debt. . Due to the limited liability nature of corporate equity, the shareholders effectively have a call option on the company’s assets with a strike price equal to the face value of debt. . An alternate, but related interpretation considers equity investors as long the net assets of the company and long a put option, allowing them to seel the assets at an exercise price of X. default is then synonymous to exercising the put opition. . Under the put option analogy, the investors in risky debt can be constructed to have a long position in risk-free debt and a short position in that put option. . Value of risky debt = value of risk-free debt – value of put option . Value of risky debt = value of risk-free debt – CVA . The value of the put option = CVA . If the value of assets falls below the default barrier X, the company defaults. The probability of default is indicated by the region in the left tail below the default barrier of X. . Advantages of structural models . - Structural models provide an economic rationale for default and explain why default occurs. . - Structural models utilize option pricing models to value risky debt. . Disadvantages of structural models . - Because structural models assume a simple balance sheet structure, complex balance sheets cannot be modeled. Additionally, when companies have off-balance sheet debt, the default barrier under structural models (X) would be inaccurate and hence the estimate outputs of the model will be inaccurate. . - One of the key assumptions of the structural model is that the assets of the company are traded in the market. This restrictive assumption makes the structural model impractical. . . . . Reduced form models . Reduced form (RF) models do not rely on the structure of a company’s balance sheet and therefore do not assume that the assets of the company trade. Unlike the structural model, reduce form models do not explain why default occurs. Instead, they statistically model when default occurs. Default under the RF model is a randomly occurring exogenous variable. . A key input into the RF model is the default intensity, which is the probability of default over the next (small) time period. Default intensity can be estimated using regression models. . Advantages of reduced form models . - RF models do not assume that the assets of a company trade . - Default intensity is allowed to vary as company fundamentals changes, as well as when the state of the economy changes. . Disadvantages of reduced form models . - RF models do not explain why default occurs. . - Under RF models, default is treated as a random event, but in reality, default is rarely a surprise. . Los 35.e: Calculate the value of a bond and its credit spread, given assumptions about the credit risk parameters. . Credit spread on a risky bond = YTM of risky bond – YTM of benchmark . Value given no default (VND) is calculated using the risk-free rate to value the risky bond. . We use our standard backward induction process to value a risky bond given the benchmark rate tree. . Once the expected exposure for each period is calculated, given an estimated unconditional probability of default and a recovery rate, we use the same method discussed earlier to calculate the CVA for the bond. . . LOS 35.f: Interpret changes in a credit spread. . A benchmark yield should be equal to the real risk-free rate plus expected inflation as well as a risk-premium for uncertainty in future inflation. Credit spreads include compensation for default, liquidity, and taxation risks relative to the benchmark. Adjustment to the price for all these risk factors together is known as the XVA. Default risk component is the most important and most-commonly-used in practice. . Credit spreads change as investor perceptions about the future probability of default and recovery rates change. These perceptions depend on expectations about the state of the economy. Expectations of impending recessions lead to expectations of higher defaults and lower recovery rates. . LOS 35.g: Explain the determinants of the term structure of credit spreads and interpret a term structure of credit spreads. . The term structure of credit spread shows the relationship between credit spreads and maturity. . The credit spread is inversely related to the recovery rate and positively related to the probability of default. However, oftentimes a maturity-matched, liquid benchmark security is not available. In such cases, interpolation from available benchmark securities is used. When such data is not easily available, or when benchmark bonds are thinly traded, a spread relative to a swap fixed rate (corresponding to the maturity of the bond) may be used. . To create a spread curve, all of the bonds whose spreads are used should have similar credit characteristics. . Key determinants of the shape of the credit spread curve include expectations about future recovery rates and default probabilities. If default probabilities are expected to be higher or recovery rates lower in the future, the credit curve would be expected to be positively sloped. Flat credit curves indicates stable expectations over time. . . Determinants of term structure of credit spreads . 1. Credit quality – lower-rated sectors tend to have steeper spread curves, reflecting greater uncertainty as well as greater sensitivity to the business cycle. . 2. Financial conditions – spreads narrow during economic expansions and widen during cyclical downturns. During boom times, benchmark yields tend to be higher while credit spreads tend to be narrower. . 3. Market demand and supply – recall that a credit spread includes a premium for lack of liquidity. Hence, less liquid maturities would show higher spreads (even if the expectations for that time period are stable). Due to low liquidity in most corporate issues, the credit curves are most heavily influenced by more heavily traded bonds. . 4. Equity market volatility – increases in equity volatility therefore tend to widen spreads and influence the shape of the credit spread curve. . LOS 35.h: Compare the credit analysis required for securitized debt to the credit analysis of corporate debt. . Components of credit analysis of secured debt . Collateral pool . Credit analysis of structured, securitized debt begins with the collateral pool. Homogeneity of a pool refers to the similarity of the assets within the collateral pool. Granularity refers to the transparency of assets within the pool. A highly granular pool would have hundreds of clearly defined loans, allowing for use of summary statistics as opposed to investigating each borrower. . Short-term granular and homogeneous structured finance vehicles are evaluated using a statistical-based approach. Medium-term granular and homogeneous obligations are evaluated using a portfolio-based approach because the portfolio composition varies over time. (segmentation해서 analysis) discrete and non-granular portfolios have to be evaluated at the individual loan level. . Servicer quality . Servicer quality is important to evaluate the ability of the servicer to manage the origination and servicing of the collateral pool. . Structure . Structure determines the tranching or other management of credit and other risks in a collateral pool. . Internal / external credit enhancement . A special structure is the case of covered bond. – loan을 true sale하지 않고, 담보로 structuring, 해당 loan들은 balance sheet에서 segregated . Issued by a financial institution, covered bonds are senior, secured bonds backed by a collateral pool as well as by the issuer. .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/09/12/CFA-Level-2-Fixed-Income.html",
            "relUrl": "/markdown/2021/09/12/CFA-Level-2-Fixed-Income.html",
            "date": " • Sep 12, 2021"
        }
        
    
  
    
        ,"post24": {
            "title": "CFA Level 2 Financial Reporting and Analysis",
            "content": "Financial Reporting and Analysis . Level 2 Theme . Intercorporate Investment . a. Investment in Financial Asset: Passive investment, 대부분 fair value 평가 . b. Investment in Associate: Significant influence (20 ~ 50%), Equity method . c. Investment in Subsidiary: Control, Consolidation (over 50%) . | Employee Benefit: Post-employment benefit – DB type . | Multinational operations: Consolidation . | Financial Institute Analysis: Bank, Insurance . | Evaluation of Reporting Quality . | LOS 13.a: Describe the classification, measurement, and disclosure under International Financial Reporting Standards (IFRS) for 1) investments in financial assets, 2) investments in associates, 3) joint ventures, 4) business combinations, and 5) special purpose and variable interest entities. . LOS 13.b: Distinguish between IFRS and US GAAP in the classification, measurement, and disclosure of investments in financial assets, investments in associates, joint ventures, business combinations, and special purpose and variable interest entities. . Ownership Degree of Influence Accounting Treatment . Less than 20% (investments in financial assets) | No significant influence | Amortized cost (HTM), fair value through OCI (AFS), fair value through profit or loss (HFT) | . 20% ~ 50% (investments in associates) | Significant influence | Equity method | . More than 50% (investments in subsidiary) | control | Consolidation by Acquisition method | . Intercorporate investments . Investments in financial assets . a. When the investing firm has no significant influence and control over the operations of the investee firm . | Investments in associates . a. When the investing firm has significant influence over the operations of the investee firm, but not control . | Business combination . a. When the investing firm has control over the operations of the investee firm . | Investments in financial assets . An ownership interest of less than 20% is usually considered a passive investment. cannot significantly influence or control the investee. . US GAAP . Debt securities . Held-for-trading (HFT) . | Available-for-sale (AFS) . | Held-to-maturity (HTM) . | Equity securities . HFT . | AFS . | (X) . | Valuation . HFT – Fair value -&gt; Net Income -&gt; Retained Earnings . | AFS – Fair value -&gt; OCI -&gt; AOCI . | Amortized cost . | IFRS9 . Cash flow characteristics test (= SPPI test, Solely Payment of Principal and Interests test) . Pass SPPI test – ex) Bond . Business model test . FVTPL (Fair Value Through Profit and Loss) securities . | FVOCI (Fair Value through Other Comprehensive Income) securities . | Amortized cost securities . | Fail to pass SPPI test – ex) Stock . FVTPL securities . - Optionally, FVOCI 선택 가능 . - 선택 후 irrevocable . Amortized cost (for debt securities only) . Criteria for amortized cost accounting: . Business model test – debt securities are being held to collect contractual cash flows. . | Cash flow characteristic test – the contractual cash flows are either principal, or interest on principal, only. . | 통과하면, amortized cost로 해당 debt security 평가 – 채권 발행자의 discount, premium, par 발행 후 평가하는 것과 동일함. . Interest income (coupon cash flow adjusted for amortization of premium or discount) is recognized in the income statement, but subsequent changes in fair value are ignored. . Fair value through profit or loss (for debt and equity securities) . 두 경우 해당됨 . If held for trading . | If accounting for those securities at amortized cost results in an accounting mismatch . o Hedge 목적 derivatives는 fair value평가를 하게 되어 있고, hedge 목적물 자산은 amortized cost 평가를 하게 되면 accounting 상 mismatch가 발생한다. 이를 해소하기 위해 둘 다 fair value 평가를 하는 경우 . | Equity securities that held for trading must be classified as FVPL. . Other equity securities may be classified as either fair value through profit or loss, or fair value through OCI. Once classified, the choice is irrevocable. . Derivatives that are not used for hedging are always carried at FVPL. . If an asset has an embedded derivatives (e.g., CB), the asset as a whole is valued at FVPL. . FVPL securities are reported on the balance sheet at fair value. The changes in fair value, both realized and unrealized, are recognized in the income statement along with any dividend or interest income. . Fair value through OCI (for debt and equity securities) . FVOCI로 분류되면 unrealized gain or loss is reported in OCI. Realized gain or loss, dividend, and interest income are reported in the income statement. . HFT . . AFS . . HMT . . . . . 결국 팔고 나면 순익에 반영되는 결과는 다 같다. 그러나, 중간에 평가이익이 변하는 과정을 인식하는 방식이 서로 다름. . Investments in associates . An ownership interests between 20% and 50% is typically a noncontrolling investment; however, the investor can usually significantly influence the investee’s business operations. . Under the equity method, the initial investment is recorded at cost and reported on the balance sheet as a noncurrent asset. . In subsequent periods, the proportionate share of the investee’s earnings increases the investment account on the investor’s balance sheet and is recognized in the investor’s income statement. Dividends received from the investee are treated as a return of capital and thus, reduce the investment amount. Dividends received from the investee are not recognized in the investor’s income statement. . If the investee reports a loss, the investor’s proportionate share of the loss reduces the investment account and also lower earnings in the investor’s income statement. If the investee’s losses reduce the investment account to zero, the investor usually discontinues use of the equity method. . - 손실을 보다가 balance sheet의 investment 자산을 다 까먹으면 더 이상 손실을 인식하지 않음. (유한책임 반영) 다만, 주석에 반영 . The equity method is resumed once the proportionate shares of the investee’s earnings exceed the share of losses the were not recognized during the suspension period. . - 여태 본 손실 다 회복하고 나서 balance sheet에 다시 equity method로 복귀 . Significant influence . - Board of directors representation . - Involvement in policy making . - Material intercompany transactions . - Interchange of managerial personnel . - Dependence on technology . 20% 이하여도 may be possible to have significant influence. . Equity method – Mark to Market approach (X), fair value와는 전혀 무관하다고 생각해도 됨. . Excess of purchase price over book value acquired . At the acquisition date, the excess of the purchase price over the proportionate share of the investee’s book value is allocated to the investee’s identifiable assets and liabilities based on their fair values. Any remainder is considered goodwill. . - 투자자 입장에서 평가된 피투자사 balance sheet의 fair value of asset – fair value of liability를 통해 fair value of equity를 구하고, purchase price – fair value of equity = goodwill의 방식으로 계산 . In subsequent periods, the investor recognizes expense based on the excess amounts assigned to the investee’s assets and liabilities. . Under the equity method of accounting, the investor must adjust its balance sheet investment account and the proportionate share of the income reported from the investee for this additional expense. . - 비용도 fair value를 기준으로 계산해야 함. Inventory, PPE의 fair value를 높게 잡아줬다면, 비용도 그에 맞춰서 태우고, 이를 기준으로 산출한 NI의 proportionate shares를 equity method로 income statement에 equity income으로 가져옴. . Impairment of investments in associates . Annually impairment test해야 함. . US GAAP . 2 steps . Recovery test . a. The fair value of the investment &lt; the carrying value of investment . b. The decline is considered other-than-temporary . | Impairment . a. Written-down to fair value and a loss is recognized on the income statement . | IFRS . 1 step . Loss = the book value of the investment – recoverable amount | - Recoverable amount = max(net selling price, value in use) . Under both IFRS and US GAAP, if there is a recovery in value in the future, the asset cannot be written-up. . Equity Method . . . . . Excess of purchase price over book value acquired . . Intercorporate transactions . 내부거래 미실현이익 제거 . Profit from intercorporate transactions must be deferred until the profit is confirmed through use or sale to a third party. . For profit that is unconfirmed (goods have not been used or sold by the investor), the investor must eliminate its proportionate shares of the profit from the equity income of the investee. . - Upstream (investee to investor) . - Downstream (investor to investee) . . 3rd party에게 inventory 판매되기 전까지 해당 부분은 이익으로 잡으면 안됨. . Analytical issues for investments in associates . Fair MV 변화 없을 경우, the equity method usually results in higher earnings as compared to the accounting methods used for minority passive investments. . The investor simply reports its proportionate share of the investee’s equity in one line on the balance sheet. By ignoring the investee’s debt, leverage is lower. In addition, the margin ratios are higher since the investee’s revenues are ignored. . The proportionate share of the investee’s earnings is recognized in the investor’s income statement, but the earnings may not be available to the investor in the form of cash flow (dividends). That is, the investee’s earnings may be permanently reinvested. . Business combinations . Ownership 50% 이상 . Consolidation by acquisition method . - 피투자사의 자산과 부채를 전부 투자자의 balance sheet에 엎는다. 그리고 나서 equity를 계산하고, NCI (non-controlling interest)라는 항목으로 보유하지 않은 지분을 equity에 표시한다. . - Income statement에서도 revenue와 expense를 모두 엎어온다. 그리고 나서 NI산출 전에 minority interest라는 항목으로 보유하지 않은 지분만큼의 earnings를 빼준다. . 100% Acquisition . . . 80% Acquisition . . Proportionate consolidation . . Goodwill . Under the acquisition method, the purchase price is allocated to the identifiable assets and liabilities of the acquired firm on the basis of fair value. Any remainder is reported on the balance sheet as goodwill. Goodwill is said to be an unidentifiable asset that cannot be separated from the business. . - 구매한 금액을 피투자사의 balance sheet에서 pro forma하게 나눠서 allocation하는데, 이 때 identifiable asset에만 allocation을 해야한다. 즉, 피투자사가 goodwill과 같이 unidentifiable asset을 가지고 있으면 해당 부분에는 allocation하지 않는다. Allocation을 다 하고 산출된 fair value of equity를 활용해서 purchase price – fair value of equity = goodwill을 계산한다. . The full goodwill method results in higher total assets and higher total equity than the partial goodwill method. Thus, ROA and ROE will be lower if the full goodwill method is used. . Goodwill is not amortized. Instead, it is tested for impairment at least annually. Impairment occurs when the carrying value exceed the fair value. Because of its inseparability, goodwill is valued at the reporting unit level. . . US GAAP . Goodwill is the amount by which the fair value of the subsidiary is greater than the fair value of the subsidiary’s identifiable net assets (full goodwill). . - Goodwill = fair value of 피투자사 - 피투자사의 fair value of equity . - 둘은 엄연히 다르며, fair value of equity는 투자자가 바라보는 피투자사의 fair value of asset and liability를 통해 산출된 값을 의미하며, fair value of 피투자사는 투자자가 지불한 투자사의 equity의 market price로 이해하면 된다. 즉, purchase price. . US GAAP는 full goodwill만 허용한다. . - Full goodwill은 goodwill을 산출할 때 내가 보유하지 않은 지분까지 전부 포함해서 산출하는 개념을 의미한다. 즉, NCI (non-controlling interest)도 fair value 평가를 해주는 개념. . Goodwill impairment potentially involves two steps. . The carrying value of the reporting unit (including the good will) &gt; the fair value of the reporting unit . | Impairment loss = difference between the carrying value of the goodwill and the implied fair value of the goodwill. . o The impairment loss is recognized in the income statement as a part of continuing operations. . | The implied fair value of the goodwill is calculated in the same manner as goodwill at the acquisition date. That is, the fair value of the reporting unit is allocated to the identifiable assets and liabilities as if they were acquired on the impairment measurement date. Any excess is considered the implied fair value of the goodwill. . IFRS . Goodwill is the excess of the purchase price over the fair value of the acquiring company’s proportion of the acquired company’s identifiable net assets (partial goodwill). However, IFRS permits the use of the full goodwill approach also. . Testing for impairment involves a single step approach. . The carrying amount of the cash generating unit (where the goodwill is assigned) &gt; the recoverable amount -&gt; impairment loss is recognized. | - Recoverable amount = max(net selling price, value in use) . Impairment of goodwill . . . . Under IFRS and US GAAP, recovery is not allowed. . Bargain purchase . In rare cases, acquisition purchase price is less than the fair value of net assets acquired. Both IFRS and US GAAP requires that the difference between fair value of net assets and purchase price be recognized as a gain in the income statement. . . Joint ventures . Investment in associates로 취급. . 개정됐으나 시험목적 상 In rare cases, IFRS and US GAAP allow proportionate consolidation as opposed to the equity method. Proportionate consolidation is similar to a business acquisition, except the investor (venturer) only reports the proportionate share of the assets, liabilities, revenues, and expenses of the joint ventures. Since only the proportionate share is reported, no minority owners’ interest is necessary. . Joint venture is an entity in which control is shared by two or more investors. . Special purpose and variable interest entities . A SPE is a legal structure created to isolate certain assets and liabilities of the sponsor. SPEs are often structured such that the sponsor company has control over the SPE’s finances or operating activities while third parties have controlling interest in the SPE’s equity. . Consolidation, a VIE is an entity that has one or both of the following characteristics: . 1. At-risk equity that is insufficient to finance the entity’s activities without additional financial support. . 2. Equity investors that lac any one of the followings: . o Decision making rights . o The obligation to absorb expected losses . o The right to receive expected residual returns . If an SPE is considered a VIE, it must be consolidated by the primary beneficiary. The primary beneficiary is the entity that absorbs the majority of the risks or receives the majority of the rewards. . US GAAP . VIE condition을 마족하면 consolidation . IFRS . 실질적인 지배력 (de facto control)이 있으면 consolidation . . LOS 13.c: analyze how difference methods used to account for intercorporate investments affect financial statements and ratios. . For important effects on the balance sheet and income statement . All three methods report the same net income. . | Equity method and proportionate consolidation report the same equity. Acquisition method equity will be higher by the amount of minority interest. . | Assets and liabilities are highest under the acquisition method and lowest under the equity method; proportionate consolidation is in-between. . | Revenues and expenses are highest under the acquisition method and lowest under the equity method; proportionate consolidation is in-between. . |   Equity method Proportionate consolidation Acquisition consolidation . Net profit margin | higher | In-between | Lower | . ROE | higher | Same as equity method | Lower | . ROA | higher | In-between | Lower | . LOS 14.a: Describe the types of post-employment benefit plan and implications for financial reports. . . DC (Defined Contribution) . The firm contributes a certain sum each period to the employee’s retirement account. The firm’s contribution can be based on any number of factors including years of service, the employee’s age, compensation, profitability, or even a percentage of the employee’s contribution. In any event, the firm makes no promise to the employee regarding the future value of the plan assets. The investment decisions are left to the employee, who assumes all of the investment risk. . Pension expense is simply equal to the employer’s contribution. There is no future obligation to report on the balance sheet. . 회사는 지불한 cash paid = pension expense. 그러므로 no obligation if fully funded. . DB (Defined Benefit) . . . The firm promises to make periodic payments to the employee after retirement. . Since the employee’s future benefit is defined, the employer assumes the investment risk. . 굉장히 많은 assumption이 들어감. . Under US GAAP, Projected Benefit Obligation (PBO) . Under IFRS, Present Value of Defined Benefit Obligation (PV of DBO) . Funded Status of the plan . The difference in the benefit obligation and the plan assets . Funded Status = Plan Asset – PBO . Plan Asset &gt; PBO: Over funded . Plan Asset &lt; PBO: Under Funded . Other post-employment benefits . Health care benefits . Similar to DB pension plan . Future benefit is defined today but is based on a number of unknown variables. The employer must forecast health care costs that are expected once the employee retires. . Pension plans are typically funded at some level, while other post-employment benefit plans are usually unfunded. In the case of an unfunded plan, the employer recognizes expense in the income statement as the benefits are earned; however, the employer’s cash flow is not affected until the benefits are actually paid to the employee. . LOS 14.b: Explain and calculate measures of a defined benefit pension obligation (i.e., present value of the defined benefit obligation and projected benefit obligation) and net pension liability (or asset). . . . . . Projected Benefit Obligation (PBO) – US GAAP . Present Value of Defined Benefit Obligation (PVDBO) – IFRS . All future pension benefits earned to date, based on expected future salary increases. . Annual Unit Credit (benefit) = value at retirement / number of years of service . Current Service Cost is the present value of benefits earned by the employees during the current period. Service cost includes an estimate of compensation growth (future salary increase) if the pension benefits are based on future compensation. . Interest cost is the increase in the obligation due to the passage of time. Benefit obligations are discounted obligations; thus, interest accrues on the obligation each period. . Interest cost = pension obligation at the beginning of the period * discount rate . Past (prior) service costs are retroactive benefits awarded to employees when a plan is initiated or amended. Under IFRS, past service costs are expensed immediately. Under US GAAP, past service costs are amortized over the average service life of employees. . Pension policy의 변경 – 소급적용하면 비용을 더 잡아줘야 함 . IFRS는 즉시 비용처리. . US GAAP는 AOCI에 Unrecognized Prior Service Cost로 잡아두고service life period동안 amortization. . Changes in actuarial assumptions are the gains and losses that result from changes in variables such as mortality, employee turnover, retirement age, and the discount rate. An actuarial gain will decrease the benefit obligation and an actuarial loss will increase the obligation. . 각종 Assumptions 변경으로 인해 생긴 PBO 증감 . US GAAP, IFRS 전부 Unrecognized Actuarial Net Gain (Loss)로 AOCI에 기록. . IFRS는 자연상각된다고 가정, AOCI에서 바로 RE로 direct transfer해서 처리. Income statement를 거치지 않음. . US GAAP는 별도로 건드리지 않는 것이 원칙이긴 하지만. Corridor Method를 기준으로 Amortization함. Max(Beginning PBO, Beginning PA) * 10%를 초과하면 Service life period 동안 amortization. . Benefit paid reduce the PBO. . Balance Sheet Effect . Plan Asset . Beginning Balance . +Contribution . +Actual Return on Plan Asset . -Benefit Paid . =Ending Balance . Plan Asset에는 assumption이 없음. . Funded Status . Funded Status = PA - PBO . Funded Status가 overfunded인 경우 net으로 Plan Asset 표시, underfunded인 경우 net으로 PBO로 표시. . Projected Benefit Obligation (Present Value of Defined Benefit Obligation) . PBO = PVDBO . Beginning Balance . +Current Service Cost . +Interest Cost . +-Changes in Actuarial Assumption . +Plan Amendment (Past Service Cost) . -Benefit Paid . =Ending Balance . PBO는 Assumption이 굉장히 많음 . AOCI . Unrecognized Actuarial Net Gain (Loss) . - US GAAP, IFRS 모두 사용 . - Actual return과 Expected Return의 차이는 Unrecognized Actuarial Net Gain (Loss)로 반영 . o Actual return &gt; Expected Return: Gain . o Actual return &lt; Expected Return: Loss . - PBO의 Assumption 변경으로 인한 Gain, Loss . o Salary Rate increase: Loss . o Discount Rate increase: Gain . - US GAAP는 Corridor Method에 기준해서 Max(Beginning PA, Beginning PBO) * 10%를 초과하면 over service period 동안 amortization . - IFRS는 별도로 건드리지 않고, 비용 변경이 있을 때마다 Income statement를 거치지 않고 바로 Retained Earnings에 direct transfer . Unrecognized Prior Service Cost . - IFRS는 사용하지 않는 항목 . - US GAAP에선 PBO에 Past Service Cost (Plan Amendment)가 발생하면 여기 기록하고 Amortization over service period. . Income Statement . Pension Expense . Current Service Cost . | Interest Cost . a. Interest Cost = Beginning PBO * Discount Rate . | Expected Return on Plan Asset . a. Under US GAAP, Expected Return on Plan Asset = Beginning PA * Expected Rate of Return . b. Under IFRS, Expected Return on Plan Asset = Beginning PA * Discount Rate . | Amortization of Unrecognized Actuarial Net Gain (Loss) . a. Under IFRS, 사용하지 않음 . b. Under US GAAP, by Corridor Method, Amortization of Unrecognized Actuarial Net Gain (Loss) = Excessive Amount of corridor / Average service life . | Amortization of Unrecognized Prior Service Cost . a. Under IFRS, Past Service Cost로 불리며 Retained Earnings로 direct transfer from AOCI . b. Under US GAAP, Amortized over service life, Amortization of Unrecognized Prior Service Cost = Unrecognized Prior Service Cost / Average Service Time . | Los 14.c: Describe the components of a company’s defined benefit pension costs. . TPPC (Total Periodic Pension Cost) . TPPC = employer contributions – (ending funded status – beginning funded status) . TPPC = current service cost + interest cost – actual return on plan assets +/- actuarial losses/gains due to changes in assumptions affecting PBO + prior service cost . Analytical purpose . Type I – Adjustment of Financial statement . Balance Sheet – no adjustment . Income Statement – Pension Expense smoothing adjustment . Not smoothing . a. TPPC = Current service cost + Income cost – Actual Return +/- Change in Assumption + Plan amendment . b. TPPC = contribution – (Beginning funded status – Ending funded status) . | Reclassification of TPPC . a. Operating . b. Non-operating – Interest cost, Actual Return . | Cash flow Statement . TPPC만큼은 Pension Fund에 불입했어야 한다. . 원래는 . CFO (Actual Contribution) . CFI . CFF . Analytical adjustment . CFO ((Actual Contribution) + (TPPC – Actual Contribution) * (1 – t)) . CFI . CFF (TPPC – Actual Contribution) * (1 – t) . 세금효과 고려해서 TPPC보다 부족한 부분을 차입했다고 가정하고 CF Statement를 조정 . TPPC가 Actual Contribution보다 낮으면 CFF에 +로 처리 . Current Service Cost . The present value of benefits earned by the employees during the current period. Current service cost is immediately recognized in the income statement. . Interest Cost . Interest cost = Beginning PBO * Discount Rate . Interest Cost is immediately recognized as a component of pension expense. . Expected Return on Plan Assets . The return on the plan assets has no effect on the PBO. Expected return instead of actual return) on plan assets is used for the computation of reported pensions expense. The difference in the expected return and the actual return is combined with other items related to changes in actuarial assumptions into the “actuarial gains and losses” account. The difference in the expected return and the actual return is combined with other items related to changes in actuarial assumptions into the “actuarial gains and losses” account. . Net Interest Expense/Income (Under IFRS) . Net Interest Expense (Income) = Beginning Funded Status * Discount Rate . Under IFRS, the expected rate of return on plan assets is implicitly assumed to be the same as the discount rate used for computation of PBO and a net interest expense/income is reported. . Actuarial Gains and Losses . Actuarial gains/losses as changes in PBO due to changes in actuarial assumptions. . Under IFRS, actuarial gains and losses are not amortized. . Under US GAAP, actuarial gains and losses are amortized using the corridor approach. . Corridor Approach (US GAAP only) . Once the beginning balance of actuarial gains and losses exceed 10% of the greater of the beginning PBO or plan assets, amortization is required. The excess amount over the “corridor” is amortized as a component of periodic pension cost in P&amp;L over the remaining service life of the employees. . Past (prior) Service Cost . When a firm adopts or amends its pension plan, the PBO is immediately increased. . Under US GAAP, it is reported as a part of other comprehensive income and amortized over the remaining service life of the affected employee. . Under IFRS, the past service costs are recognized in periodic pension cost in P&amp;L immediately. . . Component US GAAP IFRS . Current service cost | IS | IS | . Past service cost | OCI, amortized over service life | IS | . Interest cost | IS | IS | . Expected return | IS | IS* | . Actuarial gains/losses | Amortized portion in IS. Unamortized in OCI. | All in OCI – not amortized (called remeasurements) | . *Under IFRS, the expected rate of return on PA equals the discount rate and net interest expense/income is reported. . Presentation . . Under US GAAP, all components of periodic pension cost that are reported in the income statement are aggregated and presented as a single line item. . Under IFRS, components may be presented separately. . Both US GAAP and IFRS require disclosure of total periodic pension cost in the notes to financial statements. . LOS 14.d: Explain and calculate the effect of a defined benefit plan’s assumptions on the defined benefit obligation and periodic pension cost. . The firm discloses three assumptions used in its pension calculation. . Discount rate . | Rate of compensation growth . | Expected return on plan assets . | Effect on Increase discount rate Decrease rate of compensation growth Increase expected rate of return . Balance sheet liability | Decrease | Decrease | No effect | . Total periodic pension cost | Decrease* | Decrease | No effect | . Periodic pension cost in P&amp;L | Decrease* | Decrease | Decrease** | . *For mature plans, a higher discount rate might increase interest costs. In rare cases, interest cost will increase by enough to offset the decrease in the current service cost, and periodic pension cost will increase. . **Under US GAAP only. . Ultimate health care trend rate . . The assumptions are similar for other post-employment benefits except the compensation growth rate is replaced by a health care inflation rate. Generally, the presumption is the inflation rate will taper off and eventually become constant. This constant rate is known as the ultimate health care trend rate. . All else equal, firms can reduce the post-employment benefit obligation and periodic expense by decreasing the near term health care inflation rate, by decreasing the ultimate health care trend rate, or by reducing the time needed to reach the ultimate health care trend rate. . Asset allocation . Under US GAAP, the assumed expected rate of return should be consistent with plan’s asset allocation. . Los 14.e: Explain and calculate how adjusting for items of pension and other post-employment benefits that are reported in the notes to the financial statements affects financial statements and ratios. . . . Gross vs. net pension assets/liabilities . | Difference in assumptions used . | Difference between IFRS and US GAAP in recognizing total periodic pension cost (in income statement vs. OCI) . | Differences due to classification in the income statement . | LOS 14.f: Interpret pension plan not disclosures including cash flow related information. . If the firm’s contributions exceed its TPPC, the difference can be viewed as a reduction in the overall pension obligation, similar to an excess principal payment on a loan. Conversely, if TPPC exceeds the contributions, the difference can be viewed as a source of borrowing. . LOS 14.g: Explain issues associated with accounting for shared-based compensation. . Share-based Compensation . . Stock options . Outright share grants . They have the advantages of serving to motivate and retain employees as well as being a way to reward employees with no additional outlay of cash. . If the shares are not publicly traded, an estimate of value must be used for stock grants. Unless the market price of the options is available, the value of stock options must be estimated using an options valuation model. . The compensation expense recorded is spread over the period of time from the grant date until the date on which they can be sold by the employee. The overall principle here is the compensation expense should be spread over the period for which they reward the employee, referred to as the service period. . LOS 14.h: Explain how accounting for stock grants and stock options affects financial statements, and the importance of companies’ assumptions in valuing these grants and options. . Stock option . . . Additional Paid-In Capital에 Stock Option 명목으로 올리고, Income statement에 compensation expense로 태우고, Retained Earnings가 낮아지면서 대차가 맞아지는 과정 . 실제 exercise되면 CFF를 통해 현금이 들어오고, 대차를 맞춤 . Compensation expense is based on the fair value of the options on the grand date based on the number of options that are expected to vest. The vesting date is the first date the employee can actually exercise the options. The compensation expense is allocated in the income statement over the service period. . Recognition of compensation expense will decrease net income and retained earnings; however, paid-in capital is increased by an identical amount. This results in no change to total equity. . Option pricing models . Exercise price . | Stock price at the grant date . | Expected term . | Expected volatility . | Expected dividends . | Risk-free rate . | Lower volatility, a shorter term or a lower risk-free rate, will typically decrease the estimated fair value of the options, decreasing compensation expense. A higher expected dividend yield will also decrease the estimated fair value and compensation expense. . Stock appreciation rights . . 현금만큼 지급하는 개념이라 Liability에 태우고, 실제 지급할 때 cash가 나가면서 liability가 사라짐 . The difference between a stock appreciation right and an option is the form of payment. A stock appreciation award gives the employee the right to receive compensation based on the increase in the price of the firm’s stock over a predetermined amount. With stock appreciation rights, employees have limited downside risk and unlimited upside potential. Also, since no shares are actually issued, there is no dilution to existing shareholders. A disadvantage of stock appreciation rights is that they require current period cash outlay. . Stock grants . Compensation expense for stock granted to an employee is based on the fair value of the stock on the grant date. The compensation expense is allocated over the employee’s service period. . Restricted stock, performance stock . With restricted stock, the transferred stock cannot be sold by the employee until vesting has occurred. . Performance stock is contingent on meeting performance goals, such as accounting earnings or other financial reporting metrics like return on assets or return on equity. . LOS 15.a: Distinguish among presentation (reporting) currency, functional currency, and local currency.’ . Local currency . Functional currency – determined by management, is the currency of the primary economic environment in which the entity operates. It is usually the currency in which the entity generates and expends cash. The functional currency can be the local currency or some other currency. . Presentation (reporting) currency – the parent company prepares its financial statements. . . . . LOS 15.b: Describe foreign currency transaction exposure, including accounting for and disclosures about foreign currency transaction gains and losses. . IFRS requires disclosure of the “amount of exchange rate differences recognized in profit or loss” while US GAAP requires disclosure of “the aggregate transaction gain or loss included in determining net income for the period.” Obviously, the comparability of operating margins between entities would be diminished if the compared entities used different methods. . LOS 15.c: Analyze how changes in exchange rates affect the translated sales of the subsidiary and parent company. . LOS 15.d: Compare the current rate method and the temporal method, evaluate how each affects the parent company’s balance sheet and income statement, and determine which method is appropriate in various scenarios. . . Remeasurement involves converting the local currency into functional currency using the temporal method. . LC != FC = PC . Translation involves converting the functional currency into the parent’s presentation (reporting) currency using the current rate method. The current rate method is also known as the all-current method. . LC = FC != PC . . Current rate method . . All income statement accounts are translated at the average rate. . All balance sheet accounts are translated at the current rate except for common stock, which is translated at the historical (actual) rate that applied when the stock was issued. . Dividends are translated at the rate that applied when they were declared. . Translation gain or loss is reported in shareholders’ equity as a part of the cumulative translation adjustment (CTA). . The CTA is simply a “plug” figure that forces the basic accounting equation (A = L + E) to balance. . . Monetary assets and liabilities are remeasured using the current exchange rate. Monetary assets and liabilities are fixed in the amount of currency to be received or paid and include: cash, receivables, payables, and short-term and long-term debt. . All other assets and liabilities are considered nonmonetary and are remeasured at the historical (actual) rate. The most common nonmonetary assets include inventory, fixed assets, and intangible assets. . Just life the current rate method, common stock and dividends paid are remeasured at the historical (actual) rate. . Expenses related to nonmonetary assets such as COGS, depreciation expense, and amortization expense are remeasured based on the historical rates prevailing at the time of purchase. . Remeasurement gain or loss is recognized in the income statement. This results in more volatile net income as compared to the current rate method whereby the translation gain or loss is reported in shareholders’ equity. . Recall the ending inventory under FIFO consists of the costs from the most recently purchased goods. Thus, FIFO ending inventory is remeasured based on more recent exchange rates. On the other hand, FIFO COGS consists of costs that are older; thus, the exchange rates used to remeasure COGS are older. . Under LIFO, ending inventory consists of older costs; thus, the inventory is remeasured at older exchange rates. LIFO COGS, however, consists of costs from the most recently purchased goods; thus, COGS is remeasured based on more recent exchange rates. .   Local currency   . Exposure | appreciating | depreciating | . Current rate method |   |   | . Net assets | gain | Loss | . Net liabilities | loss | Gain | . Temporal method |   |   | . Net monetary assets | gain | Loss | . Net monetary liabilities | loss | Gain | .   Temporal method Current rate method . Monetary assets and liabilities | Current rate | Current rate | . Nonmonetary assets and liabilities | Historical rate | Current rate | . Common stock | Historical rate | Historical rate | . Equity (taken as a whole) | Mixed | Current rate | . Revenues and SG&amp;A | Average rate | Average rate | . Cost of goods sold | Historical rate | Average rate | . Depreciation and amortization | Historical rate | Average rate | . Net income | Mixed | Average rate | . Exposure | Net monetary assets | Net assets | . Exchange rate gain or loss | Income statement | Equity | . Under the temporal method, firms can eliminate their exposure to changing exchange rates by balancing monetary assets and monetary liabilities. When balanced, no gain or loss is recognized. . LOS 15.e: Calculate the translation effect and evaluate the translation of a subsidiary’s balance sheet and income statement into the parent company’s presentation currency. . LOS 15.f: Analyze how the current rate method and the temporal method affect financial statements and ratios. . . Pure balance sheet and pure income statement ratios . Pure income statement and pure balance sheet ratios are unaffected by the application of the current rate method. . Mixed balance sheet/income statement ratios . 다를 수 있음 . 하나하나 잘 따져보면서 ratio에서 적용되는 exchange rate 구별해서 계산 . LOS 15.g: Analyze how alternative translation methods for subsidiaries operating in hyperinflationary economies affect financial statements and ratios. . . Under US GAAP, a hyperinflationary environment is one where cumulative inflation exceeds 100% over a 3-year period. Assuming compounding, an annual inflation rate of more than 26% over three years will result in cumulative inflation over 100%. When hyperinflation is present, use the temporal method. . US GAAP는 단순하게 바로 temporal method 사용 . Under IFRS, the IASB does not specifically define hyperinflation; however, cumulative inflation of over 100% in a 3-year period is one indication that hyperinflation exists. . IFRS는 current rate method를 그대로 사용하는데, 사전에 price level adjustment를 통해 net purchasing power gain을 plug-in으로 income statement에 끼워넣음. . LOS 15.h: Describe how multinational operations affect a company’s effective tax rate. . . Effective tax rate is the tax expense in the income statement divided by pretax profit. . Statutory tax rate is provided by the tax code of the home country. . Changes in effective tax rate on account of foreign operations can be due to: . - Changes in the mix of profits from different countries (with varying tax rates) . - Changes in the tax rates . - Permanent difference . LOS 15.i: Explain how changes in the components of sales affect the sustainability of sales growth. . LOS 15.j: Analyze how currency fluctuations potentially affect financial results, given a company’s countries of operation. . LOS 16.a: Describe how financial institutions differ from other companies. . Financial institutions differ from other companies as follows: . Systemic importance – the contagion effect . | Regulated . | Assets – the assets of financial institutions tend to be financial assets such as loans and securities that are usually reported at fair value. . | . LOS 16.b: Describe key aspects of financial regulations of financial institutions. . Basel III . The three pillars of the Basel III framework are the maintenance of minimum levels of capital, liquidity, and stable funding. . - Minimum required capital for a bank is based on the risk of the bank’s assets. The riskier a bank’s assets are, the higher its required capital. . - Basel III specifies that a bank should hold enough liquid assets to meet demands under a 30-day liquidity stress scenario. . - The Basel III framework requires stable funding relative to a bank’s liquidity needs over a one-year time horizon. Stability in funding is proportional to the tenor of the bank’s deposits; longer-term deposits are more stable than shorter-term deposits. Stability also depends on the type of deposit. . Global organizations . Financial Stability Board . | International Association of Deposit Insurers – seeks to improve the effectiveness of deposit insurance systems. . | International Organization of Securities Commissions (IOSCO) – seeks to promote fair and efficient security markets. . | International Association of Insurance Supervisors (IAIS) – seeks to improve supervision of the insurance industry. . | LOS 16.c: Explain the CAMELS (capital adequacy, asset quality, management, earnings, liquidity, and sensitivity) approach to analyzing a bank, including key ratios and its limitations. . Capital Adequacy . . Capital adequacy is based on risk-weighted assets (RWA); more risky assets require a higher level of capital. . Basel III defines a bank’s capital in a tiered, hierarchical approach: . Tier 1 capital: . a. Common equity Tier 1 capital (the most important component): Common stock, additional paid-in capital, retained earnings and OCI less intangibles and deferred tax assets. . b. Other Tier 1 capital: subordinated instruments with no specified maturity and no contractual dividends (e.g., preferred stock with discretionary dividends). . | Tier 2 capital: subordinated instruments with original (i.e., when issued) maturity of more than five years. . | Individual jurisdictions specify the minimum capital requirements. Basel III guidelines specify a minimum Common Equity Tier 1 capital of 4.5% of RWA, minimum total Tier 1 capital of 6% of RWA, and minimum total capital of 8% of RWA. . . Asset Quality . . Evaluation of asset quality includes analysis of current and potential credit risk associated with the bank’s assets. . Bank assets include loans (the largest component) and investments in securities. While loans are generally carried on the balance sheet at amortized cost (net of allowances), the accounting treatment for investments in securities differs between US GAAP and IFRS. . Credit Risk Analysis . Credit risk is present in debt securities that the bank invests in, loans the bank makes, as well as in the bank’s off-balance-sheet liabilities. Analyzing the credit quality of a bank’s assets can provide an analyst key insights into the bank’s solvency and future profitability. . Key loans . - Past due but not yet impaired . - Impaired . - Seriously impaired . Loan Loss Provisions . The credit quality of loans and loss provisions are critical in evaluating the bank’s financial position and performance. Allowance for loan losses is a contra asset account to loans and is the result of provision for loan losses, an expense subject to management discretion. Analysts need to evaluate the bank’s policy of setting aside adequate provisions relative to actual loan performance. Actual losses (net of recoveries) are then written off against these provisions. . Ratios . Ratio of allowance for loan losses to nonperforming loans. . | Ratio of allowance for loan losses to net loan charge-offs. . | Ratio of provision for loan losses to net loan charge-offs. . | Management capabilities . Earnings . . Earnings are considered high quality if they are adequate as well as sustainable. Ideally, the trend in earnings should be positive and the underlying accounting estimates should be unbiased. Finally, earnings should ideally be derived from recurring sources. . A major source of earnings of a bank is from investment in securities. Estimates used in the valuation of these securities may lead to biased earnings. . Level 1 inputs are quoted market prices of identical assets. . Level 2 inputs are observable but not quoted prices of identical assets. . Level 3 inputs are non-observable and hence subjective. . In practice, banks often use the fair value hierarchy to label their assets or to label their valuation methodology. . For a typical bank, major sources of earnings are (1) net interest income, (2) service income, and (3) trading income. Of these, trading income is the most volatile year-to-year, and, hence, on a relative basis, banks with proportionally higher net interest income and service income would have more sustainable earnings. . Liquidity Position . . Liquidity coverage ratio (LCR) . LCR = highly liquid assets / expected cash outflows . Highly liquid assets are those that are easily convertiable into cash, while expected cash flows are the estimated on-month liquidity needs in a stress scenario. The standards recommend a minimum LCR of 100%. . Net stable funding ratio (NSFR) . NSFR = available stable funding / required stable funding . Available stable funding is a function of the composition and maturity distribution of a bank’s funding sources. Required stable funding is a function of the composition and maturity distribution of the bank’s asset base. . Funding Component ASF Factor   . Regulatory capital minus Tier 2 instruments maturing in a year | 100% | Equity | . Other capital instruments and liabilities with maturity &gt; 1 year | 95% |   | . Less-stable demand deposits and term deposits (maturity &lt; 1 year) from retail and small business customers | 90% |   | . Funding from nonfinancial corporates (maturity &lt; 1 year), operational deposits, funding from sovereigns, public sector (maturity &lt; 1 year), multilateral and national development banks | 50% |   | . All other liabilities | 0% | Short-term | . NSFR relates the liquidity needs of a bank’s assets to the liquidity provided by the bank’s liabilities. Longer-dated liabilities are considered more stable and hence would be suitable to fund assets with longer maturities. Deposits from retail and small business clients are considered more stable than deposits from corporate clients. The standards recommend a minimum NSFR of 100%. . Other liquidity monitoring metrics recommended by Basel III include concentration of funding and maturity mismatch. . Sensitivity to Market Risk . The most critical of various market risks is interest rate risk. A bank’s interest rate risk is the result of differences in maturity, rates, and repricing frequency between the bank’s assets and its liabilities. . The impact of market risk can be captured by value at risk (VaR). . Other Factors . - Government support . - Government ownership . - Bank missions . - Culture . LOS 16.e: Analyze a bank based on financial statements and other factors. . LOS 16.f: Describe key ratios and other factors to consider in analyzing an insurance company. . Insurance company revenues include premium income and income on float. . Property and casualty (P&amp;C) insurers differ from life and health (L&amp;H) insurers in terms of variability of claims and contract duration. Claims form P&amp;V insurers tend to be lumpier as compared to relatively stable and predictable claims for L&amp;H insurers. Contract duration is much higher for L&amp;H insurers relative to that of P&amp;C insurers. Regulatory requirements that focus on solvency of insurance companies often result in different reporting standards compared to IFRS or US GAAP. . P&amp;C Insurance Companies . Premium income is usually the highest source of income for a P&amp;C insurer. Keys to the profitability of an insurer are prudence in underwriting, pricing of adequate premiums for bearing risk, and diversification of risk. To diversify their risks, insurers often reinsure some risks. The policy period is often very short, with premiums received at the beginning of the period and invested during the float period. Claim events are clearly defined but may take a long time to emerge. . Property insurance covers specific assets against loss due to insured events. Casualty insurance protects against a legal liability due to the occurrence of a covered event. Sometimes a poly, known as multiple peril policy, may cover both property and casualty losses occurring during a covered event. . P&amp;C Profitability . P&amp;C margins are cyclical. During periods of heightened competition, price cutting to obtain new business leads to slim or negative margins (soft pricing period). This soft pricing period leads to losses and a shrinking capital base for many insurers, who either leave the industry or stop underwriting new policies. The resulting reduction in competition leads to a healthier pricing environment (hard pricing period), which in turn results in fatter margins. Higher margins during the hard pricing period attract new competition, perpetuating the cycle. . Major expenses for P&amp;C insurers include claims expense and the expense of obtaining new policy business. The cost of writing new policies depends on whether the insurer uses a direct-to-customer model (in which case it would bear the fixed cost of staffing) or the agency model (in which case it would pay variable commissions). Soft or hard pricing is driven by the industry’s combined ratio (total insurance expenses / net premiums earned). When the ratio is low (high), it is a hard (soft) market. . For a single insurer, a combined ratio in excess of 100% indicates an underwriting loss. . Underwriting loss ratio (loss and loss adjustment expense ratio) = (claims paid + delta of loss reverse) / net premium earned . Expense ratio (underwriting expense ratio) = underwriting expenses including commissions / net premium written . The underwriting loss ratio measures the relative efficiency of the company’s underwriting standards (whether the policies are priced appropriately relative to risks borne), while the expense ratio measures the efficiency of the company’s operations. . For reporting purposes, sometimes insurers use US GAAP, which calls for net premium earned as the denominator for both ratios. . The loss reverse is an estimated value of unpaid claims (based on estimated losses incurred during the reporting period). Subject to management discretion in measurement, the loss reserve is a highly material amount. Insurers revise their estimate of the loss reserve as more information becomes available. Downward revisions indicate that the company was conservative in estimating their losses in the first place. Upward revisions indicate aggressive profit booking, a warning sign for analysts. . Other profitability ratios . Loss and loss adjustment expense ratio . Loss and loss adjustment expense ratio = (loss expense + loss adjustment expense) / net premiums earned . Loss and loss adjustment expense ratio measures the relative success in estimation of risks insured (lower is more successful). . Dividends to policyholders (shareholders) ratio . Dividends to policyholders ratio = dividends to policy holders (shareholders) / net premiums earned . Dividends to policyholders (shareholders) ratio is a liquidity measure measuring cash outflow on account of dividends relative to premium income. . Combined ratio = loss and loss adjustment expense ratio + underwriting expense ratio . Combined ratio after dividends (CRAD) . CRAD measures total efficiency and is more comprehensive than the combined ratio. . CRAD = combined ratio + dividends to policyholders ratio . Investment returns . Total investment return ratio = total investment income / invested assets . Total investment return ratio is used to evaluate the performance of an insurer’s investment operations. . Liquidity . Liquidity is an important consideration for P&amp;C insurers as they stand ready to meet their claim obligations. One way to gauge the liquidity of the investment portfolio is to look at their fair value hierarchy reporting. . Capitalization . There are no global risk-based capital requirement standards for insurers. Regionally, the EU has adopted the Solvency II standards, while NAIC in the United States has specified minimum capital levels based on size and risk (including asset, credit. Liquidity, underwriting, and other relevant risks). . L&amp;H Insurance companies . L&amp;H insurers derive their revenue primarily from premiums, while investment income is the secondary source. . Revenue diversification . | Earnings characteristics . | Investment returns . | Liquidity . | Capitalization . | LOS 17.a: Demonstrate the use of a conceptual framework for assessing the quality of a company’s financial reports. . . Reporting quality / Earnings quality로 나뉨 . Reporting Quality는 GAAP compliant &amp; low bias가 중요 . Earning quality는 Reporting Quality가 충족되었다는 전제 하에 high level &amp; sustainable이 중요 . High-quality reporting provides decision-useful information; information that is accurate as well as relevant. Low-quality reporting impedes assessment while high-quality reporting enables it. . The term high-quality earnings refers to a high level of earnings as well as sustainability of earnings. Good economic performance and sustainable earnings are considered high quality. Earnings quality is also referred to as result quality. . One cannot have both low-quality reporting and high-quality earnings; high-quality earnings assume high-quality reporting. However, one could have a situation in which the company has high quality reporting but low-quality earnings. . Financial reports quality (high to low) . GAAP compliant and decision-useful, high-quality earnings . | GAAP compliant and decision-useful, low-quality earnings . | GAAP compliant but not decision-useful, (biased choices) . | Non-compliant accounting . | Fraudulent accounting . | LOS 17.b: Explain potential problems that affect the quality of financial reports. . Measurement and timing issues . Aggressive revenue recognition / conservative revenue recognition . Classification issues . Misclassification . Removing accounts receivable by selling or transferring receivables to a related entity or by treating them as long-term receivables. . | Reclassifying non-core revenues as revenues from core continuing operations . | Reclassifying expenses as non-operating . | Treating investing cash flows as operating cash flows . | Biased accounting . Mechanisms to misstate profitability . - Aggressive revenue recognition, including channel stuffing (aggressively selling products to distributors on generous terms such as lax return policies), bill and hold sales (where economic title to goods may not truly pass to customers), and outright fake sales. . - Lessor use of finance lease classification – sales-type lease . - Classifying non-operating revenue/income as operating, and operating expenses as non-operating. . - Channeling gains through net income and losses through OCI. . Warnings signs of misstated profitability . - Revenue growth higher than peers’ . - Receivables growth higher than revenue growth . - High rate of customer returns . - High proportion of revenue is received in final quarter . - Unexplained boost to operating margin . - Operating cash flow lower than operating income . - Inconsistency in operating versus non-operating classification over time . - Aggressive accounting assumptions – high estimated useful lives . - Executive compensation largely tied to financial results. . Mechanisms to misstate assets/liabilities . - Choosing inappropriate models and/or model inputs and thus affecting estimated values of financial statement elements – estimated useful lives for long-lived assets . - Reclassification from current to non-current . - Over-or understating allowances and reserves . - Understating identifiable assets (and overstating goodwill) in acquisition method accounting for business combinations . Warnings signs of misstated assets/liabilities . - Inconsistency in model inputs for valuation of assets versus valuation of liabilities . - Typical current assets being classified as non-current . - Allowances and reserves differ from those of peers and fluctuate over time . - High goodwill relative to total assets . - Use of special purpose entities . - Large fluctuations in deferred tax assets/liabilities . - Large off-balance-sheet liabilities . Mechanisms to overstate operating cash flows . - Managing activities to affect cash flow from operations – working capital management, stretching payables . - Misclassifying investing cash flow as cash flow from operations . Warnings signs of overstated operating cash flows . - Increase in payables combined with decreases in inventory and receivables. . - Capitalized expenditures which flow through investing activities. . - Increases in bank overdraft . Business combinations-acquisition method accounting . GAAP accounting but not economic reality . LOS 17.c: Describe how to evaluate the quality of a company’s financial reports. . LOS 17.d: Evaluate the quality of a company’s financial reports. . Understand the company, its industry, and the accounting principles it uses and why such principles are appropriate. . | Understand management including the terms of their compensation. Also evaluate any insider trades and related party transactions. . | Identify material areas of accounting that are vulnerable to subjectivity. . | Make cross-sectional and time series comparisons of financial statements and important ratios. . | Check for warning signs as discussed previously. . | For firms in multiple lines of business or for multinational firms, check for shifting of profits or revenues to a specific part of the business that the firm wants to highlight. This is particularly a concern when a specific segment shows dramatic improvement while the consolidated financials show negative or zero growth. . | Use quantitative tools to evaluate the likelihood of misreporting. . | Quantitative tools . The Beneish Model . . The Beneish model is a probit regression model that estimates the probability of earnings manipulation using eight dependent variables. The M-score determines the probability of earnings manipulation – higher values indicate high probabilities. . M-score &gt; -1.78 indicates a higher-than-acceptable probability of earnings manipulation. . - DSRI (Days sales receivable index) – ratio of days’ sales receivables in year t relative to year t – 1. A large increase in DSRI could be indicative of revenue inflation. . - GMI (Gross margin index) – ratio of gross margin in year t – 1 to that in year t. a firm with declining margins is more likely to manipulate earnings. . - AQI (Asset quality index) – ratio of non-current assets other than plant, property, and equipment to total assets in year t relative to year t – 1. Increases in AQI could indicate excessive capitalization of expenses. . - SGI (Sales growth index) – ratio of sales in year t relative to year t – 1. While not a measure of manipulation by itself, growth companies tend to find themselves under pressure to manipulate earnings to meet ongoing expectations. . - DEPI (Depreciation index) – ratio of depreciation rate in year t – 1 to the corresponding rate in year t. the depreciation rate is depreciation expense divided by depreciation plus PPE. A DEPI greater than 1 suggests that assets are being depreciated at a slower rate in order to manipulate earnings. . - SGAI (Sales, general and administrative expenses index) – ratio of SGA expenses (as a % of sales) in year t relative to year t – 1. Increases in SGA expenses might predispose companies to manipulate. . - Accruals = (income before extraordinary items – cash flow from operations) / total assets . - LEVI (Leverage index) – ratio of total debt to total assets in year t relative to year t – 1. . The Beneish model relies on accounting data, which may not reflect economic reality. Additionally, as managers become aware of the use of specific quantitative tools, they may begin to game the measures used. . Altman Model . . Altman’s Z-score model was developed to assess the probability that a firm will file for bankruptcy. . - Net working capital as a proportion of total assets . - Retained earnings as a proportion of total assets . - Operating profit as a proportion of total assets . - Market value of equity relative to book value of liabilities . - Sales relative to total assets . Each variable is positively related to the Z-scores, and a higher Z-score is better (less likelihood of bankruptcy). . LOS 17.f: Describe indicators of earnings quality. . Sustainable – high-quality earnings tend to persist in the future. . Adequate – high-quality earnings cover the company’s cost of capital. . High-quality earnings assume high-quality reporting. . LOS 17.e: Describe the concept of sustainable (persistent) earnings. . Sustainable or persistent earnings are earnings that are expected to recur in the future. . Accruals . . Accrual accounting requires considerable subjectivity because of the many estimates and judgments involved with assigning revenues and expenses to appropriate periods. Due to this subjectivity in revenue and expense recognition, disaggregating income into its two major components, cash and accruals, further enhances its quality as an input for forecasting future earnings. The accrual component of income is less persistent than the cash component. . LOS 17.g: Explain mean reversion in earnings and how the accruals component of earnings affects the speed of mean reversion. . When examining net income, analysts should be aware that earnings at extreme levels tend to revert back to normal levels over time. This phenomenon is known as mean reversion. Because of mean reversion, analysts should not expect extreme earnings to continue indefinitely. When earnings are largely comprised of accruals, mean reversion will occur faster. . LOS 17.h: Evaluate the earnings quality of a company. . Revenue recognition issues . Revenues generated via deliberate channel-stuffing or as a result of bill-and-hold arrangements should be considered spurious and inferior. . Cash versus accruals . | Compare financials with physical data provided by the company . | Evaluate revenue trends and compare with peers . | Check for related party transactions . | Expense capitalization . One way to boost reported performance is to under-report an operating expense by capitalizing it. . LOS 17.i: Describe indicators of cash flow quality. . While cash flows are less amenable to manipulation management can affect cash flows via strategic decisions (timing issues). . LOS 17.j: Evaluate the cash flow quality of a company. . Analysts should be aware that accounting standards afford some flexibility in the treatment of certain items in the statement of cash flows. . LOS 17.k: Describe indicators of balance sheet quality. . LOS 17.l: Evaluate the balance sheet quality of a company. . Completeness . In the case of intercorporate investments, the equity method of accounting allows one-line consolidation for investments in associates. The equity method of accounting would result in certain profitability ratios being higher than under the acquisition method. . Unbiased measurement . - Value of the pension liability (based on several actuarial assumptions) . - Value of investment in debt or equity of other companies for which a market value is not readily available. . - Goodwill value (subjectivity in impairment testing) . - Inventory valuation (subjectivity in testing for impairment) . - Impairment of PP&amp;E and other assets . LOS 17.m: Describe sources of information about risk. . - Financial statements . - Auditor’s report . - Notes to financial statements . - Management discussion and analysis (MD&amp;A) . - SEC Form ‘NT’ . - Financial press . LOS 18.a: Demonstrate the use of framework for the analysis of financial statements, given a particular problem, question, or purpose (e.g., valuing equity based on comparables, critiquing a credit rating, obtaining a comprehensive picture of financial leverage, evaluating the perspectives given in management’s discussion of financial results). . Establish the objectives . o Input . ​ § Perspective of the analyst . ​ § Needs or concerns communicated by the client or supervisor . ​ § Institutional guidelines . o Output . ​ § Purpose statement . ​ § Specific questions to be answered . ​ § Nature and content of the final report . ​ § Timetable and resource budget . | Collect data . o Input . ​ § Financial statements . ​ § Communication with management, suppliers, customers, and competitors . o Output . ​ § Organized financial information . | Process data . o Input . ​ § Data from step 2 . o Output . ​ § Adjusted financial statements . ​ § Common-size statements . ​ § Ratios . ​ § Forecasts . | Analyze data . o Input . ​ § Data from steps 2 and 3 . o Output . ​ § Results . | Develop and communicate conclusions . o Input . ​ § Results from analysis . ​ § Published report guidelines . o Output . ​ § Report answering questions posed in step 1 . ​ § recommendations . | Follow up . o Input . ​ § Periodically updated information . o Output . ​ § Updated analysis and recommendations . | The analysis focuses on the following: . - Sources of earnings and return on equity . - Asset base . - Capital structure . - Capital allocation decisions . - Earnings quality and cash flow analysis . - Market value decomposition . - Anticipating changes in accounting standards . LOS 18.b: Identify financial reporting choices and biases that affect the quality and comparability of companies’ financial statements and explain how such biases may affect financial decisions. . LOS 18.c: Evaluate the quality of a company’s financial data and recommend appropriate adjustments to improve quality and comparability with similar companies, including adjustments for differences in accounting standards, methods, and assumptions. . Sources of earnings and return on equity . ROE = Tax Burden * Interest Burden * EBIT margin * Total Asset Turnover * Financial Leverage . . We must also consider the firm’s sources of income and whether the income is generated internally from operations or externally. . Eliminating the equity income from the investor’s earnings permits analysis of the investor’s performance resulting exclusively from its own asset base. Since, under the equity method, the firm’s investment is reported as a balance sheet asset, total assets should be reduced by the carrying value of investment. . Another common adjustment made by analysts is to remove the effects of any unusual items (e.g., provisions for restructuring and litigation, goodwill impairment, etc.) from reported operating earnings (EBIT) before computing the EBIT margin and the tax burden ratios. . Asset base . Analysis of the asset base requires an examination of changes in the composition of balance sheet assets over time. . Since goodwill is no longer amortized through the income statement, we must consider the possibility of losses in the future if goodwill is determined to have been impaired. . Capital structure . A firm’s capital structure must be able to support management’s strategic objectives as well as to allow the firm to honor its future obligations. . Capital allocation decisions . Consolidated financial statements can hide the individual characteristics of dissimilar subsidiaries. As a result, firms are required to disaggregate financial information by segments to assists users. . Accrual-based measures such as EBIT may not be a good indicator of an entity’s ability to generate cash flow. We would rather evaluate segmental capital allocation decisions based on cash flows generated by each segment. However, segmental cash flow data is generally not reported. We can, however, approximate cash flow as EBIT plus depreciation and amortization. . LOS 18.d: Evaluate how a given change in accounting standards, methods, or assumptions affects financial statements and ratios. . LOS 18.e: analyze and interpret how balance sheet modifications, earnings normalization, and cash flow statement related modifications affect a company’s financial statements, financial ratios, and overall financial condition. . Accruals ratio . Balance sheet approach . Accruals BS = ending NOA – beginning NOA . Net Operating Assets (NOA) = Operating assets – Operating liabilities . Operating assets = total assets – cash, equivalents to cash, marketable securities . Operating liabilities = total liabilities – total debt (both short term and long term) . Accruals ratio BS = (ending NOA – beginning NOA) / ((ending NOA + beginning NOA) / 2) . Cash flow statement approach . Accruals CF = NI – CFO – CFI . Accruals ratio CF = (NI – CFO – CFI) / ((ending NOA – beginning NOA) / 2) . In order to compare the two measures, it is necessary to eliminate cash paid for interest and taxes from operating cash flow by adding them back. This adjusted figure is the cash generated from operations (CGO). . CGO = EBIT + non-cash charges – increase in working capital . CGO / operating income ratio 사용함 . Market value decomposition . When a parent company has an ownership interest in an associate (subsidiary or affiliate), it may be beneficial to determine the standalone value of the parent; that is, the implied value of the parent without regard to the value of the associate. The implied value is equal to the parent’s market value less the parent’s pro-rata share of the associate’s market value. If the associate’s stock is traded on a foreign stock exchange, it may be necessary to convert the market value of the associate to the parent’s reporting currency. .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/09/12/CFA-Level-2-Financial-Reporting-and-Analysis.html",
            "relUrl": "/markdown/2021/09/12/CFA-Level-2-Financial-Reporting-and-Analysis.html",
            "date": " • Sep 12, 2021"
        }
        
    
  
    
        ,"post25": {
            "title": "CFA Level 2 Derivatives",
            "content": "Derivatives . . . LOS 37.a: Describe and compare how equity, interest rate, fixed-income, and currency forward and futures contracts are priced and valued. . LOS 37.b: Calculate and interpret the no-arbitrage value of equity, interest rate, fixed-income, and currency forward and futures contracts. . . Forward contract . Long forward position – agrees to buy the financial or physical asset . Short forward position – agrees to sell/deliver the asset . Typically, no money changes hands at the inception of the contract, unlike futures contracts. . At any point in time, forward contract is a zero-sum game. . The no-arbitrage principle . Forward price refers to the forward price of the underlying. . No-arbitrage principle - The price that we wish to determine is the forward price that makes the values of both the long and the short positions zero at contract initiation. There should be no riskless profit to be gained by a combination of a forward contract position with positions in other assets. . This principle assumes that (1) transactions costs are zero, (2) there are no restrictions on short sales or the use of short sale proceeds, and (3) both borrowing and lending can be done in unlimited amounts at the risk-free rate of interest. . Forward price = price that prevents profitable riskless arbitrage in frictionless markets . A simple version of the cost-of-carry model . . Cash and carry arbitrage when the forward contract is overpriced compared to no-arbitrage price . . Reverse cash and carry arbitrage when the forward contract is underprice compared to no-arbitrage price . Short spot asset, long forward . Day count convention . . All LIBOR-based contracts such as FRAs, swaps, caps, floors, etc . 360 days per year and simple interest . Equities, bonds, currencies, and stock options . 365 days per year and periodic compound interest . Equity indexes . 365 days per year and continuous compounding . Pricing and valuation of equity forwards . Equity forward contracts with discrete dividends . . . 진정한 기초자산이 뭔지 확인하고, 그 기초자산을 무위험 이자율로 굴려나가면 forward price . . . Equity forward contracts with continuous dividends . Underlying asset is an equity index. . Continuous dividend는 dividend yield로 표시됨 . . Pricing and valuation of fixed income forwards . . . Clean price는 해당 주기에서의 bond 가격 . Full price는 실제 bond market에서 거래되는 가격, 해당 bond를 사려면 지불해야 하는 실제 가격 – accrued interest 포함 . UST – semiannual . Bond futures contracts often allow the short an option to deliver any of several bonds, which will satisfy the delivery terms of the contract. This is called a delivery option and is valuable to the short. Each bond is given a conversion factor that is used to adjust the long’s payment at delivery so the more valuable bonds receive a lager payment. These factors are multipliers for the futures price at settlement. The long pays the futures price at expiration, multiplied by the conversion factor (CF). . . 가격표시는 clean price로 되지만, 실제 futures price를 거래할 때는 accrued interest의 현재가치를 빼준 full price를 사용해야 한다. . . . . Pricing forward rate agreements . LIBOR – London Interbank Offered Rate . It is quoted as an annualized rate based on a 360-day year. . . The long position in a forward rate agreement (FRA) is the party that is effectively borrowing money (long the loan, with the contract price being the interest rate on the loan). . Pricing FRAs . 1. LIBOR rates in the Eurodollar market are add-on rates and are always quoted on a 30/360 day basis in annual terms. . 2. The long position in an FRA is, in effect, long the rate and benefits when the rate increases. . 3. Although the interest on the underlying loan won’t be paid until the end of the loan. Therefore, the payoff on the FRA is the present value of the interest savings on the loan. . The forward price in an FRA is actually a forward interest rate. . Valuation of forward rate agreements . . . Pricing and valuation of currency contracts . Interest rate parity is based on a no-arbitrage condition: a higher interest rate currency will trade at a forward discount to offset the extra interest income. . . . 항상 가격 표시는 price currency (foreign currency)로 . . . . Futures contract . Futures contract are very much like the forward contracts except that they trade on organized exchanges. . To safeguard the clearinghouse, the exchange requires both sides of the trade to post margin and settle their accounts on a daily basis. Thus, the margin in the futures markets is a performance guarantee. . Marking to market is the process of adjusting the margin balance in a futures account each day for the change in the value of the contract from the previous trading day, based on the settlement price. . Like forward contracts, futures contracts have no value at contract initiation. Unlike forward contracts, futures contracts do not accumulate value changes over the term of the contract. Since futures accounts are marked to market daily, the value after the margin deposit has been adjusted for the day’s gains and losses in contract value is always zero. . LOS 37.c: Describe and compare how interest rate, currency, and equity swaps are priced and valued. . LOS 37.d: Calculate and interpret the no-arbitrage value of interest rate, currency, and equity swaps. . One party agrees to pay floating (borrow at the floating rate) and receive fixed (lend at a fixed rate). At initiation of the swap, the fixed rate is selected so that the present value of the floating-rate payments is equal to the present value of the fixed-rate payments, which means the swap value is zero to both parties. This fixed rate is called the swap fixed rate. . Computing the swap fixed rate . . . . . Calculating the market value of an interest rate swap . . . Currency swaps . The interest rates in a currency swap are simply the swap rates calculated from each country’s yield curve in the relevant country’s currency. . . . . . Equity swaps . A swap of returns on two different stocks can be viewed as buying one stock (receiving the returns) and shorting an equal value of a different stock (paying the returns). There is on pricing at swap initiation. . . . . . LOS 38.a: Describe and interpret the binomial option valuation model and its component terms. . LOS 38.b: Calculate the no-arbitrage values of European and American options using a two-period binomial model. . LOS 38.e: Describe how the value of a European option can be analyzed as the present value of the option’s expected payoff at expiration. . A binomial model is based on the idea that, over the next period, the value of an asset will change to one of two possible values (binomial). To construct a binomial model, we need to know the beginning asset value, the size of the two possible changes, and the probability of each of these changes occurring. . . - Calculating the payoff of the option at maturity in both the up-move and down-move states. . - Calculating the expected value of the option in one year as the probability-weighted average of the payoffs in each state. . - Discounting the expected value back to today at the risk-free rate. . . . Two period binomial model and put-call parity . . Put call parity can be used to create a synthetic instrument that replicates the desired instrument. . . . . . American option . While the early exercise feature is not valuable for call options on non-dividend paying stocks, deep-in-the-money put options could benefit from early exercise. When an investor exercises an option early, she captures only the intrinsic value of the option and forgoes the time value. While the intrinsic value can be invested at the risk-free rate, the interest so earned is less than the time value in most cases. For deep-in-the-money put option, the upside is limited. In such cases, the interest on intrinsic value can exceed the option’s time value. . American-style call options on dividend-paying stocks can be evaluated similarly. For dividend-paying stocks the stock price falls when the stock goes ex-dividend, and it may take sense to exercise the call option before such a decline in price. . . . . LOS 38.c: Identify an arbitrage opportunity involving options and describe the related arbitrage. . . The fractional share of stock needed in the arbitrage trade (hedge ratio or delta) . LOS 38.d: Calculate and interpret the value of an interest rate option using a two-period binomial model. . The interest rates are selected so that the risk-neutral probabilities of up- and down-moves are both equal to 0.5. . Call payoff = notional principal * Max(0, reference rate – exercise rate) . Maturity 시점에서 바로 settelement되는 가정 . . LOS 38.f: Identify assumptions of the Black-Scholes-Merton option valuation model. . The BSM option valuation model values options in continuous time, but it based on the no-arbitrage condition we used in valuing options in discrete time with a binomial model. To derive the BSM model, an instantaneously riskless portfolio (one that is riskless over the next instant) is used to solve for the option price. . The assumptions underlying the BSM model are . 1. The underlying asset price follows a geometric Brownian motion process. Therefore, the asset price has a lognormal distribution. In other words, the continuous compounded return is normally distributed. Under this framework, change in asset price is continuous: there are no abrupt jumps. . 2. The continuous compounded risk-free rate is constant and known. Borrowing and lending are both at the risk-free rate. . 3. The volatility of the returns from inception to maturity on the underlying asset is constant and known. The price of the underlying changes smoothly. . 4. Markets are frictionless. There are no taxes, no transactions costs, and no restrictions on short sales or the use of short-sale proceeds. Continuous trading is possible, and there are no arbitrage opportunities in the marketplace. . 5. The continuously compounded yield from inception to maturity on the underlying asset is constant. . 6. The options are European options. . . . LOS 38.g: Interpret the components of the Black-Scholes-Merton model as applied to call options in terms of a leveraged position in the underlying. . The BSM value can be thought of as the present value of the expected option payoff at expiration. . Calls can be thought of as a leveraged stock investment where N(d1) units of stock are purchased using borrowed funds. . N(d2) is interpreted as the risk-neutral probability that a call option will expire in the money. . . . . . LOS 38.h: Describe how the Black-Scholes-Merton model is used to value European options on equities and currencies. . . LOS 38.i: Describe how the Black model is used to value European options on futures. . . The value of a call option on futures is equal to the value of a portfolio with a long futures position (the PV of the futures price multiplied by N(d1)) and a short bond position (the PV of the exercise price multiplied by N(d2)) . The value of a put option is equal to the value of portfolio with a long bond and a short futures position. . The value of a call can also be thought of as the present value of the difference between the futures price adjusted by N(d1) and the exercise price adjusted by N(d2). . LOS 38.j: Describe how the Black model is used to value European interest rate options and European swaptions. . . Interest rate options are options on forward rates (or options on FRAs). A call option on an FRA gains when rates rise, and a put option on an FRA gains when rates fall. . Equivalencies in interest rate derivatives contracts . 1. A long interest rate call and a short interest rate put (with exercise rate = current FRA rate) can be used to replicate a long FRA. . 2. If the exercise rate = the current FRA rate, a short interest rate call and long interest rate put can be combined to replicate a short FRA position. . 3. A series of interest rate call options with different maturities and the same exercise price can be combined to form an interest rate cap. Each of the call options in an interest rate cap is known as a caplet. A floating rate loan can be hedged using a long interest rate bond. . 4. An interest rate floor is a portfolio of interest rate put options, and each of these puts is known as a floorlet. Floors can be used to hedge a long position in a floating rate bond. . 5. If the exercise rate on a cap and floor is same, a long cap and short floor can be used to replicate a payer swap. . 6. A short cap and long floor can replicate a receiver swap. . 7. If the exercise rate on a floor and a cap are set equal to a market swap fixed rate, the value of the cap will be equal to the value of the floor. . . . . . . Swaptions . A swaption is an option that gives the holder the right to enter into an interest rate swap. . . . A swaption is equivalent to an option on a series of cash flows (annuity), one for each settlement date of the underlying swap, equal to the difference between the exercise rate on the swaption and the market swap fixed rate. . If PVA represents the present value of such an annuity, the value of a payer swaption using the Black model can be calculated. . Equivalencies . A long callable bond can be replicated using a long position option-free bond plus a short receiver swaption. . . . LOS 38.k: Interpret each of the option Greeks. . . Delta . Delta describes the relationship between changes in asset prices and changes in option prices. Delta is also the hedge ratio. Call option deltas are positive because as the underlying asset price increases, call option value also increases. Conversely, the delta of a put option is negative because put value falls as the asset price increases. . Interpreting Delta . The bottom line is that a call option’s delta will increase from 0 to 1 as non-dividend paying stock price increase. For a non-dividend paying stock, the put delta increases from -1 to 0 as the stock price increases. . . . . Gamma . Gamma measures the rate of changes in delta as the underlying stock price changes. Gamma captures the curvature of the option-value-versus-stock-price relationship. Long positions in calls and puts have positive gamma. . Gamma is highest for at-the-money options. Deep-in-the-money or deep-out-of-the-money options have low gamma. Gamma changes with stock price and with time to expiration. To lower (increase) the overall gamma of a portfolio, one should short (go long) options. . Call and put options on the same underlying asset with the same exercise price and time to expiration will have equal gammas. . . Vega . Vega measures the sensitivity of the option price to changes in the volatility of returns on the underlying asset. Both call and put options are more valuable, all else equal, the higher the volatility, so vega is positive for both calls and puts. . Rho . Rho measures the sensitivity of the option price to change in the risk-free rate. . . Theta . Theta measures the sensitivity of option price to the passage of time. As time passes and a call option approaches maturity, its speculative value declines, all else equal. This is called time decay. That behavior also applied for most put options (though deep in-the-money put options closed to maturity may actually increases in value as time passes). Because it is a measure of time decay, theta is less than zero: as time passes and the option approaches the maturity date, the option value decreases (holding other factors constant). . . . Sensitivity factor (Greeks) Input Long call Long put . Delta | Asset price | Positively related | Negatively related | . Gamma | Delta | Positive | Positive | . Vega | Volatility | Positive | Positive | . Rho | Risk-free rate | Positive | Negative | . Theta | Time to expiration | Negative | Negative | .   | Exercise price | Negatively related | Positively related | . LOS 38.l: Describe how a delta hedge is executed. . The goal of a delta-neutral portfolio or delta-neutral hedge is to combine a long position in a stock with a short position in a call option so that the value of the portfolio does not change as the stock price changes. . Number of short call options needed to delta hedge = number of shares hedged / delta of call option . Number of long put options needed to delta hedge = - number of shares hedged / delta of put option . A key consideration in delta-neutral hedging is that the delta hedged asset position is only risk-free for a very small change in the value of the underlying stock. The delta-neutral portfolio must be continually rebalanced to maintain the hedge; for this reason, it is called a dynamic hedge. . . . LOS 38.m: Describe the role of gamma risk in option trading. . Gamma risk is therefore the risk that the stock price might abruptly jump leaving an otherwise delta-hedged portfolio unhedged. . Consider a delta hedge involving a long position in stock and short position in calls. If the stock price falls abruptly, the loss in the long stock position will not equal to gain in the short call position. This is the gamma risk of the hedge. . Because a stock’s delta is always 1, its gamma is 0. A delta-hedged portfolio with a long position in stocks and a short position in calls with have negative net gamma exposures. . LOS 38.n: Define implied volatility and explain how it is used in options trading. . Future volatility is one of the inputs in the BSM model. Estimates based on historical volatility are often used because future volatility is not directly observable. . Traders often use implied volatilities to gauge market perceptions. . Traders can also used implied volatility as a mechanism to quote option prices. . .",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2021/09/12/CFA-Level-2-Derivatives.html",
            "relUrl": "/markdown/2021/09/12/CFA-Level-2-Derivatives.html",
            "date": " • Sep 12, 2021"
        }
        
    
  
    
        ,"post26": {
            "title": "Fastpages Notebook Blog Post",
            "content": "About . This notebook is a demonstration of some of capabilities of fastpages with notebooks. . With fastpages you can save your jupyter notebooks into the _notebooks folder at the root of your repository, and they will be automatically be converted to Jekyll compliant blog posts! . Front Matter . The first cell in your Jupyter Notebook or markdown blog post contains front matter. Front matter is metadata that can turn on/off options in your Notebook. It is formatted like this: . # &quot;My Title&quot; &gt; &quot;Awesome summary&quot; - toc:true- branch: master - badges: true - comments: true - author: Hamel Husain &amp; Jeremy Howard - categories: [fastpages, jupyter] . Setting toc: true will automatically generate a table of contents | Setting badges: true will automatically include GitHub and Google Colab links to your notebook. | Setting comments: true will enable commenting on your blog post, powered by utterances. | . The title and description need to be enclosed in double quotes only if they include special characters such as a colon. More details and options for front matter can be viewed on the front matter section of the README. . Markdown Shortcuts . A #hide comment at the top of any code cell will hide both the input and output of that cell in your blog post. . A #hide_input comment at the top of any code cell will only hide the input of that cell. . The comment #hide_input was used to hide the code that produced this. . put a #collapse-hide flag at the top of any cell if you want to hide that cell by default, but give the reader the option to show it: . import pandas as pd import altair as alt . . put a #collapse-show flag at the top of any cell if you want to show that cell by default, but give the reader the option to hide it: . cars = &#39;https://vega.github.io/vega-datasets/data/cars.json&#39; movies = &#39;https://vega.github.io/vega-datasets/data/movies.json&#39; sp500 = &#39;https://vega.github.io/vega-datasets/data/sp500.csv&#39; stocks = &#39;https://vega.github.io/vega-datasets/data/stocks.csv&#39; flights = &#39;https://vega.github.io/vega-datasets/data/flights-5k.json&#39; . . place a #collapse-output flag at the top of any cell if you want to put the output under a collapsable element that is closed by default, but give the reader the option to open it: . print(&#39;The comment #collapse-output was used to collapse the output of this cell by default but you can expand it.&#39;) . The comment #collapse-output was used to collapse the output of this cell by default but you can expand it. . . Interactive Charts With Altair . Charts made with Altair remain interactive. Example charts taken from this repo, specifically this notebook. . Example 1: DropDown . # use specific hard-wired values as the initial selected values selection = alt.selection_single( name=&#39;Select&#39;, fields=[&#39;Major_Genre&#39;, &#39;MPAA_Rating&#39;], init={&#39;Major_Genre&#39;: &#39;Drama&#39;, &#39;MPAA_Rating&#39;: &#39;R&#39;}, bind={&#39;Major_Genre&#39;: alt.binding_select(options=genres), &#39;MPAA_Rating&#39;: alt.binding_radio(options=mpaa)} ) # scatter plot, modify opacity based on selection alt.Chart(df).mark_circle().add_selection( selection ).encode( x=&#39;Rotten_Tomatoes_Rating:Q&#39;, y=&#39;IMDB_Rating:Q&#39;, tooltip=&#39;Title:N&#39;, opacity=alt.condition(selection, alt.value(0.75), alt.value(0.05)) ) . Example 2: Tooltips . alt.Chart(df).mark_circle().add_selection( alt.selection_interval(bind=&#39;scales&#39;, encodings=[&#39;x&#39;]) ).encode( alt.X(&#39;Rotten_Tomatoes_Rating&#39;, type=&#39;quantitative&#39;), alt.Y(&#39;IMDB_Rating&#39;, type=&#39;quantitative&#39;, axis=alt.Axis(minExtent=30)), # y=alt.Y(&#39;IMDB_Rating:Q&#39;, ), # use min extent to stabilize axis title placement tooltip=[&#39;Title:N&#39;, &#39;Release_Date:N&#39;, &#39;IMDB_Rating:Q&#39;, &#39;Rotten_Tomatoes_Rating:Q&#39;] ).properties( width=500, height=400 ) . Example 3: More Tooltips . label = alt.selection_single( encodings=[&#39;x&#39;], # limit selection to x-axis value on=&#39;mouseover&#39;, # select on mouseover events nearest=True, # select data point nearest the cursor empty=&#39;none&#39; # empty selection includes no data points ) # define our base line chart of stock prices base = alt.Chart().mark_line().encode( alt.X(&#39;date:T&#39;), alt.Y(&#39;price:Q&#39;, scale=alt.Scale(type=&#39;log&#39;)), alt.Color(&#39;symbol:N&#39;) ) alt.layer( base, # base line chart # add a rule mark to serve as a guide line alt.Chart().mark_rule(color=&#39;#aaa&#39;).encode( x=&#39;date:T&#39; ).transform_filter(label), # add circle marks for selected time points, hide unselected points base.mark_circle().encode( opacity=alt.condition(label, alt.value(1), alt.value(0)) ).add_selection(label), # add white stroked text to provide a legible background for labels base.mark_text(align=&#39;left&#39;, dx=5, dy=-5, stroke=&#39;white&#39;, strokeWidth=2).encode( text=&#39;price:Q&#39; ).transform_filter(label), # add text labels for stock prices base.mark_text(align=&#39;left&#39;, dx=5, dy=-5).encode( text=&#39;price:Q&#39; ).transform_filter(label), data=stocks ).properties( width=500, height=400 ) . Data Tables . You can display tables per the usual way in your blog: . df[[&#39;Title&#39;, &#39;Worldwide_Gross&#39;, &#39;Production_Budget&#39;, &#39;Distributor&#39;, &#39;MPAA_Rating&#39;, &#39;IMDB_Rating&#39;, &#39;Rotten_Tomatoes_Rating&#39;]].head() . Title Worldwide_Gross Production_Budget Distributor MPAA_Rating IMDB_Rating Rotten_Tomatoes_Rating . 0 The Land Girls | 146083.0 | 8000000.0 | Gramercy | R | 6.1 | NaN | . 1 First Love, Last Rites | 10876.0 | 300000.0 | Strand | R | 6.9 | NaN | . 2 I Married a Strange Person | 203134.0 | 250000.0 | Lionsgate | None | 6.8 | NaN | . 3 Let&#39;s Talk About Sex | 373615.0 | 300000.0 | Fine Line | None | NaN | 13.0 | . 4 Slam | 1087521.0 | 1000000.0 | Trimark | R | 3.4 | 62.0 | . Images . Local Images . You can reference local images and they will be copied and rendered on your blog automatically. You can include these with the following markdown syntax: . ![](my_icons/fastai_logo.png) . . Remote Images . Remote images can be included with the following markdown syntax: . ![](https://image.flaticon.com/icons/svg/36/36686.svg) . . Animated Gifs . Animated Gifs work, too! . ![](https://upload.wikimedia.org/wikipedia/commons/7/71/ChessPawnSpecialMoves.gif) . . Captions . You can include captions with markdown images like this: . ![](https://www.fast.ai/images/fastai_paper/show_batch.png &quot;Credit: https://www.fast.ai/2020/02/13/fastai-A-Layered-API-for-Deep-Learning/&quot;) . . Other Elements . GitHub Flavored Emojis . Typing I give this post two :+1:! will render this: . I give this post two :+1:! . Tweetcards . Typing &gt; twitter: https://twitter.com/jakevdp/status/1204765621767901185?s=20 will render this: Altair 4.0 is released! https://t.co/PCyrIOTcvvTry it with: pip install -U altairThe full list of changes is at https://t.co/roXmzcsT58 ...read on for some highlights. pic.twitter.com/vWJ0ZveKbZ . &mdash; Jake VanderPlas (@jakevdp) December 11, 2019 . Youtube Videos . Typing &gt; youtube: https://youtu.be/XfoYk_Z5AkI will render this: . Boxes / Callouts . Typing &gt; Warning: There will be no second warning! will render this: . Warning: There will be no second warning! . Typing &gt; Important: Pay attention! It&#39;s important. will render this: . Important: Pay attention! It&#8217;s important. . Typing &gt; Tip: This is my tip. will render this: . Tip: This is my tip. . Typing &gt; Note: Take note of this. will render this: . Note: Take note of this. . Typing &gt; Note: A doc link to [an example website: fast.ai](https://www.fast.ai/) should also work fine. will render in the docs: . Note: A doc link to an example website: fast.ai should also work fine. . Footnotes . You can have footnotes in notebooks, however the syntax is different compared to markdown documents. This guide provides more detail about this syntax, which looks like this: . For example, here is a footnote {% fn 1 %}. And another {% fn 2 %} {{ &#39;This is the footnote.&#39; | fndetail: 1 }} {{ &#39;This is the other footnote. You can even have a [link](www.github.com)!&#39; | fndetail: 2 }} . For example, here is a footnote 1. . And another 2 . 1. This is the footnote.↩ . 2. This is the other footnote. You can even have a link!↩ .",
            "url": "https://sy9777m.github.io/Kevin_Min/jupyter/2020/02/20/test.html",
            "relUrl": "/jupyter/2020/02/20/test.html",
            "date": " • Feb 20, 2020"
        }
        
    
  
    
        ,"post27": {
            "title": "An Example Markdown Post",
            "content": "Example Markdown Post . Basic setup . Jekyll requires blog post files to be named according to the following format: . YEAR-MONTH-DAY-filename.md . Where YEAR is a four-digit number, MONTH and DAY are both two-digit numbers, and filename is whatever file name you choose, to remind yourself what this post is about. .md is the file extension for markdown files. . The first line of the file should start with a single hash character, then a space, then your title. This is how you create a “level 1 heading” in markdown. Then you can create level 2, 3, etc headings as you wish but repeating the hash character, such as you see in the line ## File names above. . Basic formatting . You can use italics, bold, code font text, and create links. Here’s a footnote 1. Here’s a horizontal rule: . . Lists . Here’s a list: . item 1 | item 2 | . And a numbered list: . item 1 | item 2 | Boxes and stuff . This is a quotation . . You can include alert boxes …and… . . You can include info boxes Images . . Code . You can format text and code per usual . General preformatted text: . # Do a thing do_thing() . Python code and output: . # Prints &#39;2&#39; print(1+1) . 2 . Formatting text as shell commands: . echo &quot;hello world&quot; ./some_script.sh --option &quot;value&quot; wget https://example.com/cat_photo1.png . Formatting text as YAML: . key: value - another_key: &quot;another value&quot; . Tables . Column 1 Column 2 . A thing | Another thing | . Tweetcards . Altair 4.0 is released! https://t.co/PCyrIOTcvvTry it with: pip install -U altairThe full list of changes is at https://t.co/roXmzcsT58 ...read on for some highlights. pic.twitter.com/vWJ0ZveKbZ . &mdash; Jake VanderPlas (@jakevdp) December 11, 2019 Footnotes . This is the footnote. &#8617; . |",
            "url": "https://sy9777m.github.io/Kevin_Min/markdown/2020/01/14/test-markdown-post.html",
            "relUrl": "/markdown/2020/01/14/test-markdown-post.html",
            "date": " • Jan 14, 2020"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "About Me",
          "content": "This website is powered by fastpages 1. . a blogging platform that natively supports Jupyter notebooks in addition to other formats. &#8617; . |",
          "url": "https://sy9777m.github.io/Kevin_Min/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
  

  

  
  

  

  
  

  
  

  

  
  

  
      ,"page11": {
          "title": "",
          "content": "Sitemap: {{ “sitemap.xml” | absolute_url }} | .",
          "url": "https://sy9777m.github.io/Kevin_Min/robots.txt",
          "relUrl": "/robots.txt",
          "date": ""
      }
      
  

}